import{_ as G,eA as N,eB as B,V as R,f as k,r as o,q as d,k as _,w as c,o as l,n as a,u as p,aa as y,m,t as A,F as f,p as b,s as C,eZ as L}from"./index-13ff96f4.js";import{a as v,b as P,O as w}from"./OnboardingEmptyState-28bd43c0.js";import{O as U}from"./OnboardingProgressIndicator-8fa4a42d.js";import{C as x}from"./ConnectGitlabServerInstance-9e3cb948.js";import"./gitlabServer-f1adde30.js";const D={props:{title:String,description:String,selectTitle:String,selectDescription:String,numberOfSteps:Number,numberOfCompletedSteps:Number,groups:Array,isLoading:Boolean,icon:String},emits:["continue","back"],components:{OnboardingSection:N,OnboardingPage:B,OnboardingOptionList:v,OnboardingOptionListItem:P,OnboardingProgressIndicator:U,InputText:R,BaseButton:k},data(){return{selectedGroups:[],searchTerm:""}},computed:{filteredGroupOptions(){return this.groups.slice().filter(e=>e.title.toLowerCase().includes(this.searchTerm.toLowerCase()))},errorMessage(){},showEmptyState(){return!this.isLoading&&this.groups.length===0}},methods:{handleSelectItem(e){this.selectedGroups=[...this.selectedGroups,e]},handleUnselectItem(e){this.selectedGroups=this.selectedGroups.filter(n=>n!==e)},async handleContinue(){this.$emit("continue",{selectedGroups:this.selectedGroups})}}},V=a("img",{class:"",src:"https://cdn.aikido.dev/assets/logo-white.svg?v=2",width:"180"},null,-1),M={class:"onboarding__title mb-36px mt-64px text-white"},z={class:"onboarding__paragraph onboarding__paragraph--size-large text-carbon-20"},Y={class:"onboarding__title text-primary-aik-140 mb-8px"},j={class:"onboarding__paragraph onboarding__paragraph--size-medium text-carbon-60"},F={class:"mb-16px mt-32px max-w-260px"},q={key:0,class:"flex w-full justify-center my-16px"},Z=a("p",{class:"onboarding__paragraph onboarding__paragraph--size-small text-gray-300"},"No matching results",-1),H=[Z],J={class:"mt-16px mb-16px"},K={key:0,class:"onboarding__paragraph onboarding__paragraph--size-small text-surface-red-100"},Q={class:"flex mt-auto justify-end align-center mobile_flex-column gap-16px"};function W(e,n,s,T,r,t){const h=o("OnboardingProgressIndicator"),u=o("OnboardingSection"),g=o("InputText"),O=o("OnboardingOptionListItem"),E=o("OnboardingOptionList"),S=o("BaseButton"),I=o("OnboardingPage");return d(),_(I,null,{default:c(()=>[l(u,{"align-content":"bottom",theme:"dark",class:"onboarding__section__content"},{default:c(()=>[V,a("h1",M,p(s.title),1),a("p",z,p(s.description),1),l(h,{"number-of-completed-steps":s.numberOfCompletedSteps,"number-of-steps":s.numberOfSteps},null,8,["number-of-completed-steps","number-of-steps"])]),_:1}),l(u,{"align-content":"top",theme:"light",class:"onboarding__section__content",isLoading:s.isLoading,scrollable:""},{default:c(()=>[a("h4",Y,p(s.selectTitle),1),a("p",j,p(s.selectDescription),1),a("div",F,[l(g,{modelValue:r.searchTerm,"onUpdate:modelValue":n[0]||(n[0]=i=>r.searchTerm=i),name:"search-groups",class:"onboarding__input",placeholder:"Search",prefixIcon:"icon-search"},null,8,["modelValue"])]),l(E,{"show-empty-state":t.showEmptyState},{emptyState:c(()=>[y(e.$slots,"emptyState")]),optionList:c(()=>[t.filteredGroupOptions.length===0?(d(),m("div",q,H)):(d(!0),m(f,{key:1},A(t.filteredGroupOptions,i=>(d(),_(O,{onSelect:t.handleSelectItem,onUnselect:t.handleUnselectItem,key:i.id,title:i.title,description:i.description,icon:s.icon,selected:r.selectedGroups.includes(i.id),"item-id":i.id,disabled:i.disabled},null,8,["onSelect","onUnselect","title","description","icon","selected","item-id","disabled"]))),128))]),_:3},8,["show-empty-state"]),a("div",J,[t.errorMessage?(d(),m("p",K,p(t.errorMessage),1)):b("",!0)]),a("div",Q,[l(S,{onClicked:n[1]||(n[1]=i=>e.$emit("back")),variation:"plain",size:"large",rounded:""},{default:c(()=>[C(" Back ")]),_:1}),l(S,{onClicked:t.handleContinue,variation:"primary",size:"large",rounded:"",disabled:r.selectedGroups.length==0},{default:c(()=>[C("Authenticate")]),_:1},8,["onClicked","disabled"])])]),_:3},8,["isLoading"])]),_:3})}const X=G(D,[["render",W]]),$={components:{ConnectGroupBulk:X,ConnectGitlabServerInstance:x,OnboardingEmptyState:w},data(){return{showConnectServer:!0,showSelectGroup:!1,accessibleGroups:[],isLoading:!0,accessToken:void 0,serverUrl:void 0}},computed:{groupOptions(){return this.accessibleGroups.map(e=>({id:e.id,title:e.full_name,description:e.description}))}},methods:{handleContinue({url:e,token:n,groups:s}){this.accessToken=n,this.serverUrl=e,this.accessibleGroups=s,this.showConnectServer=!1,this.showSelectGroup=!0},handleBack(){this.showConnectServer=!0,this.showSelectGroup=!1},async handleCreateGroup({selectedGroups:e}){const n=e.map(s=>L({access_token:this.accessToken,server_url:this.serverUrl,gitlab_group_id:s}));await Promise.all(n),this.$router.push("/")},async handleCreateSample(){go("/onboarding/demo")}}};function ee(e,n,s,T,r,t){const h=o("ConnectGitlabServerInstance"),u=o("OnboardingEmptyState"),g=o("ConnectGroupBulk");return d(),m(f,null,[r.showConnectServer?(d(),_(h,{key:0,"number-of-completed-steps":0,"number-of-steps":2,"initial-server-url":r.serverUrl,"initial-access-token":r.accessToken,onContinue:t.handleContinue,onBack:n[0]||(n[0]=O=>e.$router.go(-1))},null,8,["initial-server-url","initial-access-token","onContinue"])):b("",!0),r.showSelectGroup?(d(),_(g,{key:1,title:e.$t("ONBOARDING.GITLAB_SERVER.CONNECT_GROUP.TITLE"),description:e.$t("ONBOARDING.GITLAB_SERVER.CONNECT_GROUP.DESCRIPTION"),"select-title":e.$t("ONBOARDING.GITLAB_SERVER.CONNECT_GROUP.SELECT.TITLE"),"select-description":e.$t("ONBOARDING.GITLAB_SERVER.CONNECT_GROUP.SELECT.DESCRIPTION"),groups:t.groupOptions,"is-loading":!1,"number-of-steps":2,"number-of-completed-steps":1,onContinue:t.handleCreateGroup,onBack:t.handleBack,icon:"icon-Gitlab"},{emptyState:c(()=>[l(u,{title:e.$t("ONBOARDING.GITLAB_SERVER.CONNECT_GROUP.EMPTY_STATE.TITLE"),description:e.$t("ONBOARDING.GITLAB_SERVER.CONNECT_GROUP.EMPTY_STATE.DESCRIPTION"),"primary-cta":e.$t("ONBOARDING.GITLAB_SERVER.CONNECT_GROUP.EMPTY_STATE.PRIMARY_CTA"),"secondary-cta":e.$t("ONBOARDING.GITLAB_SERVER.CONNECT_GROUP.EMPTY_STATE.SECONDARY_CTA"),onUseSample:t.handleCreateSample,onUseDifferentAccount:t.handleBack},null,8,["title","description","primary-cta","secondary-cta","onUseSample","onUseDifferentAccount"])]),_:1},8,["title","description","select-title","select-description","groups","onContinue","onBack"])):b("",!0)],64)}const ie=G($,[["render",ee]]);export{ie as default};
