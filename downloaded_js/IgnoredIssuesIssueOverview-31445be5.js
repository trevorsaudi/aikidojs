import{u as E}from"./useInfiniteScroll-47c60c9e.js";import{_ as w,B as L,a2 as V,r as s,q as c,k as y,w as r,n as m,o as e,m as F,p as T,s as f,u as R,F as S,a1 as N,I as O,al as M,cq as I,an as G,aV as U,cs as j,cr as A,t as v,ai as W,S as H,cu as z}from"./index-13ff96f4.js";import{Q as X}from"./QueueSidebar-47492277.js";import{Q as J}from"./QueueMultiSelectTypeFilter-a1a475d7.js";import{Q as K}from"./QueueQuickFilter-70881bd4.js";import{R as Y,I as Z}from"./IssuesByStatusEmptyState-4ccc6f81.js";import{D as $,a as ee}from"./DataTable-e31a825a.js";import{D as x,a as te}from"./DataTableCell-51c0104f.js";import{I as se}from"./IssueGroupTypeColumn-03f014b0.js";import{I as oe,b as re,c as ie,a as ne}from"./IssueGroupSeverityColumn-7631c77a.js";import{B as ae}from"./BaseStatusLabel-0ccd2806.js";import{B as ue}from"./BulletPoint-1404881f.js";import"./SidebarActionMenu-1bf6804b.js";import"./CreateAutoFixProgressFlow-8111d22c.js";import"./RadioButtonList-1d4cdaad.js";import"./EnableIntegrationModal-48b01f56.js";import"./focusModePreference-150f170e.js";import"./TableListHeader-e50d01d1.js";import"./ActionMenu-3e4470bf.js";import"./BaseRadioInput-a7ac3557.js";import"./BaseLabel-a1c0ca00.js";import"./AIText-891d4f7b.js";import"./InputCheckbox-81cb3ca6.js";import"./BreakSlashes-925eef0e.js";import"./UnignoreIssue-5dff8957.js";import"./CreateTicketModal-c14deeb1.js";import"./ManualInputSearchDropdown-6a7ece3e.js";import"./InputSearchDropdown-02988f6b.js";import"./repoName-872812ed.js";import"./taskTrackerNaming-55adac3e.js";import"./taskTrackerIcon-504ea566.js";import"./autofixable-c6560249.js";import"./autofixSastIssues-779ec5b4.js";import"./index-b87db690.js";import"./dateFns-a344cb79.js";import"./lock-files-cdbb050f.js";import"./BaseCodeBlock-cec75629.js";import"./string-814c5ffd.js";import"./ButtonMultiOption-12e505fb.js";import"./transform-c376ec3f.js";import"./linear-efb37b7f.js";import"./arc-12e4470a.js";import"./BaseForm-4c6fa06f.js";import"./XTabs-d492da26.js";import"./BaseCard-471d3203.js";import"./AccordionContainer-09dc0ed4.js";import"./trycatch-83445d5b.js";import"./licenses-6ab38515.js";import"./FilterButton-bb5393a7.js";import"./ScmSecurity-27bd32ff.js";import"./languages-12749071.js";import"./OverviewEmptyState-c8440b9c.js";import"./GenericIllustration-4aca88e5.js";import"./SnoozedIllustration-a91c1ac9.js";import"./SolvedIllustration-3f250925.js";import"./BracesIcon-0a8568f4.js";import"./BoxIcon-9908469f.js";import"./DataTableSeverityIndicator-48ffb8dc.js";const le={components:{DataTableCell:x,BaseParagraph:L,BaseStatusLabel:ae,BulletPoint:ue,XTooltip:V},props:{issueGroup:Object},inject:["ignoreReasonFilter"],computed:{reasons(){let t={};for(const a of this.issueGroup.issues)for(const i of a.ignore_reasons)t[i.title]=i;return Object.values(t)},ignoreReason(){const t=this.reasons[0]??{title:"Unknown"};return this.ignoreReasonFilter?this.reasons.find(i=>i.code===this.ignoreReasonFilter)??t:t},color(){return this.ignoreReason.color??"#645DD7"},ignoreReasonCount(){return this.reasons.length},otherIgnoreReasons(){return this.reasons.filter(t=>t.code!==this.ignoreReason.code).map(t=>t.title)}}},ce={class:"flex justify-between align-center gap-8px w-full"},de={class:"flex align-center gap-8px overflow-hidden"},pe={key:0,class:"icon icon-add icon-12px text-purple-accent"},me={class:"ws-pre"};function he(t,a,i,u,d,o){const l=s("BulletPoint"),n=s("BaseParagraph"),h=s("XTooltip"),g=s("BaseStatusLabel"),p=s("DataTableCell");return c(),y(p,null,{default:r(()=>[m("div",ce,[m("div",de,[e(l,{color:o.color},{default:r(()=>[o.ignoreReason.kind==="rule_ignore"?(c(),F("i",pe)):T("",!0)]),_:1},8,["color"]),e(n,{truncate:!0},{default:r(()=>[f(R(o.ignoreReason.title),1)]),_:1})]),o.ignoreReasonCount>1?(c(),y(g,{key:0,size:"compact"},{default:r(()=>[f(R(t.$t("X_OTHERS",o.ignoreReasonCount-1))+" ",1),e(h,null,{default:r(()=>[m("span",me,R(o.otherIgnoreReasons.join(`
`)),1)]),_:1})]),_:1})):T("",!0)])]),_:1})}const ge=w(le,[["render",he]]),_e={components:{IssueGroupTypeColumn:se,IssueGroupNameColumn:oe,IssueGroupLocationColumn:re,IssueGroupActionMenuColumn:ie,IssueGroupSeverityColumn:ne,IssueGroupIgnoreReasonColumn:ge},props:{issueGroup:Object},computed:{active(){return this.$route.query.sidebarIssue===this.issueGroup.id.toString()}}};function fe(t,a,i,u,d,o){const l=s("IssueGroupTypeColumn"),n=s("IssueGroupNameColumn"),h=s("IssueGroupIgnoreReasonColumn"),g=s("IssueGroupSeverityColumn"),p=s("IssueGroupLocationColumn"),b=s("IssueGroupActionMenuColumn");return c(),F(S,null,[e(l,{"issue-group":i.issueGroup,active:o.active},null,8,["issue-group","active"]),e(n,{"issue-group":i.issueGroup},null,8,["issue-group"]),e(h,{"issue-group":i.issueGroup},null,8,["issue-group"]),e(g,{"issue-group":i.issueGroup},null,8,["issue-group"]),e(p,{"issue-group":i.issueGroup},null,8,["issue-group"]),e(b,{"issue-group":i.issueGroup},null,8,["issue-group"])],64)}const Fe=w(_e,[["render",fe]]),Ie={components:{DataTableCell:x,LoadingSkeleton:N},methods:{calculateDynamicWidth(t=90){return`${Math.random()*(t-20)+20}%`}}},ye={class:"flex flex-column gap-4px w-full"};function Se(t,a,i,u,d,o){const l=s("LoadingSkeleton"),n=s("DataTableCell");return c(),F(S,null,[e(n,{spacing:"compact",alignment:"center"},{default:r(()=>[e(l,{height:"16px"})]),_:1}),e(n,null,{default:r(()=>[m("div",ye,[e(l,{height:"18px",width:o.calculateDynamicWidth(50)},null,8,["width"]),e(l,{height:"16px",width:o.calculateDynamicWidth(80)},null,8,["width"])])]),_:1}),e(n,null,{default:r(()=>[e(l,{height:"16px",width:o.calculateDynamicWidth(60)},null,8,["width"])]),_:1}),e(n,null,{default:r(()=>[e(l,{height:"16px"})]),_:1}),e(n,null,{default:r(()=>[e(l,{height:"16px"})]),_:1}),e(n,{spacing:"compact",alignment:"center"},{default:r(()=>[e(l,{height:"16px"})]),_:1})],64)}const Te=w(Ie,[["render",Se]]),we={components:{QueueSidebar:X,InputSearch:O,QueueQuickFilter:K,RefreshButton:Y,DataTable:$,DataTableHeader:ee,DataTableRow:te,IgnoredIssueTableRow:Fe,IgnoredIssueTableRowLoading:Te,IssuesByStatusEmptyState:Z,LoadingSpinner:M,BaseParagraph:L,QueueMultiSelectTypeFilter:J},emits:["onRelatedTypeFiltersChanged"],data(){return{cloud:void 0,searchTerm:I("search",""),attackSurfaceFilter:I("attack_surface_filter",void 0),relatedTypeFilters:I("issue_type_filter",[]),quickFilter:I("filter",void 0),ignoreReasonFilter:this.$route.query.ignore_reason_filter,languageFilter:I("language_filter",void 0),notesFilter:void 0,severityFilter:I("severity_filter",void 0)}},setup(){const t=async(...n)=>{const h=await z(...n),g=h.grouped_issues;for(const p in g)g[p].status="ignored";return h.grouped_issues=g,h},{records:a,isLoadingFirstPage:i,isLoading:u,fetch:d,reset:o,watchElement:l}=E(t,20,n=>n.grouped_issues);return{groupedIssues:a,isLoading:i,isFetchingRecords:u,fetchGroupedIssues:d,resetGroupedIssues:o,watchElement:l}},async mounted(){this.watchElement(this.$refs.tableBottom,{threshold:0,rootMargin:"400px"}),await Promise.all([this.loadGroupedIssues()])},created(){G.on("issueUpdated",this.handleItemUpdated)},beforeUnmount(){G.off("issueUpdated",this.handleItemUpdated)},provide(){return{ignoreReasonFilter:U(()=>this.ignoreReasonFilter)}},computed:{breadcrumbs(){return[{label:"All issues",href:"/queue"},{label:"Ignored issues"}]},showLoadingState(){return this.isLoading&&this.groupedIssues.length===0},showEmptyState(){return!this.showLoadingState&&this.groupedIssues.length===0},isFiltering(){const a=[this.attackSurfaceFilter,this.relatedTypeFilters.length>0,this.quickFilter,this.severityFilter].some(u=>!!u),i=!!this.searchTerm;return a||i},filters(){return{status:"ignored",search_term:this.searchTerm,filter_ignore_reason:this.ignoreReasonFilter,quick_filter:this.quickFilter,filter_attack_surface:this.attackSurfaceFilter,issue_type_filters:this.relatedTypeFilters,filter_language:this.languageFilter,filter_notes:this.notesFilter,filter_severity:this.severityFilter,return_fuzzy_used:!0}}},methods:{async onItemSelected(t){j.replace({path:this.$route.path,query:{...this.$route.query,sidebarIssue:t.id}})},onSearchTermChanged(){this.resetGroupedIssues(this.filters),A({search:this.searchTerm})},onQueueTypeFilterSelected(t){this.relatedTypeFilters=t.relatedTypeFilters||[],this.ignoreReasonFilter=t.ignoreReasonFilter,this.$emit("onRelatedTypeFiltersChanged",this.relatedTypeFilters),this.resetGroupedIssues(this.filters)},onQueueQuickFilterSelected(t){this.quickFilter=t.quickFilter||void 0,this.attackSurfaceFilter=t.attackSurfaceFilter||void 0,this.languageFilter=t.languageFilter||void 0,this.notesFilter=t.notesFilter||void 0,this.severityFilter=t.severityFilter||void 0,this.resetGroupedIssues(this.filters)},async handleItemUpdated(){await this.resetGroupedIssues(this.filters)},async loadGroupedIssues(){await this.fetchGroupedIssues(this.filters)}}},be={class:"flex align-center justify-between mb-16px"},ke={class:"flex gap-8px align-center"},Re={colspan:"6"},Ce={ref:"tableBottom"},Ge={key:0,class:"data-table__bottom"},ve=m("hr",null,null,-1),Le={key:0,class:"flex align-center gap-8px"},xe=m("hr",null,null,-1);function Be(t,a,i,u,d,o){const l=s("InputSearch"),n=s("QueueMultiSelectTypeFilter"),h=s("QueueQuickFilter"),g=s("RefreshButton"),p=s("DataTableHeader"),b=s("IgnoredIssueTableRowLoading"),k=s("DataTableRow"),B=s("IgnoredIssueTableRow"),D=s("IssuesByStatusEmptyState"),Q=s("DataTable"),q=s("LoadingSpinner"),C=s("BaseParagraph"),P=s("QueueSidebar");return c(),F(S,null,[m("div",be,[m("div",ke,[e(l,{modelValue:d.searchTerm,"onUpdate:modelValue":[a[0]||(a[0]=_=>d.searchTerm=_),o.onSearchTermChanged],spacing:"compact"},null,8,["modelValue","onUpdate:modelValue"]),e(n,{onFilterSelected:o.onQueueTypeFilterSelected,"initial-related-type-filter":d.relatedTypeFilters,persistFilterToQueryParams:!0},null,8,["onFilterSelected","initial-related-type-filter"]),e(h,{hideDueSoonOption:!0,hideOutOfSLAOption:!0,showNotesFilter:t.$featureflags.show_notes_filter,onFilterSelected:o.onQueueQuickFilterSelected,initialAttackSurfaceFilter:d.attackSurfaceFilter,initialFilter:d.quickFilter,initialLanguageFilter:d.languageFilter,initialSeverityFilter:d.severityFilter,initialStatusFilter:t.enhancedStatusFilter,persistFilterToQueryParams:!0},null,8,["showNotesFilter","onFilterSelected","initialAttackSurfaceFilter","initialFilter","initialLanguageFilter","initialSeverityFilter","initialStatusFilter"])]),e(g,{onRefresh:a[1]||(a[1]=()=>u.resetGroupedIssues(o.filters)),isLoading:u.isLoading},null,8,["isLoading"])]),e(Q,null,{header:r(()=>[e(p,{width:"48px",alignment:"center"},{default:r(()=>[f("Type")]),_:1}),e(p,{width:"auto"},{default:r(()=>[f("Name")]),_:1}),e(p,{width:"auto"},{default:r(()=>[f("Reason for ignoring")]),_:1}),e(p,{width:"100px",alignment:"center"},{default:r(()=>[f("Severity")]),_:1}),e(p,{width:"auto"},{default:r(()=>[f("Location")]),_:1}),e(p,{width:"48px",alignment:"center"})]),body:r(()=>[u.isLoading?(c(),F(S,{key:0},v(10,_=>e(k,{key:_},{default:r(()=>[e(b)]),_:2},1024)),64)):(c(!0),F(S,{key:1},v(u.groupedIssues,_=>(c(),y(k,{id:_.id,key:_.id,clickable:!0,onClick:W(()=>o.onItemSelected(_),["stop"]),class:H({"pointer-events-none":_.is_blurred})},{default:r(()=>[e(B,{"issue-group":_},null,8,["issue-group"])]),_:2},1032,["id","onClick","class"]))),128)),o.showEmptyState?(c(),y(k,{key:2},{default:r(()=>[m("td",Re,[e(D,{issueCount:u.groupedIssues.length,isLoading:o.showLoadingState,isFiltering:o.isFiltering,status:"ignored"},null,8,["issueCount","isLoading","isFiltering"])])]),_:1})):T("",!0)]),_:1}),m("div",Ce,[!u.isLoading&&!o.showEmptyState?(c(),F("div",Ge,[ve,u.isFetchingRecords?(c(),F("div",Le,[e(q,{color:"#6551F3",backgroundColor:"#E0DCFD"}),e(C,{color:"gray"},{default:r(()=>[f("Hang on, we're fetching more issues for you")]),_:1})])):(c(),y(C,{key:1,color:"gray"},{default:r(()=>[f("We have no more issues to show")]),_:1})),xe])):T("",!0)],512),e(P,{groupedIssues:u.groupedIssues,showIgnoredOnly:!0},null,8,["groupedIssues"])],64)}const Et=w(we,[["render",Be]]);export{Et as default};
