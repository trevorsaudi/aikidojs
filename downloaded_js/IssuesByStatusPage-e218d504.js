import{_ as T,I as b,al as v,B as C,d as B,cq as u,an as h,cs as L,cr as q,dh as E,r,m as O,o as a,w as c,n as l,F as P,cu as G,q as d,k as p,p as U}from"./index-13ff96f4.js";import{u as x}from"./useInfiniteScroll-47c60c9e.js";import{s as V}from"./slaEmptyState-e877fc05.js";import{P as z}from"./PageHeader-46c38a32.js";import{Q as R}from"./QueueTable-de6aabd1.js";import{Q as D}from"./QueueSidebar-47492277.js";import{Q as N}from"./QueueTypeFilter-e6985ed4.js";import{Q as A}from"./QueueQuickFilter-70881bd4.js";import{R as H,I as j}from"./IssuesByStatusEmptyState-4ccc6f81.js";import{S as M}from"./SlaEmptyState-a5a9e243.js";import"./dateFns-a344cb79.js";import"./index-b87db690.js";import"./DataTableCell-51c0104f.js";import"./IssueGroupSeverityColumn-7631c77a.js";import"./ActionMenu-3e4470bf.js";import"./SidebarActionMenu-1bf6804b.js";import"./CreateAutoFixProgressFlow-8111d22c.js";import"./RadioButtonList-1d4cdaad.js";import"./EnableIntegrationModal-48b01f56.js";import"./focusModePreference-150f170e.js";import"./TableListHeader-e50d01d1.js";import"./DataTable-e31a825a.js";import"./BaseRadioInput-a7ac3557.js";import"./BaseLabel-a1c0ca00.js";import"./AIText-891d4f7b.js";import"./InputCheckbox-81cb3ca6.js";import"./BreakSlashes-925eef0e.js";import"./UnignoreIssue-5dff8957.js";import"./CreateTicketModal-c14deeb1.js";import"./ManualInputSearchDropdown-6a7ece3e.js";import"./InputSearchDropdown-02988f6b.js";import"./repoName-872812ed.js";import"./taskTrackerNaming-55adac3e.js";import"./taskTrackerIcon-504ea566.js";import"./autofixable-c6560249.js";import"./autofixSastIssues-779ec5b4.js";import"./lock-files-cdbb050f.js";import"./BaseCodeBlock-cec75629.js";import"./string-814c5ffd.js";import"./ButtonMultiOption-12e505fb.js";import"./transform-c376ec3f.js";import"./linear-efb37b7f.js";import"./arc-12e4470a.js";import"./BaseForm-4c6fa06f.js";import"./XTabs-d492da26.js";import"./BaseCard-471d3203.js";import"./AccordionContainer-09dc0ed4.js";import"./trycatch-83445d5b.js";import"./licenses-6ab38515.js";import"./BaseStatusLabel-0ccd2806.js";import"./DataTableSeverityIndicator-48ffb8dc.js";import"./IssueGroupTypeColumn-03f014b0.js";import"./BracesIcon-0a8568f4.js";import"./BoxIcon-9908469f.js";import"./StackedAvatars-4925baeb.js";import"./ScmSecurity-27bd32ff.js";import"./FilterButton-bb5393a7.js";import"./languages-12749071.js";import"./OverviewEmptyState-c8440b9c.js";import"./GenericIllustration-4aca88e5.js";import"./SnoozedIllustration-a91c1ac9.js";import"./SolvedIllustration-3f250925.js";const J={components:{QueueTable:R,QueueSidebar:D,PageHeader:z,InputSearch:b,QueueTypeFilter:N,QueueQuickFilter:A,RefreshButton:H,IssuesByStatusEmptyState:j,LoadingSpinner:v,BaseParagraph:C,BasePill:B,SlaEmptyState:M},data(){return{cloud:void 0,searchTerm:u("search",""),quickFilter:u("filter",void 0),attackSurfaceFilter:u("attack_surface_filter",void 0),relatedTypeFilter:u("type_filter",void 0),languageFilter:u("language_filter",void 0),severityFilter:u("severity_filter",void 0),totalIssueCount:0,isInitialPageLoad:!0}},setup(){const{records:t,isLoading:i,fetch:n,reset:o,refresh:s,watchElement:e}=x(G,20,m=>m);return{records:t,isLoading:i,isFetchingRecords:i,fetchGroupedIssues:n,resetGroupedIssues:o,refreshGroupedIssues:s,watchElement:e}},async mounted(){await Promise.all([this.loadGroupedIssues(),this.getCountByStatus()]),this.isInitialPageLoad=!1,await this.$nextTick(),this.watchElement(this.$refs.tableBottom,{threshold:0,rootMargin:"400px"})},created(){["closed","snoozed"].includes(this.$route.meta.status)||this.$router.push({name:"notFound"}),h.on("issueUpdated",this.handleItemUpdated)},beforeUnmount(){h.off("issueUpdated",this.handleItemUpdated)},computed:{status(){return this.$route.meta.status},issueName(){const t=this.$route.meta.status;return t==="snoozed"?"Snoozed issues":t==="closed"?"Solved issues":"Issues"},subtitle(){return`${this.totalIssueCount} issues`},breadcrumbs(){return[{label:"All issues",href:"/queue"},{label:this.issueName}]},showClosedOnly(){return this.$route.path=="/issues/closed"},showSnoozedOnly(){return this.$route.path=="/issues/snoozed"},showLoadingState(){return this.isLoading&&this.groupedIssues.length===0},showEmptyState(){return!this.showLoadingState&&this.groupedIssues.length===0},isFiltering(){const i=[this.attackSurfaceFilter,this.relatedTypeFilter,this.quickFilter,this.severityFilter].some(o=>!!o),n=!!this.searchTerm;return i||n},filters(){return{status:this.$route.meta.status,search_term:this.searchTerm,quick_filter:this.quickFilter,issue_type_filter:this.relatedTypeFilter,filter_attack_surface:this.attackSurfaceFilter,filter_language:this.languageFilter,filter_severity:this.severityFilter}},groupedIssues(){let t=this.records??[];for(const i in t)t[i].status=this.$route.meta.status,this.$route.meta.status!=="open"&&(t[i].enhanced_status=this.$route.meta.status);return t},shouldUseSlaEmptyState(){return V(this.quickFilter)}},methods:{async onItemSelected(t){L.replace({path:this.$route.path,query:{...this.$route.query,sidebarIssue:t.id}})},onSearchTermChanged(){this.resetGroupedIssues(this.filters),q({search:this.searchTerm})},onQueueTypeFilterSelected(t){this.relatedTypeFilter=t.relatedTypeFilter,this.resetGroupedIssues(this.filters)},onQueueQuickFilterSelected(t){this.quickFilter=t.quickFilter||void 0,this.attackSurfaceFilter=t.attackSurfaceFilter||void 0,this.languageFilter=t.languageFilter||void 0,this.severityFilter=t.severityFilter||void 0,this.resetGroupedIssues(this.filters)},async handleItemUpdated(){await this.refreshGroupedIssues(this.filters)},async loadGroupedIssues(){await this.fetchGroupedIssues(this.filters)},async getCountByStatus(){const t=await E();this.totalIssueCount=t[this.status]??0}}},K={class:"min-h-22px"},W={class:"page-content"},X={class:"flex align-center justify-between mb-16px"},Y={class:"flex gap-8px align-center"},Z={ref:"tableBottom"};function $(t,i,n,o,s,e){const m=r("BasePill"),f=r("PageHeader"),S=r("InputSearch"),F=r("QueueTypeFilter"),g=r("QueueQuickFilter"),y=r("RefreshButton"),_=r("SlaEmptyState"),I=r("IssuesByStatusEmptyState"),k=r("QueueTable"),w=r("QueueSidebar");return d(),O(P,null,[a(f,{breadcrumbs:e.breadcrumbs,title:e.issueName},{subTitle:c(()=>[l("div",K,[s.isInitialPageLoad?U("",!0):(d(),p(m,{key:0,title:e.subtitle,variation:"green"},null,8,["title"]))])]),_:1},8,["breadcrumbs","title"]),l("div",W,[l("div",X,[l("div",Y,[a(S,{modelValue:s.searchTerm,"onUpdate:modelValue":[i[0]||(i[0]=Q=>s.searchTerm=Q),e.onSearchTermChanged],spacing:"compact"},null,8,["modelValue","onUpdate:modelValue"]),a(F,{onFilterSelected:e.onQueueTypeFilterSelected,persistFilterToQueryParams:!0,"initial-related-type-filter":s.relatedTypeFilter},null,8,["onFilterSelected","initial-related-type-filter"]),a(g,{hideDueSoonOption:e.status=="closed",hideOutOfSLAOption:e.status=="closed",onFilterSelected:e.onQueueQuickFilterSelected,initialAttackSurfaceFilter:s.attackSurfaceFilter,initialLanguageFilter:s.languageFilter,initialFilter:s.quickFilter,initialSeverityFilter:s.severityFilter,initialStatusFilter:t.enhancedStatusFilter,persistFilterToQueryParams:!0},null,8,["hideDueSoonOption","hideOutOfSLAOption","onFilterSelected","initialAttackSurfaceFilter","initialLanguageFilter","initialFilter","initialSeverityFilter","initialStatusFilter"])]),a(y,{onRefresh:e.handleItemUpdated,isLoading:o.isLoading},null,8,["onRefresh","isLoading"])]),a(k,{onItemClicked:e.onItemSelected,groupedIssues:e.groupedIssues,isLoading:e.showLoadingState,showEmptyState:e.showEmptyState,quickFilter:s.quickFilter,showSolvedDate:e.showClosedOnly,onReachContentEnd:i[1]||(i[1]=()=>o.fetchGroupedIssues(e.filters))},{emptyState:c(()=>[e.shouldUseSlaEmptyState?(d(),p(_,{key:0})):(d(),p(I,{key:1,issueCount:e.groupedIssues.length,isLoading:e.showLoadingState,isFiltering:e.isFiltering,status:e.status},null,8,["issueCount","isLoading","isFiltering","status"]))]),bottomContent:c(()=>[l("div",Z,null,512)]),_:1},8,["onItemClicked","groupedIssues","isLoading","showEmptyState","quickFilter","showSolvedDate"]),a(w,{groupedIssues:e.groupedIssues,showClosedOnly:e.showClosedOnly,showSnoozedOnly:e.showSnoozedOnly,filterDueSoon:s.quickFilter==="due_soon",severityFilter:s.severityFilter},null,8,["groupedIssues","showClosedOnly","showSnoozedOnly","filterDueSoon","severityFilter"])])],64)}const lt=T(J,[["render",$]]);export{lt as default};
