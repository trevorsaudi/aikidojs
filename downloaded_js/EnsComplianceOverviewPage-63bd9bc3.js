import{_ as b,H as B,X as x,dv as y,B as H,aV as S,l as d,r as e,m as s,o,w as i,n,k as m,F as p,t as k,q as t,s as E}from"./index-13ff96f4.js";import{d as L}from"./reports-ed4978a9.js";import{P as N}from"./PageHeader-46c38a32.js";import{C as O}from"./CompliancePrintHeader-341b18be.js";import{C as R}from"./ComplianceSection-1226ea47.js";import{P as V}from"./PdfDownloadButton-072addbd.js";import"./AccordionContainer-09dc0ed4.js";import"./DataTable-e31a825a.js";import"./DataTableCell-51c0104f.js";import"./BracesIcon-0a8568f4.js";const X="https://cdn.aikido.dev/assets/icons/flag_spain.png",$={components:{PageHeader:N,BaseHeading:B,XPreloader:x,ProgressBar:y,CompliancePrintHeader:O,ComplianceSection:R,BaseParagraph:H,PdfDownloadButton:V},data(){return{isLoading:!0,overview:{},groupReference:void 0}},provide(){return{filter_team_id:S(()=>this.$teamContext)}},async created(){await d("es")},async beforeUnmount(){await d("en")},async mounted(){await Promise.allSettled([this.loadComplianceOverview()])},watch:{async $teamContext(){this.$globalLoadingIndicator.show();try{await this.loadComplianceOverview()}finally{this.$globalLoadingIndicator.hide()}}},computed:{breadcrumbs(){return[{label:"Reports",href:"/reports"},{label:"ENS compliance"}]},compliance(){const a=this.overview.total_complying_rule_count??0,c=this.overview.total_rule_count??0;return a===0||this.isLoading?0:Math.round(a/c*100)},sections(){return{...this.overview.controls}}},methods:{async loadComplianceOverview(){this.overview=await L({teamId:null}),this.isLoading=!1}}},q={class:"flex gap-32px align-center"},D=n("span",null,[n("img",{src:X,height:"24"})],-1),I={class:"page-content"},F={key:1,class:"flex flex-column gap-12px",id:"ComplianceSectionWrapper"};function T(a,c,M,U,u,r){const _=e("BaseHeading"),g=e("ProgressBar"),h=e("PdfDownloadButton"),f=e("PageHeader"),v=e("XPreloader"),w=e("CompliancePrintHeader"),C=e("ComplianceSection");return t(),s(p,null,[o(f,{breadcrumbs:r.breadcrumbs},{title:i(()=>[n("div",q,[o(_,{as:"h1"},{default:i(()=>[E("Esquema Nacional de Seguridad (ENS) "),D]),_:1}),o(g,{progress:r.compliance},null,8,["progress"])])]),rightContent:i(()=>[o(h,{exportType:"ens"})]),_:1},8,["breadcrumbs"]),n("div",I,[u.isLoading?(t(),m(v,{key:0,class:"absolute-centered",theme:"transparent"})):(t(),s("div",F,[o(w,{title:"Esquema Nacional de Seguridad (ENS)"}),(t(!0),s(p,null,k(r.sections??{},(P,l)=>(t(),m(C,{key:l,section:P,code:l},null,8,["section","code"]))),128))]))])],64)}const ee=b($,[["render",T]]);export{ee as default};
