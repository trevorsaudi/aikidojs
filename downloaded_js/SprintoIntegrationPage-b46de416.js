import{g as T,u as _,s as h}from"./sprinto-1778523f.js";import{_ as f,X as I,f as E,H as y,A as p,Q as b,r as e,k as A,m as o,o as t,w as a,p as v,F as w,q as s,s as r}from"./index-13ff96f4.js";import{P}from"./PageHeader-46c38a32.js";import{S as N}from"./SettingsEmptyState-8e8644cd.js";import{E as V}from"./EmptyUsersIllustration-1a5638d0.js";const k={components:{XPreloader:I,BaseButton:E,SettingsEmptyState:N,EmptyUsersIllustration:V,PageHeader:P,BaseHeading:y},data(){return{activeSprintoIntegration:null,loaded:!1,sendingVulns:!1}},created(){this.init()},computed:{breadcrumbs(){return[{label:"Settings",href:"/settings"},{label:"Integrations",href:"/settings/integrations"},{label:"Sprinto"}]},subtitle(){return this.activeSprintoIntegration?"Active":""},canAlwaysUseSprinto(){return!!this.$featureflags.force_enable_sprinto}},methods:{async init(){this.activeSprintoIntegration=await T(),this.loaded=!0},async addSprintoIntegration(){if(!p.isPayingAndNoProTrial()&&!this.canAlwaysUseSprinto)return this.$modal.show("UpgradeAccountModal",{title:"This integration is available on all paid plans",msg:"Upgrade now to any paid plan to start integrating with your compliancy tool."});await this.$modal.show("SprintoAccessTokenModal"),this.init()},async deactivateSprinto(){await b({headerText:"Sprinto Integration",description:"Do you want to deactivate the Sprinto integration?",buttonSubmitText:"Yes, deactivate"})&&(await _(this.activeSprintoIntegration.id),this.init(),Toast.success({title:this.$t("NOTIFICATIONS.INTEGRATION_DEACTIVATED.TITLE"),description:this.$t("SPRINTO_DEACTIVATED")}))},async sendToSprinto(){if(!p.isPayingAndNoProTrial()&&!this.canAlwaysUseSprinto)return this.$modal.show("UpgradeAccountModal",{title:"This integration is available on all paid plans",msg:"Upgrade now to any paid plan to start integrating with your compliancy tool."});this.sendingVulns=!0;try{await h()}finally{this.sendingVulns=!1}Toast.success({title:this.$t("SUCCESS"),description:"We've successfully sent vulnerabilities to Sprinto"})}}},C={key:0,class:"page-content"},B={key:0},O={key:1};function x(l,U,R,D,n,i){const u=e("XPreloader"),g=e("PageHeader"),m=e("EmptyUsersIllustration"),S=e("SettingsEmptyState"),c=e("BaseHeading"),d=e("BaseButton");return n.loaded?(s(),o(w,{key:1},[t(g,{title:"Sprinto integration",breadcrumbs:i.breadcrumbs,subtitle:i.subtitle},null,8,["breadcrumbs","subtitle"]),n.loaded?(s(),o("div",C,[n.activeSprintoIntegration==null?(s(),o("div",B,[t(S,{title:l.$t("SETTINGS.SPRINTO.OVERVIEW.EMPTY_STATE_TITLE"),description:l.$t("SETTINGS.SPRINTO.OVERVIEW.EMPTY_STATE_DESCRIPTION"),actionLabel:l.$t("SETTINGS.SPRINTO.OVERVIEW.EMPTY_STATE_ACTION_LABEL"),onAction:i.addSprintoIntegration},{default:a(()=>[t(m)]),_:1},8,["title","description","actionLabel","onAction"])])):(s(),o("div",O,[t(c,{as:"h4",class:"flex justify-between mb-8px"},{default:a(()=>[r("Actions")]),_:1}),t(d,{class:"mt-4px",size:"small",onClick:i.sendToSprinto,isLoading:n.sendingVulns,disabled:n.sendingVulns},{default:a(()=>[r("Send vulnerabilities to Sprinto")]),_:1},8,["onClick","isLoading","disabled"]),t(c,{as:"h4",class:"flex justify-between mt-36px mb-8px"},{default:a(()=>[r("Danger zone")]),_:1}),t(d,{class:"mt-4px",variation:"destructive",size:"small",onClick:i.deactivateSprinto},{default:a(()=>[r("Deactivate")]),_:1},8,["onClick"])]))])):v("",!0)],64)):(s(),A(u,{key:0,class:"supercenter",theme:"transparent"}))}const X=f(k,[["render",x]]);export{X as default};
