import{_ as p,M as h,B as f,f as b,V as y,H as _,N as B,fK as V,r,q as k,k as v,w as a,o as i,s as o,n as K}from"./index-13ff96f4.js";const S={emits:["close","saved"],components:{BaseModal:h,BaseParagraph:f,BaseButton:b,InputText:y,BaseHeading:_,BaseSelect:B},props:{id:Number,username:String,registry_name:String},data(){return{publicImageName:"",tag:"",isSaving:!1,registryKind:"docker-hub"}},computed:{isValid(){return!(this.publicImageName.trim()===""||this.tag.trim()==="")},placeholder(){return this.registryKind==="aws-ecr"?"public.ecr.aws/product/imagename":this.registryKind==="github"?"ghcr.io/org/repo/package":"public/imagename"},title(){return this.registryKind==="aws-ecr"?"Public AWS ECR image uri":this.registryKind==="github"?"Public Github package":"Public Docker Hub image identifier"},registryKindOptions(){return[{id:"docker-hub",title:"Docker Hub"},{id:"aws-ecr",title:"AWS ECR"},{id:"github",title:"Github Packages"}]}},methods:{close(){this.$emit("close")},async save(){if(this.isValid){this.isSaving=!0;try{await V(this.publicImageName,this.tag,this.registryKind),this.$toast.success("Successfully added public image"),this.$emit("saved")}finally{this.isSaving=!1}}}}},C={class:"flex flex-column gap-12px"};function P(x,s,N,I,t,e){const c=r("BaseParagraph"),u=r("BaseHeading"),m=r("BaseSelect"),n=r("InputText"),d=r("BaseButton"),g=r("BaseModal");return k(),v(g,{width:600,onClose:e.close},{header:a(()=>[i(c,{color:"gray"},{default:a(()=>[o("Add image")]),_:1})]),content:a(()=>[K("div",C,[i(u,{as:"h3"},{default:a(()=>[o("Add a public Docker Hub image")]),_:1})]),i(m,{class:"flex-1",id:"severity",label:"Registry location",modelValue:t.registryKind,"onUpdate:modelValue":s[0]||(s[0]=l=>t.registryKind=l),options:e.registryKindOptions,placeholder:"Select public registry"},null,8,["modelValue","options"]),i(n,{title:e.title,placeholder:e.placeholder,modelValue:t.publicImageName,"onUpdate:modelValue":s[1]||(s[1]=l=>t.publicImageName=l),modelModifiers:{trim:!0},name:"publicImageName",onEnterKeyPress:e.save},null,8,["title","placeholder","modelValue","onEnterKeyPress"]),i(n,{title:"Tag",placeholder:"latest",modelValue:t.tag,"onUpdate:modelValue":s[2]||(s[2]=l=>t.tag=l),modelModifiers:{trim:!0},name:"tag",onEnterKeyPress:e.save},null,8,["modelValue","onEnterKeyPress"])]),footer:a(()=>[i(d,{onClicked:e.close,variation:"tertiary",class:"ml-auto"},{default:a(()=>[o("Cancel")]),_:1},8,["onClicked"]),i(d,{onClicked:e.save,isLoading:t.isSaving,disabled:!e.isValid},{default:a(()=>[o("Save")]),_:1},8,["onClicked","isLoading","disabled"])]),_:1},8,["onClose"])}const H=p(S,[["render",P]]);export{H as default};
