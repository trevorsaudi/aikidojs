import{a0 as c,_ as l,eT as p,Y as d,b_ as u,b$ as T,r as a,k as G,w as O,q as N,o as C}from"./index-13ff96f4.js";import{C as g}from"./ConnectGroup-e27591ad.js";import{O as m}from"./OnboardingEmptyState-28bd43c0.js";import"./OnboardingProgressIndicator-8fa4a42d.js";async function E(){return(await c.get("/api/scm_integrations/gitlab/listAccessibleGitlabGroups")).data.gitlab_groups}const b={components:{ConnectGroup:g,OnboardingEmptyState:m},data(){return{accessibleGroups:[],isLoading:!0}},async mounted(){this.accessibleGroups=await E(),this.isLoading=!1},computed:{groupOptions(){return this.accessibleGroups.map(e=>({id:e.id,title:e.full_name,description:e.description}))}},methods:{async handleCreateGroup({selectedGroup:e}){const{sys_group_id:n,status:o}=await p(e);if(o=="already_exists"&&this.$user.auth_type!="gitlab"){this.$toast.error({title:this.$t("SOMETHING_WENT_WRONG"),description:"This gitlab already exists in Aikido. You need an invite to join."});return}await d.setGroupContext(n),u(),T(),go("/onboarding/gitlab/connect-repositories")},async handleCreateSample(){go("/onboarding/demo")},handleUseDifferentAccount(){this.$router.replace("/onboarding/gitlab/connect-organization")},goBack(){if(this.$user.auth_type!="gitlab"){this.$router.replace("/onboarding/self-managed/select-onboarding-type");return}this.$router.replace("/onboarding/gitlab/connect-organization")}}};function A(e,n,o,_,i,t){const s=a("OnboardingEmptyState"),r=a("ConnectGroup");return N(),G(r,{title:e.$t("ONBOARDING.GITLAB.CONNECT_GROUP.TITLE"),description:e.$t("ONBOARDING.GITLAB.CONNECT_GROUP.DESCRIPTION"),"select-title":e.$t("ONBOARDING.GITLAB.CONNECT_GROUP.SELECT.TITLE"),"select-description":e.$t("ONBOARDING.GITLAB.CONNECT_GROUP.SELECT.DESCRIPTION"),groups:t.groupOptions,"is-loading":i.isLoading,"number-of-steps":4,"number-of-completed-steps":1,onContinue:t.handleCreateGroup,onBack:t.goBack,icon:"icon-Gitlab"},{emptyState:O(()=>[C(s,{title:e.$t("ONBOARDING.GITLAB.CONNECT_GROUP.EMPTY_STATE.TITLE"),description:e.$t("ONBOARDING.GITLAB.CONNECT_GROUP.EMPTY_STATE.DESCRIPTION"),"primary-cta":e.$t("ONBOARDING.GITLAB.CONNECT_GROUP.EMPTY_STATE.PRIMARY_CTA"),"secondary-cta":e.$t("ONBOARDING.GITLAB.CONNECT_GROUP.EMPTY_STATE.SECONDARY_CTA"),onUseSample:t.handleCreateSample,onUseDifferentAccount:t.handleUseDifferentAccount},null,8,["title","description","primary-cta","secondary-cta","onUseSample","onUseDifferentAccount"])]),_:1},8,["title","description","select-title","select-description","groups","is-loading","onContinue","onBack"])}const B=l(b,[["render",A]]);export{B as default};
