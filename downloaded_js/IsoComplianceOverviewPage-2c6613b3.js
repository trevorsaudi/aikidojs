import{c as B}from"./reports-ed4978a9.js";import{P as F}from"./PageHeader-46c38a32.js";import{_ as O,H as S,X as H,dv as I,B as z,aV as L,r as e,m as s,o,w as r,n as i,k as h,F as c,t as M,p as T,q as a,s as d,S as q,u as _}from"./index-13ff96f4.js";import{A}from"./ActionMenu-3e4470bf.js";import{F as V}from"./FilterButton-bb5393a7.js";import{C as D}from"./ComplianceSection-1226ea47.js";import{C as N}from"./CompliancePrintHeader-341b18be.js";import{P as R}from"./PdfDownloadButton-072addbd.js";import"./AccordionContainer-09dc0ed4.js";import"./DataTable-e31a825a.js";import"./DataTableCell-51c0104f.js";import"./BracesIcon-0a8568f4.js";const X={components:{PageHeader:F,BaseHeading:S,XPreloader:H,ProgressBar:I,ComplianceSection:D,CompliancePrintHeader:N,ActionMenu:A,FilterButton:V,BaseParagraph:z,PdfDownloadButton:R},data(){return{isLoading:!0,overview:{},groupReference:void 0,mode:void 0}},provide(){return{filter_team_id:L(()=>this.$teamContext)}},async mounted(){await Promise.allSettled([this.loadComplianceOverview()])},watch:{async $teamContext(){this.$globalLoadingIndicator.show();try{await this.loadComplianceOverview()}finally{this.$globalLoadingIndicator.hide()}}},computed:{breadcrumbs(){return[{label:"Reports",href:"/reports"},{label:"ISO compliance"}]},compliance(){const t=this.overview.total_complying_rule_count??0,m=this.overview.total_rule_count??0;return t===0||this.isLoading?0:Math.round(t/m*100)},sections(){return this.mode?this.overview[this.mode]??{}:{...this.overview.technological_controls??{},...this.overview.organizational_controls}},filterLabel(){return this.mode==="technological_controls"?"Technological controls":this.mode==="organizational_controls"?"Organizational controls":"Filter controls"},actions(){return[{title:"Controls",action:{label:"Clear filter",onClick:()=>this.mode=void 0},items:[{label:"Technological controls",onClick:()=>this.handleChangeFilter("technological_controls"),active:this.mode==="technological_controls"},{label:"Organizational controls",onClick:()=>this.handleChangeFilter("organizational_controls"),active:this.mode==="organizational_controls"},{label:"People controls",onClick:()=>this.handleChangeFilter("people_controls"),active:this.mode==="people_controls"},{label:"Physical controls",onClick:()=>this.handleChangeFilter("physical_controls"),active:this.mode==="physical_controls"}]}]},emptyControlsMessage(){if(this.mode==="people_controls")return"ISO 27001:2022 requires multiple processes related to the people working in your organization, such as background screening, security training, policies around remote working,.. These requirements are external to the technical scope of Aikido.";if(this.mode==="physical_controls")return"ISO 27001:2022 requires that physical security is monitored. This related to security of offices, data centers, the secure disposal of equipment. These requirements are external to the scope of Aikido."}},methods:{async loadComplianceOverview(){this.overview=await B({teamId:null}),this.isLoading=!1},handleChangeFilter(t){if(this.mode===t){this.mode=void 0;return}this.mode=t}}},E={class:"flex gap-32px align-center"},W={class:"page-content"},j={class:"mb-16px flex align-center gap-12px"},G=i("i",{class:"icon icon-caret_down icon-12px"},null,-1),J={class:"flex flex-column gap-12px",id:"ComplianceSectionWrapper"},K={key:0,class:"flex rounded-8px py-32px px-16px bg-white border-1 border-carbon-20"};function Q(t,m,U,Y,p,n){const g=e("BaseHeading"),f=e("ProgressBar"),v=e("PdfDownloadButton"),C=e("PageHeader"),b=e("XPreloader"),w=e("FilterButton"),y=e("ActionMenu"),x=e("CompliancePrintHeader"),P=e("ComplianceSection"),k=e("BaseParagraph");return a(),s(c,null,[o(C,{breadcrumbs:n.breadcrumbs},{title:r(()=>[i("div",E,[o(g,{as:"h1"},{default:r(()=>[d("ISO 27001:2022 compliance overview")]),_:1}),o(f,{progress:n.compliance},null,8,["progress"])])]),rightContent:r(()=>[o(v,{exportType:"iso_27001_2022"})]),_:1},8,["breadcrumbs"]),i("div",W,[p.isLoading?(a(),h(b,{key:0,class:"absolute-centered",theme:"transparent"})):(a(),s(c,{key:1},[i("div",j,[o(y,{sections:n.actions,placement:"bottom-start"},{trigger:r(l=>[o(w,{onClick:l.toggle,class:q({"filter-button--active":!!p.mode})},{default:r(()=>[d(_(n.filterLabel)+" ",1),G]),_:2},1032,["onClick","class"])]),_:1},8,["sections"])]),i("div",J,[o(x,{title:"ISO 27001:2022 compliance overview"}),(a(!0),s(c,null,M(n.sections??{},(l,u)=>(a(),h(P,{key:u,section:l,code:u},null,8,["section","code"]))),128)),n.emptyControlsMessage?(a(),s("div",K,[o(k,{size:"medium"},{default:r(()=>[d(_(n.emptyControlsMessage),1)]),_:1})])):T("",!0)])],64))])],64)}const de=O(X,[["render",Q]]);export{de as default};
