import{D as L,a as $}from"./DataTable-e31a825a.js";import{a as T,D as b}from"./DataTableCell-51c0104f.js";import{O as k}from"./OverviewEmptyState-c8440b9c.js";import{G as B}from"./GenericIllustration-4aca88e5.js";import{_ as h,a1 as E,r as s,q as c,k as d,w as t,o as e,n as y,u as f,S as A,B as G,a3 as g,s as i,m as w,t as v,F as D,p as x}from"./index-13ff96f4.js";const H={components:{DataTableRow:T,DataTableCell:b,LoadingSkeleton:E}};function N(u,n,l,p,q,o){const a=s("LoadingSkeleton"),r=s("DataTableCell"),_=s("DataTableRow");return c(),d(_,null,{default:t(()=>[e(r,null,{default:t(()=>[e(a,{height:"16px"})]),_:1}),e(r,null,{default:t(()=>[e(a,{height:"16px"})]),_:1}),e(r,null,{default:t(()=>[e(a,{height:"16px"})]),_:1}),e(r,null,{default:t(()=>[e(a,{height:"16px"})]),_:1}),e(r,{spacing:"compact",alignment:"center"},{default:t(()=>[e(a,{height:"16px"})]),_:1})]),_:1})}const P=h(H,[["render",N]]),j={props:{status:String},components:{DataTableCell:b},computed:{statusLabel(){switch(this.status){case"open":return"Requested";case"approved":return"Approved";case"rejected":return"Rejected";default:return this.status}},statusClass(){return this.status==="open"?"text-surface-orange-100 bg-surface-orange-10p":this.status==="approved"?"text-surface-green-100":this.status==="rejected"?"text-surface-red-100":"text-carbon-100"}}};function V(u,n,l,p,q,o){const a=s("DataTableCell");return c(),d(a,{class:A(o.statusClass),alignment:"center"},{default:t(()=>[y("span",null,f(o.statusLabel),1)]),_:1},8,["class"])}const F=h(j,[["render",V]]),I={props:{request:Object},components:{DataTableRow:T,DataTableCell:b,RequestStatusColumn:F,BaseParagraph:G},computed:{detailPageUrl(){return`/reports/audit-reports/external/requests/${this.request.id}`},timestamp(){return g.fromUnix(this.request.requested_at).format(g.SHORT_DATE_FORMAT)}}};function U(u,n,l,p,q,o){const a=s("BaseParagraph"),r=s("DataTableCell"),_=s("RequestStatusColumn"),R=s("DataTableRow");return c(),d(R,{clickable:!0,href:o.detailPageUrl},{default:t(()=>[e(r,null,{default:t(()=>[e(a,null,{default:t(()=>[i(f(l.request.requester_company_name),1)]),_:1})]),_:1}),e(r,null,{default:t(()=>[e(a,null,{default:t(()=>[i(f(l.request.requester_name),1)]),_:1})]),_:1}),e(_,{status:l.request.status},null,8,["status"]),e(r,null,{default:t(()=>[e(a,null,{default:t(()=>[i(f(o.timestamp),1)]),_:1})]),_:1})]),_:1},8,["href"])}const z=h(I,[["render",U]]),M={props:{requests:{type:Array,default:()=>[]},isLoading:Boolean},components:{DataTable:L,DataTableHeader:$,RequestsOverviewTableRowLoading:P,RequestsOverviewTableRow:z,DataTableRow:T,OverviewEmptyState:k,GenericIllustration:B},computed:{sortedRequests(){return[...this.sortedOpenRequests,...this.sortedHandledRequests]},sortedOpenRequests(){const u=this.requests.filter(n=>n==="open");return this.sortRequestsByTimestamp(u,"requested_at")},sortedHandledRequests(){const u=this.requests.filter(n=>n!=="open");return this.sortRequestsByTimestamp(u,"requested_at")},showEmptyState(){return this.isLoading===!1&&this.requests.length===0}},methods:{sortRequestsByTimestamp(u,n){return u.sort((l,p)=>p[n]-l[n])},handleGenerateReport(){this.$router.push("/reports/audit-reports/external/create")}}},W={colspan:"4"};function J(u,n,l,p,q,o){const a=s("DataTableHeader"),r=s("RequestsOverviewTableRowLoading"),_=s("RequestsOverviewTableRow"),R=s("GenericIllustration"),C=s("OverviewEmptyState"),O=s("DataTableRow"),S=s("DataTable");return c(),d(S,null,{header:t(()=>[e(a,{width:"auto"},{default:t(()=>[i("Company")]),_:1}),e(a,{width:"auto"},{default:t(()=>[i("Name")]),_:1}),e(a,{width:"100px",alignment:"center"},{default:t(()=>[i("Status")]),_:1}),e(a,{width:"155px"},{default:t(()=>[i("Requested on")]),_:1})]),body:t(()=>[l.isLoading?(c(),w(D,{key:0},v(5,m=>e(r,{key:m})),64)):x("",!0),(c(!0),w(D,null,v(o.sortedRequests,m=>(c(),d(_,{key:m.id,request:m},null,8,["request"]))),128)),o.showEmptyState?(c(),d(O,{key:1},{default:t(()=>[y("td",W,[e(C,{title:"There are currently no requests",description:"We currently have not received any requests for an external audit log for your account.",variation:"empty",actionLabel:"Create a report",onOnAction:o.handleGenerateReport},{default:t(()=>[e(R)]),_:1},8,["onOnAction"])])]),_:1})):x("",!0)]),_:1})}const ee=h(M,[["render",J]]);export{ee as default};
