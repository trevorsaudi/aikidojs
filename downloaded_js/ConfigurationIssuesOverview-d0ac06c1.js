import{_ as T,r as o,q as r,m as f,o as t,w as n,aa as $,k as p,p as A,F as I,B as N,e as O,an as C,bf as H,n as h,s as c,t as L,u as k,ai as M}from"./index-13ff96f4.js";import{D as R,a as x}from"./DataTable-e31a825a.js";import{a as E,D as G}from"./DataTableCell-51c0104f.js";import{P as U}from"./PageHeader-46c38a32.js";import{A as V}from"./ActionMenu-3e4470bf.js";import S from"./IgnoreConfigurationIssueModal-91f8a4b9.js";import"./configurationIssues-06890829.js";const z={props:{issue:{type:Object}},components:{ActionMenu:V,IgnoreConfigurationIssueModal:S},data(){return{showIgnoreConfigurationIssueModal:!1}},computed:{actions(){return[{title:this.$t("REPOSITORY_ACTION_MENU.TITLE"),items:[{label:"Ignore issue",onClick:this.handleOpenIgnoreConfigurationIssueModal,icon:"icon-hidden"}]}]}},methods:{handleOpenIgnoreConfigurationIssueModal(){this.showIgnoreConfigurationIssueModal=!0},handleCloseIgnoreConfigurationIssueModal(){this.showIgnoreConfigurationIssueModal=!1}}};function F(e,a,i,w,d,s){const g=o("ActionMenu"),_=o("IgnoreConfigurationIssueModal");return r(),f(I,null,[t(g,{sections:s.actions,placement:"bottom-end"},{trigger:n(u=>[$(e.$slots,"trigger",{toggle:u.toggle})]),_:3},8,["sections"]),d.showIgnoreConfigurationIssueModal?(r(),p(_,{key:0,issue:i.issue,onCancel:s.handleCloseIgnoreConfigurationIssueModal,onConfirm:s.handleCloseIgnoreConfigurationIssueModal},null,8,["issue","onCancel","onConfirm"])):A("",!0)],64)}const X=T(z,[["render",F]]),j={components:{DataTable:R,DataTableHeader:x,DataTableRow:E,DataTableCell:G,BaseParagraph:N,PageHeader:U,BaseIconButton:O,ConfigurationIssueActionMenu:X},data(){return{isLoading:!0,issues:[]}},created(){C.on("configurationIssueIgnored",this.handleGetConfigurationIssues)},async mounted(){await this.handleGetConfigurationIssues(),this.isLoading=!1},beforeUnmount(){C.off("configurationIssueIgnored",this.handleGetConfigurationIssues)},computed:{breadcrumbs(){return[{label:"Notifications"},{label:"Configuration issues"}]},title(){return"Configuration issues"},subtitle(){return`${this.issues.length} open issues`}},methods:{async handleGetConfigurationIssues(){this.issues=await H()},getTargetUrl(e){var a,i;if(e.kind==="container_analysis_disabled")return"/settings/container-image-registry";if(e.kind==="scm_disconnected")return"/onboarding";if(e.kind==="domain_not_accessible")return`/domain/${e.domain_id}`;if(e.kind==="registry_credentials_invalid")return`/settings/container-image-registry?editRegistry=${e.cloud_registry_id}`;if(e.kind==="self_managed_org_credentials_invalid"){if(((a=this.$group)==null?void 0:a.scm_type)=="gitlab_server")return"/onboarding/gitlab-server/update-server";if(((i=this.$group)==null?void 0:i.scm_type)=="azure_devops")return"/onboarding/azure/update-server"}return e.repo_id&&e.repo_id>0?`/repositories/${e.repo_id}`:`/clouds/${e.cloud_id}`}}},q={class:"page-content"};function Y(e,a,i,w,d,s){const g=o("XPreloader"),_=o("PageHeader"),u=o("DataTableHeader"),b=o("BaseParagraph"),m=o("DataTableCell"),y=o("BaseIconButton"),D=o("ConfigurationIssueActionMenu"),B=o("DataTableRow"),v=o("DataTable");return d.isLoading?(r(),p(g,{key:0,class:"supercenter",theme:"transparent"})):(r(),f(I,{key:1},[t(_,{breadcrumbs:s.breadcrumbs,title:s.title,subtitle:s.subtitle},null,8,["breadcrumbs","title","subtitle"]),h("div",q,[t(v,null,{header:n(()=>[t(u,{width:"auto"},{default:n(()=>[c("Location")]),_:1}),t(u,{width:"auto",alignment:"center"},{default:n(()=>[c("Issue")]),_:1}),t(u,{width:"48px",alignment:"center"})]),body:n(()=>[(r(!0),f(I,null,L(d.issues,l=>(r(),p(B,{key:l.id,clickable:!0,onClick:M(()=>e.$router.push(s.getTargetUrl(l)),["stop"])},{default:n(()=>[t(m,null,{default:n(()=>[t(b,null,{default:n(()=>[c(k(l.location),1)]),_:2},1024)]),_:2},1024),t(m,null,{default:n(()=>[t(b,null,{default:n(()=>[c(k(l.title),1)]),_:2},1024)]),_:2},1024),t(m,{spacing:"compact",alignment:"center"},{default:n(()=>[h("div",{class:"data-table__row__action-container",onClick:a[0]||(a[0]=M(()=>e.$refs.trigger.click(),["stop"])),ref_for:!0,ref:"trigger"},[t(D,{issue:l},{trigger:n(P=>[t(y,{onClicked:P.toggle,icon:"icon-actions",ref_for:!0,ref:"trigger",class:"data-table__row__action"},null,8,["onClicked"])]),_:2},1032,["issue"])],512)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})])],64))}const ne=T(j,[["render",Y]]);export{ne as default};
