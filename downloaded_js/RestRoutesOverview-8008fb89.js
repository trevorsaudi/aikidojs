import{_ as L,B as D,a2 as S,r as t,q as s,k as T,w as o,o as e,s as c,u as R,a1 as y,al as $,I as k,dz as x,m,p as N,n as _,F as b,dI as E,t as I}from"./index-13ff96f4.js";import{u as F}from"./useInfiniteScroll-47c60c9e.js";import{D as P,a as M}from"./DataTable-e31a825a.js";import{B as U}from"./BaseCallout-aea0aba4.js";import{a as v,D as O}from"./DataTableCell-51c0104f.js";const V={props:{route:Object},components:{BaseParagraph:D,DataTableRow:v,DataTableCell:O,XTooltip:S},computed:{},methods:{}};function H(a,n,l,h,d,f){const i=t("BaseParagraph"),u=t("DataTableCell"),p=t("XTooltip"),g=t("DataTableRow");return s(),T(g,null,{default:o(()=>[e(u,null,{default:o(()=>[e(i,null,{default:o(()=>[c(R(l.route.method),1)]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(i,{truncate:""},{default:o(()=>[c(R(l.route.route),1),e(p,null,{default:o(()=>[c(R(l.route.route),1)]),_:1})]),_:1})]),_:1})]),_:1})}const K=L(V,[["render",H]]),W={components:{DataTableCell:O,DataTableRow:v,LoadingSkeleton:y}};function X(a,n,l,h,d,f){const i=t("LoadingSkeleton"),u=t("DataTableCell"),p=t("DataTableRow");return s(),T(p,null,{default:o(()=>[e(u,null,{default:o(()=>[e(i,{height:"16px"})]),_:1}),e(u,null,{default:o(()=>[e(i,{height:"16px"})]),_:1})]),_:1})}const j=L(W,[["render",X]]),q={props:{shouldShowReAuthBanner:{type:Boolean,default:!1},shouldShowWhiteListIpBanner:{type:Boolean,default:!1}},components:{BaseParagraph:D,DataTable:P,DataTableHeader:M,LoadingSpinner:$,RestRoutesOverviewTableRow:K,RestRoutesOverviewTableRowLoading:j,InputSearch:k,BaseCallout:U},data(){return{isLoading:!0,domain:null,search:"",filter:{}}},setup(){const{records:a,fetch:n,reset:l,watchElement:h,hasFetchedAllRecords:d}=F(E,30,f=>f.routes);return{routes:a,resetRoutes:l,fetchRoutes:n,watchElement:h,hasFetchedAllRoutes:d}},async mounted(){await Promise.allSettled([this.getRestRoutes(),this.getDomain()]),this.isLoading=!1,await this.$nextTick(),this.watchElement(this.$refs.tableBottom,{threshold:0,rootMargin:"400px"})},computed:{domainId(){return this.$route.params.domainId}},methods:{async getRestRoutes(){await this.fetchRoutes({domainId:this.domainId,...this.filter})},async getDomain(){this.domain=await x(this.domainId)},handleChangeFilters(a){this.filter={...this.filter,...a},this.resetRoutes({domainId:this.domainId,...this.filter})}}},z={key:0,class:"mb-24px"},G={key:1,class:"mb-24px"},J={class:"flex flex-column gap-16px"},Q={class:"flex gap-8px"},Y={ref:"tableBottom"},Z={class:"data-table__bottom"},ee=_("hr",null,null,-1),te={key:0,class:"flex align-center gap-8px"},oe=_("hr",null,null,-1);function ae(a,n,l,h,d,f){const i=t("BaseCallout"),u=t("InputSearch"),p=t("DataTableHeader"),g=t("RestRoutesOverviewTableRowLoading"),A=t("RestRoutesOverviewTableRow"),C=t("DataTable"),B=t("LoadingSpinner"),w=t("BaseParagraph");return s(),m(b,null,[l.shouldShowWhiteListIpBanner?(s(),m("div",z,[e(i,{title:a.$t("DOMAIN.AKTO.CALLOUT.WHITELIST_IP.TITLE"),description:a.$t("DOMAIN.AKTO.CALLOUT.WHITELIST_IP.DESC"),actionLabel:a.$t("DOMAIN.AKTO.CALLOUT.WHITELIST_IP.ACTION"),onAction:n[0]||(n[0]=r=>a.$emit("whitelistIp")),variation:"danger"},null,8,["title","description","actionLabel"])])):l.shouldShowReAuthBanner?(s(),m("div",G,[e(i,{title:a.$t("DOMAIN.AKTO.CALLOUT.TITLE"),description:a.$t("DOMAIN.AKTO.CALLOUT.DESC"),actionLabel:a.$t("DOMAIN.AKTO.CALLOUT.ACTION"),onAction:n[1]||(n[1]=r=>a.$emit("authenticate")),variation:"danger"},null,8,["title","description","actionLabel"])])):N("",!0),_("div",J,[_("div",Q,[e(u,{modelValue:d.filter.search,"onUpdate:modelValue":[n[2]||(n[2]=r=>d.filter.search=r),f.handleChangeFilters],spacing:"compact",disableDebounce:!0},null,8,["modelValue","onUpdate:modelValue"])]),e(C,null,{header:o(()=>[e(p,{width:"100px"},{default:o(()=>[c("Method")]),_:1}),e(p,{width:"auto"},{default:o(()=>[c("Route")]),_:1})]),body:o(()=>[d.isLoading?(s(),m(b,{key:0},I(5,r=>e(g,{key:r})),64)):(s(!0),m(b,{key:1},I(h.routes,r=>(s(),T(A,{key:r.id,route:r},null,8,["route"]))),128))]),_:1}),_("div",Y,[_("div",Z,[ee,h.hasFetchedAllRoutes?(s(),T(w,{key:1,color:"gray"},{default:o(()=>[c("We have no more routes to show")]),_:1})):(s(),m("div",te,[e(B,{color:"#6551F3",backgroundColor:"#E0DCFD"}),e(w,{color:"gray"},{default:o(()=>[c("Hang on, we're fetching more routes for you")]),_:1})])),oe])],512)])],64)}const de=L(q,[["render",ae]]);export{de as default};
