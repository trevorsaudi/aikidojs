import{_ as L,M as V,f as R,B as T,H as D,r as u,q as l,k as v,w as a,o as s,s as F,n as c,bt as K,N as q,an as A,Z as P,cr as M,m as o,S as _,u as f,p as h,F as U,t as Q,ai as I}from"./index-13ff96f4.js";import{F as z}from"./FilterButton-bb5393a7.js";import{L as O}from"./languages-12749071.js";const $={components:{BaseModal:V,BaseButton:R,BaseParagraph:T,BaseHeading:D},emits:["cancel"],methods:{async handleConfigureSla(){this.$emit("cancel"),this.$router.push("/settings/sla")}}},H={class:"flex flex-column gap-12px"};function W(e,t,d,E,r,i){const C=u("BaseParagraph"),y=u("BaseHeading"),m=u("BaseButton"),g=u("BaseModal");return l(),v(g,{width:600,onClose:t[1]||(t[1]=k=>e.$emit("cancel"))},{header:a(()=>[s(C,{color:"gray"},{default:a(()=>[F(" SLAs not configured ")]),_:1})]),content:a(()=>[c("div",H,[s(y,{as:"h3"},{default:a(()=>[F(" You did not yet configure your SLA settings ")]),_:1}),s(C,{loose:!0,size:"medium"},{default:a(()=>[F(" This functionality can only be used when you configured your SLA settings from the settings overview. ")]),_:1})])]),footer:a(()=>[s(m,{onClicked:t[0]||(t[0]=k=>e.$emit("cancel")),variation:"plain",class:"ml-auto"},{default:a(()=>[F(" Cancel ")]),_:1}),s(m,{onClicked:i.handleConfigureSla,variation:"primary"},{default:a(()=>[F(" Configure SLAs ")]),_:1},8,["onClicked"])]),_:1})}const G=L($,[["render",W]]),j={components:{BaseParagraph:T,BasePopover:K,BaseSelect:q,FilterButton:z,SlaSettingsNotConfiguredModal:G},emits:["filterSelected"],props:{includeQuickFixFilter:{type:Boolean,default:!1},initialFilter:{type:String,default:void 0},initialIssueIdFilter:{type:String},initialTeamIdFilter:{type:String},initialAttackSurfaceFilter:{type:String,default:void 0},initialLanguageFilter:{type:String,default:"all"},initialSeverityFilter:{type:String,default:"all"},initialStatusFilter:{type:String,default:"all"},showTeamFilter:{type:Boolean,default:!1},hideLanguageFilter:{type:Boolean,default:!1},hideAttackSurfaceFilters:{type:Boolean,default:!1},hideOutOfSLAOption:{type:Boolean,default:!1},hideDueSoonOption:{type:Boolean,default:!1},hideCriticalOption:{type:Boolean,default:!1},hideNewOption:{type:Boolean,default:!1},hideIgnoreOption:{type:Boolean,default:!1},hideClosedOption:{type:Boolean,default:!1},showNotesFilter:{type:Boolean,default:!1},showStatusFilter:{type:Boolean,default:!1},includeAutoignoreInStatusFilter:{type:Boolean,default:!1},showSnoozedFilter:{type:Boolean,default:!1},persistFilterToQueryParams:{type:Boolean,default:!1}},data(){return{quickFilter:this.initialFilter||void 0,attackSurfaceFilter:this.initialAttackSurfaceFilter,languageFilter:this.initialLanguageFilter,showSlaSettingsNotConfigured:!1,issueIdFilter:this.initialIssueIdFilter,notesFilter:"all",severityOptions:[{id:"all",title:"All Severities"},{id:"critical",title:"Critical"},{id:"high",title:"High"},{id:"medium",title:"Medium"},{id:"low",title:"Low"}],selectedSeverity:this.initialSeverityFilter,selectedStatus:this.initialStatusFilter}},async mounted(){this.initialFilter=="critical"&&(this.selectedSeverity="critical",this.quickFilter=void 0),A.on("setFilter",this.handleSetExternalFilter)},beforeUnmount(){A.off("setFilter",this.handleSetExternalFilter)},computed:{filter(){let e=[];if(this.quickFilter&&e.push(this.$t(`QUEUE.QUICKFILTER.${this.quickFilter}`)),this.attackSurfaceFilter&&e.push(this.$t(`QUEUE.FILTER.LABEL_SHORTHAND.${this.attackSurfaceFilter}`).toLowerCase()),this.languageFilter&&this.languageFilter!="all"&&e.push(O[this.languageFilter]),this.issueIdFilter&&e.push(this.$t("QUEUE.QUICK_FILTER.ISSUE_IDS",this.issueIdFilter.length)),this.notesFilter=="exclude_notes"&&e.push("issues without notes"),this.notesFilter=="include_notes"&&e.push("issues with notes"),this.selectedSeverity&&this.selectedSeverity!="all"&&e.push(this.selectedSeverity),this.selectedStatus&&this.selectedStatus!="all"){const t=this.statusOptions.find(d=>d.id==this.selectedStatus);e.push(t.title.toLowerCase())}if(e.length!==0)return e.join(", ")},sections(){const e=[{title:this.$t("QUEUE.QUICK_FILTER.TITLE"),action:{label:this.$t("QUEUE.QUICK_FILTER.CLEAR_ALL"),onClick:()=>this.handleClearAll()},items:[...this.includeQuickFixFilter?[{label:this.$t("QUEUE.QUICK_FILTER.ACTIONS.QUICK_FIXES"),onClick:()=>this.handleClickQuickFilter("quick_fixes"),icon:"icon-starter",active:this.isQuickFilterActive("quick_fixes")}]:[],{hidden:this.hideDueSoonOption,label:this.$t("QUEUE.QUICK_FILTER.ACTIONS.DUE_SOON_ISSUES"),onClick:()=>this.handleClickQuickFilter("due_soon"),icon:"icon-due-soon",active:this.isQuickFilterActive("due_soon")},{hidden:this.hideOutOfSLAOption,label:this.$t("QUEUE.QUICK_FILTER.ACTIONS.OUT_OF_SLA_ISSUES"),onClick:()=>this.handleClickQuickFilter("out_of_sla"),icon:"icon-high_risk",active:this.isQuickFilterActive("out_of_sla")},{hidden:this.hideNewOption,label:this.$t("QUEUE.QUICK_FILTER.ACTIONS.NEW_ISSUES"),onClick:()=>this.handleClickQuickFilter("new"),icon:"icon-recent",active:this.isQuickFilterActive("new")},{hidden:this.shouldHideIgnoreFilterOption,label:this.$t("QUEUE.QUICK_FILTER.ACTIONS.IGNORED_ISSUES"),onClick:()=>this.handleClickQuickFilter("ignored"),icon:"icon-hidden",active:this.isQuickFilterActive("ignored")},{hidden:!this.showSnoozedFilter,label:this.$t("QUEUE.QUICK_FILTER.ACTIONS.SNOOZED_ISSUES"),onClick:()=>this.handleClickQuickFilter("snoozed"),icon:"icon-snooze",active:this.isQuickFilterActive("snoozed")},{hidden:this.shouldHideClosedFilterOption,label:this.$t("QUEUE.QUICK_FILTER.ACTIONS.CLOSED_ISSUES"),onClick:()=>this.handleClickQuickFilter("closed"),icon:"icon-shield_check",active:this.isQuickFilterActive("closed")}].filter(t=>!t.hidden)}];return this.hideAttackSurfaceFilters||e.push({items:[{label:this.$t("QUEUE.QUICK_FILTER.ACTIONS.FRONTEND"),onClick:()=>this.handleClickAttackSurfaceFilter("frontend"),icon:"icon-frontend",active:this.isAttackSurfaceFilterActive("frontend")},{label:this.$t("QUEUE.QUICK_FILTER.ACTIONS.BACKEND"),onClick:()=>this.handleClickAttackSurfaceFilter("backend"),icon:"icon-backend",active:this.isAttackSurfaceFilterActive("backend")}]}),e},languageSelectValues(){return[{id:"all",title:"All Languages"},...Object.entries(O).map(([e,t])=>({id:e,title:t}))]},notesFilterSelectValues(){return[{id:"all",title:"No Filter"},{id:"include_notes",title:"Issues with notes"},{id:"exclude_notes",title:"Issues without notes"}]},hasFilter(){return!!this.quickFilter||!!this.attackSurfaceFilter||!!this.languageFilter&&this.languageFilter!="all"||!!this.selectedSeverity&&this.selectedSeverity!="all"||!!this.selectedStatus&&this.selectedStatus!="all"||!!this.notesFilter&&this.notesFilter!="all"},shouldHideIgnoreFilterOption(){return!!(this.hideIgnoreOption||!["repositoryDetailIssues","feed","containerDetail","domainDetailPage","cloudDetailIssues","virtualMachineDetailPage"].includes(this.$route.name))},shouldHideClosedFilterOption(){return!!(this.hideClosedOption||!["repositoryDetailIssues","containerDetail","domainDetailPage","domainDetailIssueList","cloudDetailIssues","virtualMachineDetailPage"].includes(this.$route.name))},actionMenuWidthClass(){return this.showNotesFilter||!this.hideCriticalOption?"w-320px":"w-224px"},selectFilterWidthClass(){return this.showNotesFilter||!this.hideCriticalOption?"max-w-150px":"max-w-110px"},statusOptions(){const e=[{id:"all",title:"All Statuses"},{id:"pull_request_open",title:"PR Open"},{id:"todo",title:"To Do"},{id:"new",title:"New"}];return P.data.issueTracker&&(e.push({id:"task_open",title:"Task Open"}),e.push({id:"task_closed",title:"Task Closed"})),this.includeAutoignoreInStatusFilter&&e.push({id:"auto-ignored",title:"Auto Ignored"}),e}},methods:{isQuickFilterActive(e){return this.quickFilter===e},isAttackSurfaceFilterActive(e){return this.attackSurfaceFilter===e},emitSelectedFilter(){const e=this.selectedStatus!="all"?this.selectedStatus:void 0,t=this.languageFilter!="all"?this.languageFilter:void 0,d=this.selectedSeverity!="all"?this.selectedSeverity:void 0,E=this.notesFilter!="all"?this.notesFilter:void 0,r={quickFilter:this.quickFilter,attackSurfaceFilter:this.attackSurfaceFilter,languageFilter:t,issueIdFilter:this.issueIdFilter,notesFilter:E,severityFilter:d,enhancedStatusFilter:e};this.$emit("filterSelected",r),this.persistFilterToQueryParams&&M(r)},reset(){this.quickFilter=void 0,this.attackSurfaceFilter=void 0,this.languageFilter="all",this.issueIdFilter=void 0,this.notesFilter="all",this.selectedSeverity="all",this.selectedStatus="all"},handleClearAll(){this.reset(),this.emitSelectedFilter()},handleClickQuickFilter(e){this.quickFilter=e,this.emitSelectedFilter()},handleClickAttackSurfaceFilter(e){this.attackSurfaceFilter=e,this.emitSelectedFilter()},handleChangeLanguage(e){this.languageFilter=e,this.emitSelectedFilter()},handleChangeNotesFilter(e){this.notesFilter=e,this.emitSelectedFilter()},handleChangeSeverityFilter(e){this.selectedSeverity=e,this.emitSelectedFilter()},handleChangeStatusFilter(e){this.selectedStatus=e,this.emitSelectedFilter()},handleSetExternalFilter(e){e.quickFilter&&this.handleClickQuickFilter(e.quickFilter)}}},Y=c("i",{class:"icon icon-filter icon-12px"},null,-1),Z={key:0},X={class:"text-primary-aik-100"},J={key:0,class:"action-menu__section-title"},ee=["disabled","onClick"],te={class:"action-menu__section-items"},ie=["onClick","disabled"],le={key:1,class:"divider"},se={key:0,class:"action-menu__section"},ae={class:"flex gap-16px align-center px-16px py-8px justify-between"},ne={key:1,class:"action-menu__section"},oe={class:"flex gap-16px align-center px-16px py-8px justify-between"},re={key:2,class:"action-menu__section"},ce={class:"flex gap-16px align-center px-16px py-8px justify-between"},ue={key:3,class:"action-menu__section"},de={class:"flex gap-16px align-center px-16px py-8px justify-between"};function he(e,t,d,E,r,i){const C=u("i18n-t"),y=u("FilterButton"),m=u("BaseIcon"),g=u("BaseParagraph"),k=u("BaseSelect"),B=u("BasePopover"),N=u("SlaSettingsNotConfiguredModal");return l(),o(U,null,[s(B,{placement:"bottom-start",popoverClass:"z-index-left-nav-1"},{trigger:a(S=>[s(y,{onClick:S.toggle,class:_({"filter-button--active":i.hasFilter})},{default:a(()=>[Y,i.filter?(l(),o("span",Z,[s(C,{keypath:"QUEUE.QUICK_FILTER.LABEL",scope:"global"},{filter:a(()=>[c("span",X,f(i.filter),1)]),_:1})])):h("",!0)]),_:2},1032,["onClick","class"])]),content:a(S=>[c("div",{class:_(["action-menu",[i.actionMenuWidthClass]])},[(l(!0),o(U,null,Q(i.sections,(n,w)=>(l(),o("div",{key:w,class:"action-menu__section"},[n.title?(l(),o("div",J,[c("p",null,f(n.title),1),n.action?(l(),o("button",{key:0,disabled:n.action.disabled,class:"button-brand button--as-link",onClick:n.action.onClick},f(n.action.label),9,ee)):h("",!0)])):h("",!0),c("ul",te,[(l(!0),o(U,null,Q(n.items,(p,x)=>(l(),o("li",{key:x,class:_(["action-menu__section__item",[p.active&&"action-menu__section__item--active",p.destructive&&"action-menu__section__item--destructive"]])},[c("button",{onClick:b=>p.onClick(b),disabled:p.disabled,class:"action-menu__section__item-button"},[p.icon?(l(),v(m,{key:0,icon:p.icon,size:14,class:"mr-12px h-14px"},null,8,["icon"])):h("",!0),F(" "+f(p.label),1)],8,ie)],2))),128))]),d.hideLanguageFilter?h("",!0):(l(),o("hr",le))]))),128)),d.hideLanguageFilter?h("",!0):(l(),o("div",se,[c("div",ae,[s(g,{size:"small"},{default:a(()=>[F(f(e.$t("QUEUE.QUICK_FILTER.ACTIONS.LANGUAGE")),1)]),_:1}),s(k,{class:_(["w-full",[i.selectFilterWidthClass]]),id:"language",modelValue:r.languageFilter,"onUpdate:modelValue":n=>{i.handleChangeLanguage(n),S.close()},options:i.languageSelectValues,onClick:t[0]||(t[0]=I(()=>{},["stop"])),placeholder:"Select Language"},null,8,["class","modelValue","onUpdate:modelValue","options"])])])),d.hideCriticalOption?h("",!0):(l(),o("div",ne,[c("div",oe,[s(g,{size:"small"},{default:a(()=>[F(f(e.$t("QUEUE.QUICK_FILTER.ACTIONS.SEVERITY")),1)]),_:1}),s(k,{class:_(["w-full",[i.selectFilterWidthClass]]),id:"language",modelValue:r.selectedSeverity,"onUpdate:modelValue":n=>{i.handleChangeSeverityFilter(n),S.close()},options:r.severityOptions,onClick:t[1]||(t[1]=I(()=>{},["stop"])),placeholder:"Select Severity"},null,8,["class","modelValue","onUpdate:modelValue","options"])])])),d.showStatusFilter?(l(),o("div",re,[c("div",ce,[s(g,{size:"small"},{default:a(()=>[F(f(e.$t("QUEUE.QUICK_FILTER.ACTIONS.STATUS")),1)]),_:1}),s(k,{class:_(["w-full",[i.selectFilterWidthClass]]),id:"statusFilter",modelValue:r.selectedStatus,"onUpdate:modelValue":n=>{i.handleChangeStatusFilter(n),S.close()},options:i.statusOptions,onClick:t[2]||(t[2]=I(()=>{},["stop"])),placeholder:"Select Status"},null,8,["class","modelValue","onUpdate:modelValue","options"])])])):h("",!0),d.showNotesFilter?(l(),o("div",ue,[c("div",de,[s(g,{size:"small"},{default:a(()=>[F(f(e.$t("QUEUE.QUICK_FILTER.ACTIONS.NOTES")),1)]),_:1}),s(k,{class:_(["w-full",[i.selectFilterWidthClass]]),id:"language",modelValue:r.notesFilter,"onUpdate:modelValue":n=>{i.handleChangeNotesFilter(n),S.close()},options:i.notesFilterSelectValues,onClick:t[3]||(t[3]=I(()=>{},["stop"])),placeholder:"Select Notes Option"},null,8,["class","modelValue","onUpdate:modelValue","options"])])])):h("",!0)],2)]),_:1}),r.showSlaSettingsNotConfigured?(l(),v(N,{key:0,onCancel:t[4]||(t[4]=S=>r.showSlaSettingsNotConfigured=!1)})):h("",!0)],64)}const pe=L(j,[["render",he]]);export{pe as Q};
