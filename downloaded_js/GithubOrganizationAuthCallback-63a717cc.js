import{bU as l,i as e,bV as b,A as p,bW as h,Y as r,bX as n,bY as g,bZ as d,b_ as G,b$ as _}from"./index-13ff96f4.js";(async function(){const{setup_action:i,installation_id:a,code:u}=l();if(i=="request"){Toast.success({title:e.global.t("SUCCESS"),description:e.global.t("GITHUB_ORG_ACCESS_REQUESTED")}),go({path:"/queue",replace:!0});return}if(!["update","install"].includes(i))throw new Error("Unknown setup_action");const{sys_group_id:t,status:s}=await b({github_installation_id:a,code:u});if(s=="already_exists"){if(p.data.user.auth_type!="github"){if(!(await h()).some(o=>o.id==t)){Toast.error({title:e.global.t("SOMETHING_WENT_WRONG"),description:"This GitHub workspace already exists in Aikido. Try logging in with your GitHub account. Otherwise, you'll need an invite to join.",duration:7*1e3}),go("/");return}await r.setGroupContext(t);try{await n()}catch{}go({path:"/onboarding/github/connect-repositories",replace:!0});return}await g()}if(await r.setGroupContext(t),s=="already_exists")try{await d({github_installation_id:a}),await n()}catch{go("/");return}G(),_(),go({path:"/onboarding/github/connect-repositories",replace:!0})})();
