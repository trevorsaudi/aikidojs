import{_ as C,M as T,B as g,H as x,f as v,V as b,X as w,g as E,r as a,q as r,k as d,w as e,o,s,m as L,n as m,p as V}from"./index-13ff96f4.js";import{h as y,a as A,d as M}from"./gitlabServer-f1adde30.js";const N={components:{BaseModal:T,BaseParagraph:g,BaseHeading:x,BaseButton:v,InputText:b,XPreloader:w,BaseLink:E},data(){return{accessToken:"",hasAccessToken:"",error:"",isLoading:!1}},async mounted(){await this.init()},methods:{async init(){this.isLoading=!0;const c=await y();this.hasAccessToken=c.has_write_token,this.isLoading=!1},handleCloseModal(){this.$emit("close")},async handleConfirm(){if(this.accessToken.trim()==""){this.error="Access token can not be empty";return}await A(this.accessToken),this.$emit("saved")},async handleDeleteToken(){await M(),this.$emit("delete")}}},S={key:1,class:"flex flex-column"},P={class:"flex flex-column gap-8px mt-24px"},G=m("br",null,null,-1);function R(c,n,H,I,t,l){const u=a("BaseParagraph"),_=a("XPreloader"),p=a("BaseHeading"),h=a("InputText"),f=a("BaseLink"),i=a("BaseButton"),B=a("BaseModal");return r(),d(B,{width:600,onClose:l.handleCloseModal,allowBackgroundClose:!1},{header:e(()=>[o(u,{color:"gray"},{default:e(()=>[s("Update personal access token")]),_:1})]),content:e(()=>[t.isLoading?(r(),d(_,{key:0,class:"supercenter",size:"medium"})):(r(),L("div",S,[o(p,{as:"h3"},{default:e(()=>[s("Gitlab self managed personal access token")]),_:1}),m("div",P,[o(h,{modelValue:t.accessToken,"onUpdate:modelValue":[n[0]||(n[0]=k=>t.accessToken=k),n[1]||(n[1]=k=>t.error="")],name:"personal_access_token",placeholder:"accesstoken123bd",required:!0,error:t.error,title:c.$t("GITLAB_SERVER.CONNECT_SERVER.CONNECT.ACCESS_TOKEN.LABEL")},null,8,["modelValue","error","title"]),o(u,{color:"subdued"},{default:e(()=>[G,s(" Read our documentation on "),o(f,{href:"https://help.aikido.dev/en/articles/8644580-enable-aikido-autofix-for-gitlab-self-managed",target:"_blank"},{default:e(()=>[s(" how to activate Aikido autofix for Gitlab Self Managed ")]),_:1})]),_:1})])]))]),footer:e(()=>[t.hasAccessToken?(r(),d(i,{key:0,onClicked:l.handleDeleteToken,variation:"destructive"},{default:e(()=>[s("Delete")]),_:1},8,["onClicked"])):V("",!0),o(i,{onClicked:l.handleCloseModal,variation:"plain",class:"ml-auto"},{default:e(()=>[s("Cancel")]),_:1},8,["onClicked"]),o(i,{onClicked:l.handleConfirm},{default:e(()=>[s("Save")]),_:1},8,["onClicked"])]),_:1},8,["onClose"])}const O=C(N,[["render",R]]);export{O as default};
