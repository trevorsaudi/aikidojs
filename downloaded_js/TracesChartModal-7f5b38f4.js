import{_ as _e,r as O,q as b,m as S,n as p,u as C,F as J,t as ee,k as K,p as Ne,B as Tt,o as q,w as N,s as I,S as be,cX as ir,bn as lr,d as cr,ga as ur,gb as fr,a3 as lt,U as mr,gc as dr}from"./index-13ff96f4.js";import{b as vr}from"./dateFns-a344cb79.js";import{F as pr,f as hr}from"./tracesParser-98d7d961.js";import{X as xr}from"./XTabs-d492da26.js";import{B as gr}from"./BaseCodeBlock-cec75629.js";import"./index-b87db690.js";const yr={props:{entry:{type:Object,required:!0}}},br={class:"entry"},wr={class:"codeblock"},_r={key:0,class:"branch"};function Tr(r,e,n,u,l,i){const o=O("TreeNode",!0);return b(),S("div",br,[p("span",wr,C(n.entry.title),1),n.entry.children&&n.entry.children.length>0?(b(),S("div",_r,[(b(!0),S(J,null,ee(n.entry.children,v=>(b(),K(o,{key:v.title,entry:v},null,8,["entry"]))),128))])):Ne("",!0)])}const Sr=_e(yr,[["render",Tr]]),Cr="bg-highlighted",Ar={components:{BaseParagraph:Tt},props:{entry:{type:Object,required:!0},issueLines:Array},computed:{uri(){return this.entry.functionUri},highlightLine(){return this.entry.calledAtLine+1},snippets(){return this.entry.region.snippet.chunks},hasChildren(){return this.entry.children&&this.entry.children.length>0}},methods:{getSnippetLines(r){const e=r.lines.split(`
`);return e[e.length-1].trim()===""&&e.pop(),e},getBgColorClass(r){let e=!1;if(this.issueLines!==void 0){const[n,u]=this.issueLines;e=n<=r&&r<=u}else r===this.highlightLine&&(e=!0);return e?Cr:null}}},Er={class:"entry"},kr=p("div",{class:"node-link"},null,-1),Br=p("span",{class:"text-carbon-60"},"at line ",-1),Lr={class:"text--semi-bold"},Mr={class:"codeblock ws-pre max-w-600px scroll-x-auto text-10px p-0"},zr={class:"table"},Pr={class:"tr"},Fr={class:"td p-4px bg-carbon-40 user-select-none text-center"},Dr={key:0,class:"tr"},Nr=p("div",{class:"td bg-carbon-20 h-24px"},null,-1),Ir=p("div",{class:"td bg-carbon-40 h-24px"},null,-1),Or=[Nr,Ir],Zr={key:0,class:"branch"};function Rr(r,e,n,u,l,i){const o=O("BaseParagraph"),v=O("TracesTreeNode",!0);return b(),S("div",Er,[kr,p("span",{class:be(["box",{"has-children":i.hasChildren}])},[q(o,{class:"panzoom-pause cursor-text"},{default:N(()=>[p("div",null,[I(C(i.uri)+" ",1),Br,p("span",Lr,C(n.entry.region.startLine),1)]),p("div",null,[p("div",Mr,[p("div",zr,[(b(!0),S(J,null,ee(i.snippets,(h,g)=>(b(),S(J,null,[(b(!0),S(J,null,ee(i.getSnippetLines(h),(d,f)=>(b(),S("div",Pr,[p("div",Fr,C(f+h.startLine),1),p("div",{class:be(["td px-8px",i.getBgColorClass(f+h.startLine)])},C(d),3)]))),256)),g!=i.snippets.length-1?(b(),S("div",Dr,Or)):Ne("",!0)],64))),256))])])])]),_:1})],2),i.hasChildren?(b(),S("div",Zr,[(b(!0),S(J,null,ee(n.entry.children,h=>(b(),K(v,{key:h.uri,entry:h},null,8,["entry"]))),128))])):Ne("",!0)])}const qr=_e(Ar,[["render",Rr]]);var Te={exports:{}};Te.exports=St;Te.exports.addWheelListener=St;Te.exports.removeWheelListener=Vr;function St(r,e,n){r.addEventListener("wheel",e,n)}function Vr(r,e,n){r.removeEventListener("wheel",e,n)}var Ur=Te.exports,Se={exports:{}},Wr=4,jr=.001,Yr=1e-7,Hr=10,ie=11,xe=1/(ie-1),Jr=typeof Float32Array=="function";function Ct(r,e){return 1-3*e+3*r}function At(r,e){return 3*e-6*r}function Et(r){return 3*r}function we(r,e,n){return((Ct(e,n)*r+At(e,n))*r+Et(e))*r}function kt(r,e,n){return 3*Ct(e,n)*r*r+2*At(e,n)*r+Et(e)}function Kr(r,e,n,u,l){var i,o,v=0;do o=e+(n-e)/2,i=we(o,u,l)-r,i>0?n=o:e=o;while(Math.abs(i)>Yr&&++v<Hr);return o}function Xr(r,e,n,u){for(var l=0;l<Wr;++l){var i=kt(e,n,u);if(i===0)return e;var o=we(e,n,u)-r;e-=o/i}return e}function Gr(r){return r}var Qr=function(e,n,u,l){if(!(0<=e&&e<=1&&0<=u&&u<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&u===l)return Gr;for(var i=Jr?new Float32Array(ie):new Array(ie),o=0;o<ie;++o)i[o]=we(o*xe,e,u);function v(h){for(var g=0,d=1,f=ie-1;d!==f&&i[d]<=h;++d)g+=xe;--d;var y=(h-i[d])/(i[d+1]-i[d]),m=g+y*xe,E=kt(m,e,u);return E>=jr?Xr(h,m,e,u):E===0?m:Kr(h,g,g+xe,e,u)}return function(g){return g===0?0:g===1?1:we(v(g),n,l)}},se=Qr,ct={ease:se(.25,.1,.25,1),easeIn:se(.42,0,1,1),easeOut:se(0,0,.58,1),easeInOut:se(.42,0,.58,1),linear:se(0,0,1,1)};Se.exports=$r;Se.exports.makeAggregateRaf=Bt;Se.exports.sharedScheduler=Bt();function $r(r,e,n){var u=Object.create(null),l=Object.create(null);n=n||{};var i=typeof n.easing=="function"?n.easing:ct[n.easing];i||(n.easing&&console.warn("Unknown easing function in amator: "+n.easing),i=ct.ease);var o=typeof n.step=="function"?n.step:ut,v=typeof n.done=="function"?n.done:ut,h=en(n.scheduler),g=Object.keys(e);g.forEach(function(T){u[T]=r[T],l[T]=e[T]-r[T]});var d=typeof n.duration=="number"?n.duration:400,f=Math.max(1,d*.06),y,m=0;return y=h.next(M),{cancel:E};function E(){h.cancel(y),y=0}function M(){var T=i(m/f);m+=1,z(T),m<=f?(y=h.next(M),o(r)):(y=0,setTimeout(function(){v(r)},0))}function z(T){g.forEach(function(Z){r[Z]=l[Z]*T+u[Z]})}}function ut(){}function en(r){if(!r){var e=typeof window<"u"&&window.requestAnimationFrame;return e?tn():rn()}if(typeof r.next!="function")throw new Error("Scheduler is supposed to have next(cb) function");if(typeof r.cancel!="function")throw new Error("Scheduler is supposed to have cancel(handle) function");return r}function tn(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function rn(){return{next:function(r){return setTimeout(r,1e3/60)},cancel:function(r){return clearTimeout(r)}}}function Bt(){var r=new Set,e=new Set,n=0;return{next:l,cancel:l,clearAll:u};function u(){r.clear(),e.clear(),cancelAnimationFrame(n),n=0}function l(v){e.add(v),i()}function i(){n||(n=requestAnimationFrame(o))}function o(){n=0;var v=e;e=r,r=v,r.forEach(function(h){h()}),r.clear()}}var nn=Se.exports,on=function(e){sn(e);var n=an(e);return e.on=n.on,e.off=n.off,e.fire=n.fire,e};function an(r){var e=Object.create(null);return{on:function(n,u,l){if(typeof u!="function")throw new Error("callback is expected to be a function");var i=e[n];return i||(i=e[n]=[]),i.push({callback:u,ctx:l}),r},off:function(n,u){var l=typeof n>"u";if(l)return e=Object.create(null),r;if(e[n]){var i=typeof u!="function";if(i)delete e[n];else for(var o=e[n],v=0;v<o.length;++v)o[v].callback===u&&o.splice(v,1)}return r},fire:function(n){var u=e[n];if(!u)return r;var l;arguments.length>1&&(l=Array.prototype.splice.call(arguments,1));for(var i=0;i<u.length;++i){var o=u[i];o.callback.apply(o.ctx,l)}return r}}}function sn(r){if(!r)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(r.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}var ln=cn;function cn(r,e,n){typeof n!="object"&&(n={});var u=typeof n.minVelocity=="number"?n.minVelocity:5,l=typeof n.amplitude=="number"?n.amplitude:.25,i=typeof n.cancelAnimationFrame=="function"?n.cancelAnimationFrame:un(),o=typeof n.requestAnimationFrame=="function"?n.requestAnimationFrame:fn(),v,h,g=342,d,f,y,m,E,M,z,T;return{start:W,stop:le,cancel:Z};function Z(){i(d),i(T)}function W(){v=r(),m=z=f=E=0,h=new Date,i(d),i(T),d=o(re)}function re(){var F=Date.now(),U=F-h;h=F;var B=r(),L=B.x-v.x,j=B.y-v.y;v=B;var k=1e3/(1+U);f=.8*L*k+.2*f,E=.8*j*k+.2*E,d=o(re)}function le(){i(d),i(T);var F=r();y=F.x,M=F.y,h=Date.now(),(f<-u||f>u)&&(m=l*f,y+=m),(E<-u||E>u)&&(z=l*E,M+=z),T=o(V)}function V(){var F=Date.now()-h,U=!1,B=0,L=0;m&&(B=-m*Math.exp(-F/g),B>.5||B<-.5?U=!0:B=m=0),z&&(L=-z*Math.exp(-F/g),L>.5||L<-.5?U=!0:L=z=0),U&&(e(y+B,M+L),T=o(V))}}function un(){return typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearTimeout}function fn(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(r){return setTimeout(r,16)}}var mn=dn;function dn(r){if(r)return{capture:mt,release:mt};var e,n,u,l=!1;return{capture:i,release:o};function i(v){l=!0,n=window.document.onselectstart,u=window.document.ondragstart,window.document.onselectstart=ft,e=v,e.ondragstart=ft}function o(){l&&(l=!1,window.document.onselectstart=n,e&&(e.ondragstart=u))}}function ft(r){return r.stopPropagation(),!1}function mt(){}var Pe,dt;function vn(){if(dt)return Pe;dt=1,Pe=r;function r(){this.x=0,this.y=0,this.scale=1}return Pe}var ge={exports:{}},vt;function pn(){if(vt)return ge.exports;vt=1,ge.exports=r,ge.exports.canAttach=e;function r(n,u){if(!e(n))throw new Error("svg element is required for svg.panzoom to work");var l=n.ownerSVGElement;if(!l)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");u.disableKeyboardInteraction||l.setAttribute("tabindex",0);var i={getBBox:v,getScreenCTM:h,getOwner:o,applyTransform:d,initTransform:g};return i;function o(){return l}function v(){var f=n.getBBox();return{left:f.x,top:f.y,width:f.width,height:f.height}}function h(){var f=l.getCTM();return f||l.getScreenCTM()}function g(f){var y=n.getCTM();y===null&&(y=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix()),f.x=y.e,f.y=y.f,f.scale=y.a,l.removeAttributeNS(null,"viewBox")}function d(f){n.setAttribute("transform","matrix("+f.scale+" 0 0 "+f.scale+" "+f.x+" "+f.y+")")}}function e(n){return n&&n.ownerSVGElement&&n.getCTM}return ge.exports}var ye={exports:{}},pt;function hn(){if(pt)return ye.exports;pt=1,ye.exports=r,ye.exports.canAttach=e;function r(n,u){var l=e(n);if(!l)throw new Error("panzoom requires DOM element to be attached to the DOM tree");var i=n.parentElement;n.scrollTop=0,u.disableKeyboardInteraction||i.setAttribute("tabindex",0);var o={getBBox:h,getOwner:v,applyTransform:g};return o;function v(){return i}function h(){return{left:0,top:0,width:n.clientWidth,height:n.clientHeight}}function g(d){n.style.transformOrigin="0 0 0",n.style.transform="matrix("+d.scale+", 0, 0, "+d.scale+", "+d.x+", "+d.y+")"}}function e(n){return n&&n.parentElement&&n.style}return ye.exports}var ht=Ur,Fe=nn,xn=on,gn=ln,Lt=mn,yn=Lt(),bn=Lt(!0),wn=vn(),xt=pn(),gt=hn(),_n=1,Tn=1.75,yt=300,bt=200,Sn=Mt;function Mt(r,e){e=e||{};var n=e.controller;if(n||(xt.canAttach(r)?n=xt(r,e):gt.canAttach(r)&&(n=gt(r,e))),!n)throw new Error("Cannot create panzoom for the current type of dom element");var u=n.getOwner(),l={x:0,y:0},i=!1,o=new wn;n.initTransform&&n.initTransform(o);var v=typeof e.filterKey=="function"?e.filterKey:te,h=typeof e.pinchSpeed=="number"?e.pinchSpeed:1,g=e.bounds,d=typeof e.maxZoom=="number"?e.maxZoom:Number.POSITIVE_INFINITY,f=typeof e.minZoom=="number"?e.minZoom:0,y=typeof e.boundsPadding=="number"?e.boundsPadding:.05,m=typeof e.zoomDoubleClickSpeed=="number"?e.zoomDoubleClickSpeed:Tn,E=e.beforeWheel||te,M=e.beforeMouseDown||te,z=typeof e.zoomSpeed=="number"?e.zoomSpeed:_n,T=wt(e.transformOrigin),Z=e.enableTextSelection?bn:yn;Cn(g),e.autocenter&&Nt();var W,re=0,le=0,V=0,F=null,U=new Date,B,L=!1,j=!1,k,P,Ce,Ae,Ee,D;"smoothScroll"in e&&!e.smoothScroll?D=An():D=gn(Yt,Gt,e.smoothScroll);var ke,ne,ce,ue=!1;Ue();var fe={dispose:Qt,moveBy:X,moveTo:Be,smoothMoveTo:Xt,centerOn:Kt,zoomTo:pe,zoomAbs:me,smoothZoom:ve,smoothZoomAbs:ar,showRectangle:Dt,pause:zt,resume:Pt,isPaused:Ft,getTransform:It,getMinZoom:Ot,setMinZoom:Zt,getMaxZoom:Rt,setMaxZoom:qt,getTransformOrigin:Vt,setTransformOrigin:Ut,getZoomSpeed:Wt,setZoomSpeed:jt};xn(fe);var Ie=typeof e.initialX=="number"?e.initialX:o.x,Oe=typeof e.initialY=="number"?e.initialY:o.y,Ze=typeof e.initialZoom=="number"?e.initialZoom:o.scale;return(Ie!=o.x||Oe!=o.y||Ze!=o.scale)&&me(Ie,Oe,Ze),fe;function zt(){We(),ue=!0}function Pt(){ue&&(Ue(),ue=!1)}function Ft(){return ue}function Dt(t){var a=u.getBoundingClientRect(),s=Y(a.width,a.height),c=t.right-t.left,x=t.bottom-t.top;if(!Number.isFinite(c)||!Number.isFinite(x))throw new Error("Invalid rectangle");var w=s.x/c,_=s.y/x,A=Math.min(w,_);o.x=-(t.left+c/2)*A+s.x/2,o.y=-(t.top+x/2)*A+s.y/2,o.scale=A}function Y(t,a){if(n.getScreenCTM){var s=n.getScreenCTM(),c=s.a,x=s.d,w=s.e,_=s.f;l.x=t*c-w,l.y=a*x-_}else l.x=t,l.y=a;return l}function Nt(){var t,a,s=0,c=0,x=qe();if(x)s=x.left,c=x.top,t=x.right-x.left,a=x.bottom-x.top;else{var w=u.getBoundingClientRect();t=w.width,a=w.height}var _=n.getBBox();if(!(_.width===0||_.height===0)){var A=a/_.height,Q=t/_.width,H=Math.min(Q,A);o.x=-(_.left+_.width/2)*H+t/2+s,o.y=-(_.top+_.height/2)*H+a/2+c,o.scale=H}}function It(){return o}function Ot(){return f}function Zt(t){f=t}function Rt(){return d}function qt(t){d=t}function Vt(){return T}function Ut(t){T=wt(t)}function Wt(){return z}function jt(t){if(!Number.isFinite(t))throw new Error("Zoom speed should be a number");z=t}function Yt(){return{x:o.x,y:o.y}}function Be(t,a){o.x=t,o.y=a,Le(),G("pan"),Me()}function Re(t,a){Be(o.x+t,o.y+a)}function Le(){var t=qe();if(t){var a=!1,s=Ht(),c=t.left-s.right;return c>0&&(o.x+=c,a=!0),c=t.right-s.left,c<0&&(o.x+=c,a=!0),c=t.top-s.bottom,c>0&&(o.y+=c,a=!0),c=t.bottom-s.top,c<0&&(o.y+=c,a=!0),a}}function qe(){if(g){if(typeof g=="boolean"){var t=u.getBoundingClientRect(),a=t.width,s=t.height;return{left:a*y,top:s*y,right:a*(1-y),bottom:s*(1-y)}}return g}}function Ht(){var t=n.getBBox(),a=Jt(t.left,t.top);return{left:a.x,top:a.y,right:t.width*o.scale+a.x,bottom:t.height*o.scale+a.y}}function Jt(t,a){return{x:t*o.scale+o.x,y:a*o.scale+o.y}}function Me(){i=!0,W=window.requestAnimationFrame($t)}function Ve(t,a,s){if(De(t)||De(a)||De(s))throw new Error("zoom requires valid numbers");var c=o.scale*s;if(c<f){if(o.scale===f)return;s=f/o.scale}if(c>d){if(o.scale===d)return;s=d/o.scale}var x=Y(t,a);if(o.x=x.x-s*(x.x-o.x),o.y=x.y-s*(x.y-o.y),g&&y===1&&f===1)o.scale*=s,Le();else{var w=Le();w||(o.scale*=s)}G("zoom"),Me()}function me(t,a,s){var c=s/o.scale;Ve(t,a,c)}function Kt(t){var a=t.ownerSVGElement;if(!a)throw new Error("ui element is required to be within the scene");var s=t.getBoundingClientRect(),c=s.left+s.width/2,x=s.top+s.height/2,w=a.getBoundingClientRect(),_=w.width/2-c,A=w.height/2-x;X(_,A,!0)}function Xt(t,a){X(t-o.x,a-o.y,!0)}function X(t,a,s){if(!s)return Re(t,a);ke&&ke.cancel();var c={x:0,y:0},x={x:t,y:a},w=0,_=0;ke=Fe(c,x,{step:function(A){Re(A.x-w,A.y-_),w=A.x,_=A.y}})}function Gt(t,a){he(),Be(t,a)}function Qt(){We()}function Ue(){u.addEventListener("mousedown",Qe,{passive:!1}),u.addEventListener("dblclick",Ge,{passive:!1}),u.addEventListener("touchstart",Ye,{passive:!1}),u.addEventListener("keydown",je,{passive:!1}),ht.addWheelListener(u,nt,{passive:!1}),Me()}function We(){ht.removeWheelListener(u,nt),u.removeEventListener("mousedown",Qe),u.removeEventListener("keydown",je),u.removeEventListener("dblclick",Ge),u.removeEventListener("touchstart",Ye),W&&(window.cancelAnimationFrame(W),W=0),D.cancel(),tt(),rt(),Z.release(),ze()}function $t(){i&&er()}function er(){i=!1,n.applyTransform(o),G("transform"),W=0}function je(t){var a=0,s=0,c=0;if(t.keyCode===38?s=1:t.keyCode===40?s=-1:t.keyCode===37?a=1:t.keyCode===39?a=-1:t.keyCode===189||t.keyCode===109?c=1:(t.keyCode===187||t.keyCode===107)&&(c=-1),!v(t,a,s,c)){if(a||s){t.preventDefault(),t.stopPropagation();var x=u.getBoundingClientRect(),w=Math.min(x.width,x.height),_=.05,A=w*_*a,Q=w*_*s;X(A,Q)}if(c){var H=ot(c*100),w=T?ae():tr();pe(w.x,w.y,H)}}}function tr(){var t=u.getBoundingClientRect();return{x:t.width/2,y:t.height/2}}function Ye(t){if(rr(t),oe(),t.touches.length===1)return or(t,t.touches[0]);t.touches.length===2&&(Ee=Xe(t.touches[0],t.touches[1]),ce=!0,He())}function rr(t){e.onTouch&&!e.onTouch(t)||(t.stopPropagation(),t.preventDefault())}function nr(t){oe(),!(e.onDoubleClick&&!e.onDoubleClick(t))&&(t.preventDefault(),t.stopPropagation())}function or(t){le=new Date;var a=t.touches[0],s=R(a);B=s;var c=Y(s.x,s.y);k=c.x,P=c.y,Ce=k,Ae=P,D.cancel(),He()}function He(){L||(L=!0,document.addEventListener("touchmove",Je),document.addEventListener("touchend",de),document.addEventListener("touchcancel",de))}function Je(t){if(t.touches.length===1){t.stopPropagation();var a=t.touches[0],s=R(a),c=Y(s.x,s.y),x=c.x-k,w=c.y-P;x!==0&&w!==0&&at(),k=c.x,P=c.y,X(x,w)}else if(t.touches.length===2){ce=!0;var _=t.touches[0],A=t.touches[1],Q=Xe(_,A),H=1+(Q/Ee-1)*h,st=R(_),it=R(A);if(k=(st.x+it.x)/2,P=(st.y+it.y)/2,T){var s=ae();k=s.x,P=s.y}pe(k,P,H),Ee=Q,t.stopPropagation(),t.preventDefault()}}function oe(){V&&(clearTimeout(V),V=0)}function Ke(t){if(e.onClick){oe();var a=k-Ce,s=P-Ae,c=Math.sqrt(a*a+s*s);c>5||(V=setTimeout(function(){V=0,e.onClick(t)},yt))}}function de(t){if(oe(),t.touches.length>0){var a=R(t.touches[0]),s=Y(a.x,a.y);k=s.x,P=s.y}else{var c=new Date;if(c-re<yt)if(T){var a=ae();ve(a.x,a.y,m)}else ve(B.x,B.y,m);else c-le<bt&&Ke(t);re=c,ze(),rt()}}function Xe(t,a){var s=t.clientX-a.clientX,c=t.clientY-a.clientY;return Math.sqrt(s*s+c*c)}function Ge(t){nr(t);var a=R(t);T&&(a=ae()),ve(a.x,a.y,m)}function Qe(t){if(oe(),!M(t)){if(F=t,U=new Date,L)return t.stopPropagation(),!1;var a=t.button===1&&window.event!==null||t.button===0;if(a){D.cancel();var s=R(t),c=Y(s.x,s.y);return Ce=k=c.x,Ae=P=c.y,document.addEventListener("mousemove",$e),document.addEventListener("mouseup",et),Z.capture(t.target||t.srcElement),!1}}}function $e(t){if(!L){at();var a=R(t),s=Y(a.x,a.y),c=s.x-k,x=s.y-P;k=s.x,P=s.y,X(c,x)}}function et(){var t=new Date;t-U<bt&&Ke(F),Z.release(),ze(),tt()}function tt(){document.removeEventListener("mousemove",$e),document.removeEventListener("mouseup",et),j=!1}function rt(){document.removeEventListener("touchmove",Je),document.removeEventListener("touchend",de),document.removeEventListener("touchcancel",de),j=!1,ce=!1,L=!1}function nt(t){if(!E(t)){D.cancel();var a=t.deltaY;t.deltaMode>0&&(a*=100);var s=ot(a);if(s!==1){var c=T?ae():R(t);pe(c.x,c.y,s),t.preventDefault()}}}function R(t){var a,s,c=u.getBoundingClientRect();return a=t.clientX-c.left,s=t.clientY-c.top,{x:a,y:s}}function ve(t,a,s){var c=o.scale,x={scale:c},w={scale:s*c};D.cancel(),he(),ne=Fe(x,w,{step:function(_){me(t,a,_.scale)},done:sr})}function ar(t,a,s){var c=o.scale,x={scale:c},w={scale:s};D.cancel(),he(),ne=Fe(x,w,{step:function(_){me(t,a,_.scale)}})}function ae(){var t=u.getBoundingClientRect();return{x:t.width*T.x,y:t.height*T.y}}function pe(t,a,s){return D.cancel(),he(),Ve(t,a,s)}function he(){ne&&(ne.cancel(),ne=null)}function ot(t){var a=Math.sign(t),s=Math.min(.25,Math.abs(z*t/128));return 1-a*s}function at(){j||(G("panstart"),j=!0,D.start())}function ze(){j&&(ce||D.stop(),G("panend"))}function sr(){G("zoomend")}function G(t){fe.fire(t,fe)}}function wt(r){if(r){if(typeof r=="object")return(!$(r.x)||!$(r.y))&&_t(r),r;_t()}}function _t(r){throw console.error(r),new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join(`
`))}function te(){}function Cn(r){var e=typeof r;if(!(e==="undefined"||e==="boolean")){var n=$(r.left)&&$(r.top)&&$(r.bottom)&&$(r.right);if(!n)throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}}function $(r){return Number.isFinite(r)}function De(r){return Number.isNaN?Number.isNaN(r):r!==r}function An(){return{start:te,stop:te,cancel:te}}function En(){if(typeof document>"u")return;var r=document.getElementsByTagName("script");if(!r)return;for(var e,n=0;n<r.length;++n){var u=r[n];if(u.src&&u.src.match(/\bpanzoom(\.min)?\.js/)){e=u;break}}if(!e)return;var l=e.getAttribute("query");if(!l)return;var i=e.getAttribute("name")||"pz",o=Date.now();v();function v(){var d=document.querySelector(l);if(!d){var f=Date.now(),y=f-o;if(y<2e3){setTimeout(v,100);return}console.error("Cannot find the panzoom element",i);return}var m=h(e);console.log(m),window[i]=Mt(d,m)}function h(d){for(var f=d.attributes,y={},m=0;m<f.length;++m){var E=f[m],M=g(E);M&&(y[M.name]=M.value)}return y}function g(d){if(d.name){var f=d.name[0]==="p"&&d.name[1]==="z"&&d.name[2]==="-";if(f){var y=d.name.substr(3),m=JSON.parse(d.value);return{name:y,value:m}}}}}En();const kn=ir(Sn),Bn={components:{TreeNode:Sr,TracesTreeNode:qr},props:{data:{type:Object,required:!0},flipped:{type:Boolean,default:!1},treeNodeComponent:{type:String,default:"TreeNode"},issueLines:Array},data(){return{overScrollChart:null,panzoomPauseElements:[]}},mounted(){this.initPanZoom(),setTimeout(()=>{this.initPanzoomPauseListeners()},500)},beforeUnmount(){this.overScrollChart.dispose(),this.removePanzoomPauseListeners()},methods:{initPanZoom(){this.overScrollChart=kn(this.$el,{smoothScroll:!1,maxZoom:2,minZoom:.1})},pausePanZoom(){this.overScrollChart.pause()},resumePanZoom(){this.overScrollChart.resume()},initPanzoomPauseListeners(){this.panzoomPauseElements=document.getElementsByClassName("panzoom-pause");for(const r of this.panzoomPauseElements)r.addEventListener("mouseover",this.pausePanZoom),r.addEventListener("mouseout",this.resumePanZoom)},removePanzoomPauseListeners(){for(const r of this.panzoomPauseElements)r.removeEventListener("mouseover",this.pausePanZoom),r.removeEventListener("mouseout",this.resumePanZoom)}}};function Ln(r,e,n,u,l,i){return b(),S("div",{class:be(["HorizontalTreeChart",{"HorizontalTreeChart--flipped":n.flipped}])},[(b(),K(lr(n.treeNodeComponent),{entry:n.data,issueLines:n.issueLines,class:be({"HorizontalTreeChart--flipped":n.flipped})},null,8,["entry","issueLines","class"]))],2)}const Mn=_e(Bn,[["render",Ln]]),zn={components:{HorizontalTreeChart:Mn,FullscreenModal:pr,BaseParagraph:Tt,XTabs:xr,BasePill:cr,BaseCodeBlock:gr},data(){return{tracesTree:{},tracesError:null,llmAssessment:{},llmAssessments:[],llmAssessmentError:null,selectedAssessmentTimestamp:null,selectedAssessmentId:-1,loaded:!1,tabs:[{title:"Traces",id:"traces"},{title:"LLM assessment",id:"llm-assessment"}],tab:this.initialTab}},props:{issueId:{type:[String,Number],required:!0},issueTitle:String,issueLines:Array,initialTab:String},async created(){try{const r=await ur(this.issueId,{disable_toasts:!0});this.tracesTree=hr(r.traces_tree)}catch(r){r.response?this.tracesError=r.response.data:this.tracesError="Unknown error"}try{const r=await fr(this.issueId,{disable_toasts:!0});this.llmAssessments=r.llm_assessments,this.llmAssessment=this.llmAssessments.length>0?this.llmAssessments[0]:null,this.selectedAssessmentTimestamp=this.llmAssessment?this.llmAssessment.timestamp:null,this.selectedAssessmentId=this.llmAssessment?this.llmAssessment.id:""}catch(r){r.response?this.llmAssessmentError=r.response.data:this.llmAssessmentError="Unknown error"}this.loaded=!0},computed:{contentClass(){return this.tab=="traces"?"overflow-hidden bg-cream cursor-grab":this.tab=="llm-assessment"?"overflow-y-scroll":""},priority(){return this.llmAssessment?this.llmAssessment.priority=="highest"?{color:"red",text:"Highest"}:this.llmAssessment.priority=="high"?{color:"orange",text:"High"}:this.llmAssessment.priority=="medium"?{color:"blue",text:"Medium"}:this.llmAssessment.priority=="low"?{color:"green",text:"Low"}:this.llmAssessment.priority=="lowest"?{color:"green",text:"Lowest"}:this.llmAssessment.priority=="safe"?{color:"purple",text:"Safe"}:{color:"gray",text:this.llmAssessment.priority}:{color:"gray",text:"Unknown"}},priorityConfidence(){var e;let r=(e=this.llmAssessment)==null?void 0:e.priority_confidence;return(!r||r.length===0)&&(r="N/A"),r},modalTitle(){return`Traces for ${this.issueTitle}`},formattedTimestamp(){return this.formatTimestamp(this.llmAssessment)},usedToolsReadFile(){return this.llmAssessment.used_tools.filter(r=>r.toolUse.name==="readFile")}},methods:{formatTimestamp(r){const e=vr((r==null?void 0:r.timestamp)??0),n=lt.fromUnix((r==null?void 0:r.timestamp)??0).format(lt.FULL_DATE_TIME_FORMAT_PASSIVE);return`${e} ago (${n})`},handleClose(){this.$emit("cancel")},dumpJson(r){return JSON.stringify(r,null,4).trim()},updateAssessment(){this.llmAssessment=this.llmAssessments.find(r=>r.id===this.selectedAssessmentId)}}},Pn=p("hr",{class:"divider w-full mt-2px"},null,-1),Fn={key:0,class:"h-full"},Dn={key:1},Nn={key:0},In=p("div",{class:"shadow-inner-center absolute w-full h-full pin-t pointer-events-none"},null,-1),On={key:1,class:"text-primary-aik-140 text-14px"},Zn=p("div",{class:"w-full bg-carbon-5 text--semi-bold py-8px px-16px mt-36px"},"Failed to load traces",-1),Rn={class:"mt-12px px-8px ws-pre-wrap"},qn={key:1,class:"text-primary-aik-140 text-14px"},Vn={key:1},Un={key:0},Wn=p("div",{class:"w-full bg-carbon-5 text--semi-bold py-8px px-16px mt-36px"},"Select Assessment",-1),jn=["disabled"],Yn=["value"],Hn={class:"w-full bg-carbon-5 text--semi-bold py-8px px-16px mt-36px"},Jn={class:"mt-12px px-8px ws-pre-wrap"},Kn=p("div",{class:"w-full bg-carbon-5 text--semi-bold py-8px px-16px mt-36px"},"Timestamp",-1),Xn={class:"mt-12px px-8px ws-pre-wrap"},Gn=p("div",{class:"w-full bg-carbon-5 text--semi-bold py-8px px-16px mt-36px"},"Reasoning",-1),Qn={class:"mt-12px px-8px ws-pre-wrap"},$n=p("div",{class:"w-full bg-carbon-5 text--semi-bold py-8px px-16px mt-36px"},"System prompt",-1),eo={class:"mt-12px px-8px ws-pre-wrap"},to=p("div",{class:"w-full bg-carbon-5 text--semi-bold py-8px px-16px mt-36px"},"Code / User prompt",-1),ro={class:"mt-12px px-8px ws-pre-wrap"},no=p("div",{class:"w-full bg-carbon-5 text--semi-bold py-8px px-16px mt-36px"},"Read files (via tools)",-1),oo={class:"px-24px py-12px bg-carbon-5 rounded-t-8px"},ao={class:"rounded-b-8px px-12px py-12px"},so={key:1},io=p("div",{class:"w-full bg-carbon-5 text--semi-bold py-8px px-16px mt-36px"},"Used tools (raw)",-1),lo={class:"mt-12px px-8px ws-pre-wrap"},co={key:1},uo=p("div",{class:"w-full bg-carbon-5 text--semi-bold py-8px px-16px mt-36px"},"Failed to load LLM assessment ",-1),fo={class:"mt-12px px-8px ws-pre-wrap"};function mo(r,e,n,u,l,i){const o=O("XTabs"),v=O("XPreloader"),h=O("HorizontalTreeChart"),g=O("BaseParagraph"),d=O("BasePill"),f=O("BaseCodeBlock"),y=O("FullscreenModal");return b(),K(y,{header:i.modalTitle,onClose:i.handleClose,onConfirm:i.handleClose,hideCancel:!0,confirmButtonText:"Close",contentClass:i.contentClass},{header:N(()=>[q(o,{tabs:l.tabs,modelValue:l.tab,"onUpdate:modelValue":e[0]||(e[0]=m=>l.tab=m)},null,8,["tabs","modelValue"]),Pn]),default:N(()=>[l.tab=="traces"?(b(),S("div",Fn,[l.loaded?(b(),S("div",Dn,[l.tracesError?(b(),S("div",On,[Zn,p("div",Rn,[q(g,{color:"danger",size:"small",bold:""},{default:N(()=>[I(C(l.tracesError),1)]),_:1})])])):(b(),S("div",Nn,[p("div",null,[q(h,{class:"-mb-24px",data:l.tracesTree,"issue-lines":n.issueLines,treeNodeComponent:"TracesTreeNode",flipped:""},null,8,["data","issue-lines"])]),In]))])):(b(),K(v,{key:0,size:"medium",class:"absolute-centered",theme:"transparent"}))])):(b(),S("div",qn,[l.loaded?(b(),S("div",Vn,[l.llmAssessmentError?(b(),S("div",co,[uo,p("div",fo,[q(g,{color:"danger",size:"small",bold:""},{default:N(()=>[I(C(l.llmAssessmentError),1)]),_:1})])])):(b(),S("div",Un,[Wn,mr(p("select",{"onUpdate:modelValue":e[1]||(e[1]=m=>l.selectedAssessmentId=m),onChange:e[2]||(e[2]=(...m)=>i.updateAssessment&&i.updateAssessment(...m)),class:"mt-12px px-8px w-full",disabled:l.llmAssessments.length===0},[(b(!0),S(J,null,ee(l.llmAssessments,m=>(b(),S("option",{key:m.id,value:m.id},C(i.formatTimestamp(m))+"; "+C(m.priority)+"; Custom prompt: ("+C(m.skip_autotriage)+") ",9,Yn))),128))],40,jn),[[dr,l.selectedAssessmentId]]),p("div",Hn,[I("Summary "),q(d,{class:"inline-flex ml-8px",variation:i.priority.color},{default:N(()=>[I(C(i.priority.text),1)]),_:1},8,["variation"]),I(" (confidence: "+C(i.priorityConfidence)+")",1)]),p("div",Jn,C(l.llmAssessment.summary),1),Kn,p("div",Xn,C(i.formattedTimestamp),1),Gn,p("div",Qn,C(l.llmAssessment.reasoning),1),$n,p("div",eo,C(l.llmAssessment.system_prompt),1),to,p("div",ro,C(l.llmAssessment.user_prompt),1),no,(b(!0),S(J,null,ee(i.usedToolsReadFile,m=>(b(),S("div",{key:m.toolUse.toolUseId,class:"border-1 border-carbon-20 rounded-8px mt-12px"},[p("div",oo,[q(g,{bold:""},{default:N(()=>[I(C(m.toolUse.input.file)+" ",1),q(d,{class:"inline-flex ml-8px",variation:m.toolResult.status==="success"?"green":"red"},{default:N(()=>[I(C(m.toolResult.status),1)]),_:2},1032,["variation"])]),_:2},1024)]),p("div",ao,[m.toolResult.status==="success"?(b(),K(f,{key:0},{default:N(()=>[I(C(m.toolResult.content[0].json.result),1)]),_:2},1024)):(b(),S("div",so,C(m.toolResult.content[0].json.error),1))])]))),128)),io,p("div",lo,[q(f,null,{default:N(()=>[I(C(i.dumpJson(l.llmAssessment.used_tools)),1)]),_:1})])]))])):(b(),K(v,{key:0,size:"medium",class:"absolute-centered",theme:"transparent"}))]))]),_:1},8,["header","onClose","onConfirm","contentClass"])}const bo=_e(zn,[["render",mo]]);export{bo as default};
