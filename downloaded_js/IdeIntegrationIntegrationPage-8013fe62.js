import{_ as x,f as D,x as B,X as C,A as S,aJ as E,aK as P,r as o,m,k as l,p as d,o as e,n as p,w as t,F as f,q as n,s,t as R}from"./index-13ff96f4.js";import{D as O,a as M}from"./DataTable-e31a825a.js";import{P as N}from"./PageHeader-46c38a32.js";import{I as H}from"./IdeTokenRow-7fefc747.js";import{a as L}from"./DataTableCell-51c0104f.js";import{O as V}from"./OverviewEmptyState-c8440b9c.js";import{G}from"./GenericIllustration-4aca88e5.js";import{A as X}from"./ActionMenu-3e4470bf.js";const z={components:{PageHeader:N,DataTable:O,BaseButton:D,BaseIcon:B,DataTableHeader:M,XPreloader:C,IdeTokenRow:H,DataTableRow:L,OverviewEmptyState:V,GenericIllustration:G,ActionMenu:X},data(){return{tokens:[],isLoading:!0}},async mounted(){this.hasAccessToIdeIntegration||(Toast.error({title:this.$t("ERROR"),description:"This page is not available for your account"}),go("/settings/integrations")),await this.loadIdeTokens(),this.isLoading=!1},computed:{breadcrumbs(){return[{label:"Settings",href:"/settings"},{label:"Integrations",href:"/settings/integrations"},{label:"IDE"},{label:"Visual Studio Code"}]},showEmptyState(){return!this.isLoading&&this.tokens.length===0},actions(){return[{title:"Duration",items:[{label:"Indefinite",onClick:()=>this.createAccessToken("indefinite")},{label:"One week",onClick:()=>this.createAccessToken("one_week")}]}]},hasAccessToIdeIntegration(){return!!(this.$featureflags.enable_vs_code_ide_plugin||S.isPayingProAndNotTrial())}},methods:{async loadIdeTokens(){this.tokens=await E("vscode")},async createAccessToken(r){const _=await P(r,"vscode");this.loadIdeTokens(),await this.$modal.show("CopyTokenModal",{token:_})},openAdoptionStatsModal(){this.$modal.show("IdeAdoptionModal",{ide:"vscode"})}}},U={key:1,class:"page-content"},F={class:"flex align-center mb-24px gap-12px"},q=p("i",{class:"icon icon-information"},null,-1),J={colspan:"5"};function K(r,_,Y,j,k,a){const g=o("XPreloader"),h=o("PageHeader"),u=o("BaseButton"),I=o("BaseIcon"),T=o("ActionMenu"),i=o("DataTableHeader"),b=o("IdeTokenRow"),w=o("GenericIllustration"),y=o("OverviewEmptyState"),v=o("DataTableRow"),A=o("DataTable");return n(),m(f,null,[k.isLoading?(n(),l(g,{key:0,theme:"light",class:"supercenter"})):d("",!0),e(h,{title:"Visual Studio Code Extension",breadcrumbs:a.breadcrumbs},null,8,["breadcrumbs"]),a.hasAccessToIdeIntegration?(n(),m("div",U,[p("div",F,[e(u,{as:"outside-link",size:"small",variation:"tertiary",class:"ml-auto",target:"_blank",href:"https://marketplace.visualstudio.com/items?itemName=AikidoSecurity.aikido"},{default:t(()=>[q,s(" Setup Instructions ")]),_:1}),r.$groupUser.admin?(n(),l(u,{key:0,size:"small",variation:"tertiary",onClick:a.openAdoptionStatsModal},{default:t(()=>[s(" Adoption Stats ")]),_:1},8,["onClick"])):d("",!0),e(T,{sections:a.actions,placement:"bottom-end"},{trigger:t(c=>[e(u,{class:"ml-auto",size:"small",ref:"trigger",onClick:c.toggle},{default:t(()=>[s(" Generate Personal Access Token "),e(I,{icon:"icon-caret_down",class:"flex"})]),_:2},1032,["onClick"])]),_:1},8,["sections"])]),e(A,null,{header:t(()=>[e(i,{width:"auto"},{default:t(()=>[s("User")]),_:1}),e(i,{width:"200px"},{default:t(()=>[s("Created at")]),_:1}),e(i,{width:"200px"},{default:t(()=>[s("Expires at")]),_:1}),e(i,{width:"200px"},{default:t(()=>[s("Last Used at")]),_:1}),e(i,{width:"48px",alignment:"center"})]),body:t(()=>[(n(!0),m(f,null,R(k.tokens,c=>(n(),l(b,{token:c,key:c.id,onRevoked:a.loadIdeTokens},null,8,["token","onRevoked"]))),128)),a.showEmptyState?(n(),l(v,{key:0},{default:t(()=>[p("td",J,[e(y,{title:"No IDE tokens registered",description:"You don't seem to have configured any IDE credentials yet.",variation:"empty",onOnAction:a.createAccessToken},{default:t(()=>[e(w)]),_:1},8,["onOnAction"])])]),_:1})):d("",!0)]),_:1})])):d("",!0)],64)}const ne=x(z,[["render",K]]);export{ne as default};
