import{_ as f,M as h,H as g,r as a,q as o,k as l,w as i,o as t,s,u as C,p,S as _}from"./index-13ff96f4.js";import{a as u}from"./autofixSastIssues-779ec5b4.js";import{a as w}from"./autofixable-c6560249.js";const v={components:{BaseModal:h,BaseHeading:g},props:{issue:{type:Object,required:!0},programmingLanguage:{type:String,default:""}},emits:["cancel"],data(){return{isConfirmingPreview:!1,isConfirmingCreation:!1}},computed:{repoName(){return this.issue.repo_name},title(){return this.programmingLanguage?`Create autofix for ${this.$t("PROGRAMMING_LANGUAGE_"+this.programmingLanguage)} in ${this.repoName}`:`Create autofix in ${this.repoName}`},fixTitle(){return this.issue.title},buttonsDisabled(){return this.isConfirmingCreation||this.isConfirmingPreview},previewOnly(){return w(this.issue.rule_id)},previewClass(){return this.previewOnly?"ml-auto":""}},methods:{handleCancel(){this.$emit("cancel")},async handlePreview(){this.isConfirmingPreview=!0,await u([this.issue],!0,this.fixTitle,!0),this.isConfirmingPreview=!1,this.$emit("cancel")},async handleCreate(){this.isConfirmingCreation=!0,await u([this.issue],!1,this.fixTitle),this.isConfirmingCreation=!1,this.$emit("cancel")}}};function y(B,x,P,b,r,e){const d=a("BaseHeading"),c=a("BaseParagraph"),n=a("BaseButton"),m=a("BaseModal");return o(),l(m,{width:600,onClose:e.handleCancel,allowBackgroundClose:!0},{header:i(()=>[t(d,{as:"h4"},{default:i(()=>[s(C(e.title),1)]),_:1})]),content:i(()=>[t(c,null,{default:i(()=>[s(" Aikido can automatically generate a pull request in your repo to fix this issue. Or, you can preview the changes Aikido suggests. ")]),_:1})]),footer:i(()=>[e.previewOnly?p("",!0):(o(),l(n,{key:0,size:"normal",variation:"secondary",class:"ml-auto",disabled:e.buttonsDisabled,isLoading:r.isConfirmingCreation,onClicked:e.handleCreate},{default:i(()=>[s(" Create PR ")]),_:1},8,["disabled","isLoading","onClicked"])),t(n,{size:"normal",variation:"primary",class:_(e.previewClass),disabled:e.buttonsDisabled,isLoading:r.isConfirmingPreview,onClicked:e.handlePreview},{default:i(()=>[s(" Preview Autofix ")]),_:1},8,["class","disabled","isLoading","onClicked"])]),_:1},8,["onClose"])}const A=f(v,[["render",y]]);export{A as default};
