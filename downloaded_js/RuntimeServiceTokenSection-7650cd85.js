import{_ as y,f as v,B as T,e0 as x,gv as u,an as p,Q as w,r as n,q as o,m,o as i,w as r,s as l,k as h,n as a,p as C}from"./index-13ff96f4.js";import B from"./RuntimeCopyTokenModal-6b556039.js";const g={emits:["loaded"],components:{RuntimeCopyTokenModal:B,BaseButton:v,BaseParagraph:T},props:{serviceId:{type:String,required:!0}},data(){return{loaded:!1,token:void 0,showCopyModal:!1}},async mounted(){try{await this.handleFetchToken()}finally{this.loaded=!0,this.$emit("loaded")}},computed:{redactedToken(){return this.token?`********************${this.token.slice(-4)}`:""}},methods:{async handleFetchToken(){const e=await x(this.serviceId);this.token=e.token_hint},async handleGenerateToken(){const{token:e}=await u({serviceId:this.serviceId,initialGeneration:!0});this.showCopyModal=!0,this.token=e,p.emit("runtime.service.updated")},async handleRotateToken(){if(!await w({headerText:"Rotate Token",description:"Do you want to rotate this token? This will invalidate the current token and you will need to update it in your environment variables.",buttonSubmitText:"Yes, rotate"}))return;const{token:e}=await u({serviceId:this.serviceId,initialGeneration:!1});this.showCopyModal=!0,this.token=e,p.emit("runtime.service.updated")}}},I=a("code",null,"AIKIDO_TOKEN",-1),R={key:1,class:"flex flex-column gap-8px"},M={class:"flex align-center gap-8px mt-16px"},b=a("i",{class:"icon icon-refresh icon-12px"},null,-1),V=a("span",{class:"text--semi"},"Rotate Token",-1);function G(e,d,N,S,t,s){const k=n("BaseParagraph"),c=n("BaseButton"),_=n("InputText"),f=n("RuntimeCopyTokenModal");return o(),m("section",null,[i(k,null,{default:r(()=>[l(" Add this token as "),I,l(" in your environment variables. ")]),_:1}),t.token?(o(),m("div",R,[a("div",M,[i(_,{modelValue:s.redactedToken,disabled:!0,ref:"input",class:"truncate flex-1 max-w-400px",inputClass:"bg-white"},null,8,["modelValue"]),i(c,{size:"small",variation:"primary",onClicked:s.handleRotateToken},{default:r(()=>[b,V]),_:1},8,["onClicked"])])])):(o(),h(c,{key:0,class:"mt-16px",size:"small",variation:"secondary",onClicked:s.handleGenerateToken},{default:r(()=>[l(" Generate Token ")]),_:1},8,["onClicked"])),t.showCopyModal?(o(),h(f,{key:2,token:t.token,onClose:d[0]||(d[0]=P=>t.showCopyModal=!1)},null,8,["token"])):C("",!0)])}const A=y(g,[["render",G]]);export{A as R};
