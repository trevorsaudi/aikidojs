import{d as D}from"./licenses-6ab38515.js";import{_ as w,f as k,H as F,M as S,B as E,N as V,cF as O,X as P,b4 as L,r as n,q as t,k as c,w as a,n as i,p as h,o as d,s as l,m as u,F as g,t as B,u as x}from"./index-13ff96f4.js";import{B as M}from"./BaseRadioInput-a7ac3557.js";const N={props:{filters:Object},emits:["cancel","confirm"],components:{BaseButton:k,BaseHeading:F,BaseModal:S,BaseParagraph:E,BaseSelect:V,BaseRadioInput:M,InputTextArea:O,XPreloader:P},data(){return{details:null,isLoading:!0,visibleDetails:null,selectedExportType:"cyclone_dx_sbom",exportTypes:{cyclone_dx_sbom:"CycloneDX",spdx_sbom:"SPDX",csv_sbom:"CSV"}}},async mounted(){this.details=await D(this.filters),this.visibleDetails=await this.getDetailsToDisplay(),this.isLoading=!1},computed:{hasFilter(){return Object.values(this.filters).find(e=>e)},hasVisibleDetail(){return Object.values(this.visibleDetails).find(e=>e)}},methods:{async handleExport(){this.$emit("confirm",this.selectedExportType)},handleCancel(){this.$emit("cancel")},getFormattedKey(e){return e==="filter_language"?"Languages":e==="filter_risk_level"?"Risk level":e==="filter_repo_names"?"Repositories":e==="filter_target_path"?"Target Path":e==="filter_container_repo_names"?"Containers":e==="filter_team"?"Team":e==="filter_license_types"?"License Types":"Filter"},getFormattedValue(e){return Array.isArray(e)?e.length==0?"":'"'+e.join('", "')+'"':e},async getDetailsToDisplay(){const e={};for(const[o,m]of Object.entries(this.details)){if(o=="filter_team"&&m){e[o]=await this.getTeamName(m);continue}e[o]=m}return e},async getTeamName(e){return(await L(e)).name},handleSelectOption(e){this.selectedExportType=e}}},X=i("div",null,null,-1),j={class:"flex flex-column gap-16px relative"},z={key:3,class:"flex flex-column gap-8px"},R={class:"text--semi-bold min-w-150px"},H=i("hr",{class:"divider w-full"},null,-1),I={class:"flex gap-16px"},A={class:"flex row gap-8px align-center"},K=["for"];function Y(e,o,m,q,p,s){const b=n("XPreloader"),v=n("BaseHeading"),_=n("BaseParagraph"),C=n("BaseRadioInput"),y=n("BaseButton"),T=n("BaseModal");return t(),c(T,{width:"600",onClose:s.handleCancel},{header:a(()=>[X]),content:a(()=>[i("div",j,[p.isLoading?(t(),c(b,{key:0,class:"supercenter",size:"medium",theme:"light"})):h("",!0),d(v,{as:"h3"},{default:a(()=>[l(" Create SBOM export ")]),_:1}),s.hasFilter?(t(),c(_,{key:1,size:"medium"},{default:a(()=>[l(" You have selected the filters below, these will be taken into account when generating the report. ")]),_:1})):(t(),c(_,{key:2,size:"medium"},{default:a(()=>[l(" You did not select any filters, so we'll make an export of all your licenses across repositories and containers. ")]),_:1})),s.hasVisibleDetail?(t(),u("div",z,[(t(!0),u(g,null,B(p.visibleDetails,(f,r)=>(t(),u(g,{key:r},[f?(t(),c(_,{key:0,size:"medium"},{default:a(()=>[i("span",R,x(s.getFormattedKey(r)),1),l(": "+x(s.getFormattedValue(f)),1)]),_:2},1024)):h("",!0)],64))),128))])):h("",!0),H,d(_,{size:"medium",class:"text--semi-bold min-w-150px"},{default:a(()=>[l(" Select SBOM type ")]),_:1}),i("div",I,[(t(!0),u(g,null,B(p.exportTypes,(f,r)=>(t(),u("div",A,[d(C,{name:"sbom_mode",id:r,value:r,checked:p.selectedExportType===r,onSelect:()=>s.handleSelectOption(r)},null,8,["id","value","checked","onSelect"]),i("label",{for:r,class:"paragraph paragraph--small text-carbon-60 cursor-pointer"},x(f),9,K)]))),256))])])]),footer:a(()=>[d(y,{variation:"tertiary",onClick:s.handleCancel,class:"ml-auto"},{default:a(()=>[l("Cancel")]),_:1},8,["onClick"]),d(y,{variation:"primary",onClick:s.handleExport},{default:a(()=>[l("Export")]),_:1},8,["onClick"])]),_:1},8,["onClose"])}const U=w(N,[["render",Y]]);export{U as default};
