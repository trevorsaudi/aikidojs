import{_ as v,M as f,f as B,B as P,H as C,N as O,gQ as V,gR as x,an as y,r as a,q as d,k as u,w as t,o as s,n as m,s as i,p as S}from"./index-13ff96f4.js";const E={props:{cloudId:[String,Number],instanceGroup:Object},components:{BaseModal:f,BaseButton:B,BaseParagraph:P,BaseHeading:C,BaseSelect:O},emits:["cancel"],data(){return{selectedPurpose:this.instanceGroup.purpose_id??"unset",purposeOptions:[],isLoadingPurposeOptions:!0,selectedEnvironment:this.instanceGroup.environment??"production",environmentOptions:[{id:"production",title:"Production"},{id:"staging",title:"Staging"},{id:"development",title:"Development"}],isSaving:!1}},async mounted(){await this.loadPurposeOptions(),this.isLoadingPurposeOptions=!1},computed:{canUpdateEnvironment(){return this.instanceGroup.cloud_purpose=="mixed"}},methods:{async loadPurposeOptions(){const e=await V();this.purposeOptions=[{id:"unset",title:"Not set"},...e]},handleCancel(){this.$emit("cancel")},async handleDelete(){this.isSaving=!0;const e={purpose:this.selectedPurpose};this.canUpdateEnvironment&&(e.environment=this.selectedEnvironment);try{await x(this.cloudId,this.instanceGroup.id,e),y.emit("instanceGroupPurposeUpdated",{instance_group_id:this.instanceGroup.id}),this.handleCancel(),this.$toast.success({title:"Purpose updated successfully",description:"The instance group's purpose has been successfully updated."})}catch{}this.isSaving=!1},handleSelectValue(e){this.selectedPurpose=e}}},G={class:"flex flex-column gap-12px"},k={class:"flex flex-column gap-24px"};function w(e,l,N,U,n,o){const r=a("BaseParagraph"),h=a("BaseHeading"),p=a("BaseSelect"),c=a("BaseButton"),g=a("BaseModal");return d(),u(g,{width:600,onClose:o.handleCancel},{header:t(()=>[s(r,{color:"gray"})]),content:t(()=>[m("div",G,[s(h,{as:"h3"},{default:t(()=>[i("Edit configuration for this virtual machine")]),_:1}),s(r,{loose:!0,size:"medium"},{default:t(()=>[i(" Following settings have a big positive impact on noise reduction. ")]),_:1}),m("div",k,[s(p,{label:"Purpose",options:n.purposeOptions,modelValue:n.selectedPurpose,"onUpdate:modelValue":o.handleSelectValue,"is-loading":n.isLoadingPurposeOptions},null,8,["options","modelValue","onUpdate:modelValue","is-loading"]),o.canUpdateEnvironment?(d(),u(p,{key:0,label:"Environment",options:n.environmentOptions,modelValue:n.selectedEnvironment,"onUpdate:modelValue":l[0]||(l[0]=_=>n.selectedEnvironment=_)},null,8,["options","modelValue"])):S("",!0)])])]),footer:t(()=>[s(c,{onClicked:o.handleCancel,variation:"plain",class:"ml-auto"},{default:t(()=>[i(" Cancel ")]),_:1},8,["onClicked"]),s(c,{onClicked:o.handleDelete,variation:"primary",isLoading:n.isSaving},{default:t(()=>[i(" Apply Changes ")]),_:1},8,["onClicked","isLoading"])]),_:1},8,["onClose"])}const I=v(E,[["render",w]]);export{I as default};
