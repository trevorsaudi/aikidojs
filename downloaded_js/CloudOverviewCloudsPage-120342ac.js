import{C as N}from"./ConnectedCloudsOverviewTable-416aad6c.js";import{_ as g,B as P,e as $,x as I,r as l,q as i,m as v,o as e,w as t,s,u as p,n as f,k as _,p as T,ah as A,ai as D,F as x,a1 as R,ag as O,t as S}from"./index-13ff96f4.js";import{C as E}from"./CloudActionMenu-eae2a866.js";import{D as k,a as L}from"./DataTableCell-51c0104f.js";import{D as M}from"./DataTableSeverityIndicator-48ffb8dc.js";import{D as W}from"./DataTableLastScanColumn-e155b78a.js";import{C as z}from"./CloudsIllustration-273aabb4.js";import{O as F}from"./OverviewEmptyState-c8440b9c.js";import{D as V,a as j}from"./DataTable-e31a825a.js";import"./cloudLimitations-520d943e.js";import"./BaseCallout-aea0aba4.js";import"./DeleteCloudModal-fcf43857.js";import"./ActionMenu-3e4470bf.js";import"./ConfigureCloudModal-3285b63a.js";import"./SelectTeam-d51b76ec.js";import"./StackedAvatars-4925baeb.js";import"./dateFns-a344cb79.js";import"./index-b87db690.js";const H={props:{cloud:Object,scanningProgress:Number},components:{BaseParagraph:P,CloudActionMenu:E,DataTableCell:k,BaseIconButton:$,DataTableSeverityIndicator:M,BaseIcon:I,DataTableLastScanColumn:W},computed:{isNotAccessible(){return!!this.cloud.is_not_accessible},icon(){switch(this.cloud.type){default:case"aws":return"icon-location_aws";case"gcp":return"icon-gcp";case"azure":return"icon-azure";case"digocean":return"icon-digitalocean"}}}},q={class:"flex flex-1 justify-between align-center overflow-hidden"},Y=f("i",{class:"icon icon-critical"},null,-1),G=f("div",{class:"shimmer shimmer--blue"},null,-1),J=[G];function K(m,d,o,h,w,r){const n=l("BaseIcon"),a=l("DataTableCell"),c=l("BaseParagraph"),C=l("DataTableSeverityIndicator"),b=l("DataTableLastScanColumn"),y=l("BaseIconButton"),u=l("CloudActionMenu");return i(),v(x,null,[e(a,{alignment:"center"},{default:t(()=>[e(n,{size:16,icon:r.icon,color:"#737283"},null,8,["icon"])]),_:1}),e(a,null,{default:t(()=>[e(c,{class:"truncate"},{default:t(()=>[s(p(o.cloud.account_purpose),1)]),_:1})]),_:1}),e(a,null,{default:t(()=>[f("div",q,[e(c,{class:"truncate"},{default:t(()=>[s(p(o.cloud.name),1)]),_:1}),r.isNotAccessible?(i(),_(c,{key:0,color:"danger",class:"flex align-center gap-4px"},{default:t(()=>[Y,s(" This cloud could not be scanned ")]),_:1})):T("",!0)])]),_:1}),e(a,null,{default:t(()=>[e(c,{class:"truncate"},{default:t(()=>[s(p(o.cloud.account_id),1)]),_:1})]),_:1}),e(C,{priority:o.cloud.max_issue_severity},null,8,["priority"]),e(a,null,{default:t(()=>[e(c,{class:"truncate"},{default:t(()=>[s(p(o.cloud.open_issue_count),1)]),_:1})]),_:1}),e(a,null,{default:t(()=>[e(c,{class:"truncate"},{default:t(()=>[s(p(o.cloud.ignored_issue_count),1)]),_:1})]),_:1}),e(a,null,{default:t(()=>[o.scanningProgress&&o.scanningProgress>0&&o.scanningProgress<100?(i(),v("div",{key:0,class:"loading-bar",style:A({width:`${o.scanningProgress}%`})},J,4)):(i(),_(b,{key:1,"last-scanned-at":o.cloud.last_scanned_at},null,8,["last-scanned-at"]))]),_:1}),e(a,{spacing:"compact",alignment:"center"},{default:t(()=>[f("div",{class:"data-table__row__action-container",onClick:d[1]||(d[1]=D(()=>m.$refs.trigger.click(),["prevent","stop"]))},[e(u,{cloud:o.cloud},{trigger:t(B=>[e(y,{onClick:d[0]||(d[0]=D(()=>{},["prevent","stop"])),icon:"icon-actions",onClicked:B.toggle,class:"data-table__row__action",ref:"trigger"},null,8,["onClicked"])]),_:1},8,["cloud"])])]),_:1})],64)}const Q=g(H,[["render",K]]),U={components:{LoadingSkeleton:R,DataTableRow:L,DataTableCell:k},methods:{calculateDynamicWidth(m=90){return`${Math.random()*(m-20)+20}%`}}};function X(m,d,o,h,w,r){const n=l("LoadingSkeleton"),a=l("DataTableCell"),c=l("DataTableRow");return i(),_(c,null,{default:t(()=>[e(a,null,{default:t(()=>[e(n,{height:"14px"})]),_:1}),e(a,null,{default:t(()=>[e(n,{height:"14px",width:r.calculateDynamicWidth()},null,8,["width"])]),_:1}),e(a,null,{default:t(()=>[e(n,{height:"14px"})]),_:1}),e(a,null,{default:t(()=>[e(n,{height:"14px"})]),_:1}),e(a,null,{default:t(()=>[e(n,{height:"14px"})]),_:1}),e(a,null,{default:t(()=>[e(n,{height:"14px"})]),_:1}),e(a,null,{default:t(()=>[e(n,{height:"14px"})]),_:1}),e(a,{spacing:"compact",alignment:"center"},{default:t(()=>[e(n,{height:"14px"})]),_:1})]),_:1})}const Z=g(U,[["render",X]]),ee={emits:["connectCloud"],components:{OverviewEmptyState:F,CloudsIllustration:z},computed:{title(){return this.$teamContext?"No clouds connected to this team":"No cloud connected yet."},description(){return this.$teamContext?`No clouds added to (${O.teamName}). Reset team filter to see all clouds`:"Link up your cloud to enable scans for misconfigurations, container images, function runtimes and more. We will only have view access. Your account content stays private, always."},actionLabel(){return this.$teamContext?"Reset Team Filter":"Connect cloud"}},methods:{handleOnAction(){if(this.$teamContext){O.clearTeamId();return}this.$emit("connectCloud")}}};function te(m,d,o,h,w,r){const n=l("CloudsIllustration"),a=l("OverviewEmptyState");return i(),_(a,{title:r.title,description:r.description,actionLabel:r.actionLabel,variation:"empty",onOnAction:r.handleOnAction},{default:t(()=>[e(n)]),_:1},8,["title","description","actionLabel","onOnAction"])}const ne=g(ee,[["render",te]]),ae={props:{clouds:Array,isLoading:Boolean,showEmptyState:Boolean,scanningProgress:Object,onConnectNewCloud:Function},components:{CloudOverviewTableRow:Q,CloudOverviewTableRowLoading:Z,CloudOverviewEmptyState:ne,DataTable:V,DataTableHeader:j,DataTableRow:L}},oe={colspan:"8"};function le(m,d,o,h,w,r){const n=l("DataTableHeader"),a=l("CloudOverviewTableRowLoading"),c=l("CloudOverviewTableRow"),C=l("DataTableRow"),b=l("CloudOverviewEmptyState"),y=l("DataTable");return i(),_(y,null,{header:t(()=>[e(n,{width:"64px"},{default:t(()=>[s("Type")]),_:1}),e(n,{width:"15%"},{default:t(()=>[s("Purpose")]),_:1}),e(n,{width:"auto"},{default:t(()=>[s("Name")]),_:1}),e(n,{width:"15%"},{default:t(()=>[s("Account id")]),_:1}),e(n,{width:"113px",alignment:"center"},{default:t(()=>[s(" Severity ")]),_:1}),e(n,{width:"10%"},{default:t(()=>[s("# Open issues")]),_:1}),e(n,{width:"10%"},{default:t(()=>[s("Ignored")]),_:1}),e(n,{width:"115px"},{default:t(()=>[s("Last scan")]),_:1}),e(n,{width:"48px",alignment:"center"})]),body:t(()=>[o.isLoading?(i(),v(x,{key:0},S(4,u=>e(a,{key:u})),64)):T("",!0),(i(!0),v(x,null,S(o.clouds,u=>(i(),_(C,{key:u.id,clickable:"",href:`/clouds/${u.id}`},{default:t(()=>[e(c,{cloud:u,scanningProgress:o.scanningProgress[u.id]},null,8,["cloud","scanningProgress"])]),_:2},1032,["href"]))),128)),o.showEmptyState?(i(),_(C,{key:1},{default:t(()=>[f("td",oe,[e(b,{onOnAction:o.onConnectNewCloud},null,8,["onOnAction"])])]),_:1})):T("",!0)]),_:1})}const ce=g(ae,[["render",le]]),se={components:{ConnectedCloudsOverviewTable:N,CloudOverviewTable:ce}};function ie(m,d,o,h,w,r){const n=l("CloudOverviewTable"),a=l("ConnectedCloudsOverviewTable");return i(),_(a,null,{table:t(c=>[e(n,{clouds:c.clouds,scanningProgress:c.scanningProgress,isLoading:c.isLoading,showEmptyState:c.showEmptyState,onConnectNewCloud:c.onConnectNewCloud},null,8,["clouds","scanningProgress","isLoading","showEmptyState","onConnectNewCloud"])]),_:1})}const Se=g(se,[["render",ie]]);export{Se as default};
