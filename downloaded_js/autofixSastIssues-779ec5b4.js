import{d5 as f,d6 as p,an as m,d7 as x,c6 as h,de as d}from"./index-13ff96f4.js";const _=async(a,t,c,l=!1,o=-1)=>{var r;if(a.length==0)return;const i=a.map(e=>e.id);try{let e=null;t?e=await f(i,"fix_sast_ai",void 0,"latest"):e=await p(i,"fix_sast_ai",void 0,"latest",o);const s=e.task_id,n=t?"Creating isolated sandbox for this preview.":"Creating isolated sandbox for this Autofix. This can take about 15 seconds";m.emit(x,{task_id:s,type:"started",message:n,event:0,metadata:{package:c,action:"fix_sast_ai",version:"latest",preview:t,openDetailsModal:l,relatedPreviewTaskId:o}})}catch(e){if(e instanceof h.AxiosError&&(e.response.status===403&&d.show("EnableIntegrationModal"),e.response.status===402)){const s=((r=e.response.data)==null?void 0:r.reason_phrase)||e.response.statusText;if((await d.show("InfoModal",{width:600,headerText:"Autofix limit reached",title:s,description:"You have reached your limit to preview and create PR's. Please contact Aikido if you want to increase your limit.",buttonSubmitText:"Contact Aikido",showCancelButton:!0,destructive:!1})).type=="saved"){const u="Hi, I would like to increase my SAST Autofix limits.";window.Intercom("showNewMessage",u)}}}};export{_ as a};
