import{l as B}from"./reports-ed4978a9.js";import{P as F}from"./PageHeader-46c38a32.js";import{_ as R,H as I,X as H,dv as O,B as A,aV as D,r as e,m as a,o as t,w as o,n as s,k as p,F as c,t as L,p as M,q as r,s as d,S,u as h}from"./index-13ff96f4.js";import{A as z}from"./ActionMenu-3e4470bf.js";import{F as N}from"./FilterButton-bb5393a7.js";import{C as V}from"./ComplianceSection-1226ea47.js";import{C as T}from"./CompliancePrintHeader-341b18be.js";import{P as X}from"./PdfDownloadButton-072addbd.js";import"./AccordionContainer-09dc0ed4.js";import"./DataTable-e31a825a.js";import"./DataTableCell-51c0104f.js";import"./BracesIcon-0a8568f4.js";const W={components:{PageHeader:F,BaseHeading:I,XPreloader:H,ProgressBar:O,ComplianceSection:V,CompliancePrintHeader:T,ActionMenu:z,FilterButton:N,BaseParagraph:A,PdfDownloadButton:X},data(){return{isLoading:!0,overview:{},groupReference:void 0,mode:void 0}},provide(){return{filter_team_id:D(()=>this.$teamContext)}},async mounted(){await Promise.allSettled([this.loadComplianceOverview()])},watch:{async $teamContext(){this.$globalLoadingIndicator.show();try{await this.loadComplianceOverview()}finally{this.$globalLoadingIndicator.hide()}}},computed:{breadcrumbs(){return[{label:"Reports",href:"/reports"},{label:"DORA"}]},compliance(){const i=this.overview.total_complying_rule_count??0,_=this.overview.total_rule_count??0;return i===0||this.isLoading?0:Math.round(i/_*100)},sections(){return this.mode?this.overview[this.mode]??{}:{...this.overview.ict_risk_management_result??{},...this.overview.competent_authorities_result??{},...this.overview.classify_incidents_based_on_severity_result??{},...this.overview.incident_reporting_process_result??{},...this.overview.harmonization_with_other_regulations_result??{},...this.overview.incident_record_keeping_result??{}}},filterLabel(){return this.mode?this.mode==="ict_risk_management_result"?"2 ICT Risk Management":this.mode==="competent_authorities_result"?"7 Competent Authorities":this.mode==="classify_incidents_based_on_severity_result"?"Classify Incidents Based On Severity":this.mode==="incident_reporting_process_result"?"Incident Reporting Process: Initial Notifications For Quick Follow-up":this.mode==="harmonization_with_other_regulations_result"?"Harmonization With Other Regulations":this.mode==="incident_record_keeping_result"?"Incident Record Keeping":"Filter controls":"Filter controls"},actions(){return[{title:"Controls",action:{label:"Clear filter",onClick:()=>this.mode=void 0},items:[{label:"2 ICT Risk Management",onClick:()=>this.handleChangeFilter("ict_risk_management_result"),active:this.mode==="ict_risk_management_result"},{label:"7 Competent Authorities",onClick:()=>this.handleChangeFilter("competent_authorities_result"),active:this.mode==="competent_authorities_result"},{label:"Classify Incidents Based On Severity",onClick:()=>this.handleChangeFilter("classify_incidents_based_on_severity_result"),active:this.mode==="classify_incidents_based_on_severity_result"},{label:"Incident Reporting Process: Initial Notifications For Quick Follow-up",onClick:()=>this.handleChangeFilter("incident_reporting_process_result"),active:this.mode==="incident_reporting_process_result"},{label:"Harmonization With Other Regulations",onClick:()=>this.handleChangeFilter("harmonization_with_other_regulations_result"),active:this.mode==="harmonization_with_other_regulations_result"},{label:"Incident Record Keeping",onClick:()=>this.handleChangeFilter("incident_record_keeping_result"),active:this.mode==="incident_record_keeping_result"}]}]},emptyControlsMessage(){}},methods:{async loadComplianceOverview(){this.overview=await B({teamId:null}),this.isLoading=!1},handleChangeFilter(i){if(this.mode===i){this.mode=void 0;return}this.mode=i}}},K={class:"flex gap-32px align-center"},Q={class:"page-content"},q={class:"mb-16px flex align-center gap-12px"},E=s("i",{class:"icon icon-caret_down icon-12px"},null,-1),j={class:"flex flex-column gap-12px",id:"ComplianceSectionWrapper"},G={key:0,class:"flex rounded-8px py-32px px-16px bg-white border-1 border-carbon-20"};function J(i,_,U,Y,m,n){const g=e("BaseHeading"),v=e("ProgressBar"),f=e("PdfDownloadButton"),C=e("PageHeader"),w=e("XPreloader"),b=e("FilterButton"),k=e("ActionMenu"),y=e("CompliancePrintHeader"),P=e("ComplianceSection"),x=e("BaseParagraph");return r(),a(c,null,[t(C,{breadcrumbs:n.breadcrumbs},{title:o(()=>[s("div",K,[t(g,{as:"h1"},{default:o(()=>[d("DORA compliance overview")]),_:1}),t(v,{progress:n.compliance},null,8,["progress"])])]),rightContent:o(()=>[t(f,{exportType:"pci"})]),_:1},8,["breadcrumbs"]),s("div",Q,[m.isLoading?(r(),p(w,{key:0,class:"absolute-centered",theme:"transparent"})):(r(),a(c,{key:1},[s("div",q,[t(k,{sections:n.actions,placement:"bottom-start"},{trigger:o(l=>[t(b,{onClick:l.toggle,class:S({"filter-button--active":!!m.mode})},{default:o(()=>[d(h(n.filterLabel)+" ",1),E]),_:2},1032,["onClick","class"])]),_:1},8,["sections"])]),s("div",j,[t(y,{title:"DORA compliance overview"}),(r(!0),a(c,null,L(n.sections??{},(l,u)=>(r(),p(P,{key:u,section:l,code:u},null,8,["section","code"]))),128)),n.emptyControlsMessage?(r(),a("div",G,[t(x,{size:"medium"},{default:o(()=>[d(h(n.emptyControlsMessage),1)]),_:1})])):M("",!0)])],64))])],64)}const de=R(W,[["render",J]]);export{de as default};
