import{A}from"./ActionMenu-3e4470bf.js";import{_ as w,bt as O,al as B,I as T,a2 as L,d as V,by as F,r as u,q as l,m as a,n as c,s as p,u as r,p as n,o as x,w as o,S as h,k as m,ah as y,F as S,t as P}from"./index-13ff96f4.js";import{I as N}from"./InputCheckbox-81cb3ca6.js";const D={components:{ActionMenu:A,BasePopover:O,InputCheckbox:N,LoadingSpinner:B,InputSearch:T,XTooltip:L,BasePill:V},emits:["update:selectedItems","onSearchChanged","update:isAllChecked"],props:{options:{type:Array,required:!0},selectedItems:{type:Array,required:!0},label:{type:String,default:""},sublabel:{type:String,default:""},isLoading:{type:Boolean,default:!1},width:{type:[String,Number],default:194.5},maxHeight:{type:[String,Number],default:"unset"},placeholder:{type:String,default:"Select items"},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},enableSearch:{type:Boolean,default:!0},disableSimpleSearch:{type:Boolean,default:!1},isChangingList:{type:Boolean,default:!1},enableCheckAll:{type:Boolean,default:!1},isAllChecked:{type:Boolean},error:{type:String,default:""},maxSelectableItems:{type:Number,default:-1},selectAllText:{type:String,default:null},shouldTruncateOptions:{type:Boolean,default:!1},shouldTruncateOptionsLeft:{type:Boolean,default:!1},truncateOptionsWidth:{type:Number,default:100},showTooltipForOptions:{type:Boolean,default:!1},useFilterStyling:{type:Boolean,default:!1},showFilterActive:{type:Boolean,default:!1},descriptionClass:{type:String,default:""}},data(){return{search:"",uuid:F()}},computed:{firstSelectedItemLabel(){if(this.options.length==0)return"Â ";const i=this.selectedItems[0];return this.options.find(e=>e.value==i).label},filteredOptions(){return this.disableSimpleSearch?this.options:this.search.trim()==""?this.options:this.options.filter(i=>i.label.toLowerCase().includes(this.search.toLowerCase()))},widthStyle(){if(this.width!="unset")return{width:this.width+"px"}},maxHeightStyle(){return this.maxHeight=="unset"?{maxHeight:"250px"}:{maxHeight:this.maxHeight+"px"}},maximumSelected(){return this.maxSelectableItems<=0?!1:this.selectedItems.length>=this.maxSelectableItems},allText(){return this.selectAllText?this.selectAllText:this.$t("ALL")},truncateWidthStyle(){return{maxWidth:this.truncateOptionsWidth+"px"}}},methods:{isSelected(i){return this.selectedItems.includes(i.value)},handleToggleOption(i){if(this.isAllChecked&&this.$emit("update:isAllChecked",!1),!this.isSelected(i)){const f=[...this.selectedItems,i.value];this.$emit("update:selectedItems",f);return}const d=this.selectedItems.findIndex(f=>f==i.value);if(d==-1)return;const e=[...this.selectedItems];e.splice(d,1),this.$emit("update:selectedItems",e)},handleToggleCheckAll(){const i=!this.isAllChecked;if(this.$emit("update:isAllChecked",i),!i){this.$emit("update:selectedItems",[]);return}const d=this.filteredOptions.filter(e=>!e.disabled).map(e=>e.value);this.$emit("update:selectedItems",d)},onSelectClicked(i){this.disabled||i.toggle()},toggleDropdown(){this.$refs.selectInputContainer.click()},isOptionDisabled(i){return i.disabled?!0:!this.isSelected(i)&&this.maximumSelected}}},H={key:0,class:"select-input__label"},W={key:0,class:"required"},q={key:0,class:"select-input__label__sub-label"},U=["onClick"],E={class:"select-input__input select-input__input--default"},X={key:0,class:"text--semi"},z={class:"select-input__input-indicator"},j={key:1,class:"icon icon-14px icon-caret_down text-carbon-60 leading-22px"},M={key:0,class:"text-color-danger mt-4px ml-16px"},G={key:0,class:"p-8px"},J={key:1,class:"w-full flex align-center justify-center py-16px mb-8px"},K={key:3,class:"text-primary-aik-140 text--normal py-8px px-16px mb-8px"};function Q(i,d,e,f,b,s){const g=u("LoadingSpinner"),C=u("InputSearch"),k=u("InputCheckbox"),_=u("XTooltip"),I=u("BasePill"),v=u("BasePopover");return l(),a("div",{class:"select-input select-input--theme-light relative",style:y(s.widthStyle)},[e.label?(l(),a("label",H,[c("span",null,[p(r(e.label)+" ",1),e.required?(l(),a("span",W,"*")):n("",!0)]),e.sublabel?(l(),a("span",q,r(e.sublabel),1)):n("",!0)])):n("",!0),x(v,{placement:"bottom-start",fullWidth:!0,ref:"multiSelectPopover",keepOtherPopoversOpen:!0,keepPopoverOpenOnInsideClick:!0,allowFlip:!1,onIsOpenChanged:d[2]||(d[2]=t=>i.$emit("isOpenChanged",t))},{trigger:o(t=>[c("div",null,[c("div",{ref:"selectInputContainer",class:h(["select-input__input-container",{error:!!e.error,disabled:e.disabled,"filter-button-multiselect":e.useFilterStyling,"filter-button--active":e.showFilterActive}]),onClick:R=>s.onSelectClicked(t)},[c("div",E,[e.selectedItems.length==0?(l(),a("div",X,r(e.placeholder),1)):n("",!0),e.selectedItems.length==1?(l(),a("div",{key:1,class:h(["text--semi truncate max-w-full",{"text-primary-aik-140":!e.disabled,"text-carbon-60":e.disabled}])},r(s.firstSelectedItemLabel),3)):n("",!0),e.selectedItems.length>1&&!e.isAllChecked?(l(),a("div",{key:2,class:h(["text--semi",{"text-primary-aik-140":!e.disabled,"text-carbon-60":e.disabled}])},r(i.$t("X_SELECTED",e.selectedItems.length)),3)):n("",!0),e.selectedItems.length>1&&e.isAllChecked?(l(),a("div",{key:3,class:h(["text--semi",{"text-primary-aik-140":!e.disabled,"text-carbon-60":e.disabled}])},r(s.allText),3)):n("",!0)]),c("div",z,[e.isLoading?(l(),m(g,{key:0,color:"#645dd7","background-color":"#d0cdff",width:16,height:16})):(l(),a("i",j))])],10,U),e.error?(l(),a("div",M,r(e.error),1)):n("",!0)])]),content:o(()=>[e.isLoading?n("",!0):(l(),a("div",{key:0,class:"overflow-y-scroll scrollbar-simple-carbon-60--inverted",style:y({...s.widthStyle,...s.maxHeightStyle})},[e.enableSearch?(l(),a("div",G,[x(C,{modelValue:b.search,"onUpdate:modelValue":[d[0]||(d[0]=t=>b.search=t),d[1]||(d[1]=t=>i.$emit("onSearchChanged",t))],inputClass:"outline-none text--normal border-carbon-40",spacing:"compact",fullWidth:!0},null,8,["modelValue"])])):n("",!0),e.isChangingList?(l(),a("div",J,[x(g,{color:"#645dd7","background-color":"#d0cdff",width:16,height:16})])):s.filteredOptions.length>0?(l(),a(S,{key:2},[e.enableCheckAll&&b.search.trim()==""?(l(),m(k,{key:0,modelValue:e.isAllChecked,name:`checkAll_${b.uuid}`,"onUpdate:modelValue":s.handleToggleCheckAll,class:"px-16px first_mt-8px"},{default:o(()=>[c("div",{class:h(["text-primary-aik-140 text--normal",{"text--semi":e.isAllChecked}])},r(s.allText),3)]),_:1},8,["modelValue","name","onUpdate:modelValue"])):n("",!0),(l(!0),a(S,null,P(s.filteredOptions,t=>(l(),m(k,{key:t.value,modelValue:s.isSelected(t),name:t.label,"onUpdate:modelValue":()=>s.handleToggleOption(t),class:"px-16px last_mb-8px first_mt-8px",disabled:s.isOptionDisabled(t),descriptionClass:e.descriptionClass},{default:o(()=>[c("div",{class:h(["text-primary-aik-140 text--normal w-full flex justify-between align-center",{"text--semi":s.isSelected(t),truncate:e.shouldTruncateOptions,"truncate-left":e.shouldTruncateOptionsLeft}]),style:y(s.truncateWidthStyle)},[p(r(t.label)+" ",1),e.showTooltipForOptions?(l(),m(_,{key:0},{default:o(()=>[p(r(t.tooltip??t.label),1)]),_:2},1024)):n("",!0),s.isOptionDisabled(t)&&t.disabledTooltip?(l(),m(_,{key:1},{default:o(()=>[p(r(t.disabledTooltip),1)]),_:2},1024)):n("",!0),s.isOptionDisabled(t)&&t.disabledAction?(l(),m(I,{key:2,size:"small",variation:t.disabledAction.variation||"orange",title:t.disabledAction.text,onClick:t.disabledAction.handleAction},null,8,["variation","title","onClick"])):n("",!0)],6)]),_:2},1032,["modelValue","name","onUpdate:modelValue","disabled","descriptionClass"]))),128))],64)):(l(),a("div",K,"no items found"))],4))]),_:1},512)],4)}const ee=w(D,[["render",Q]]);export{ee as I};
