import{_ as w,f as P,B as C,A as U,r as l,q as c,m as d,o as a,w as s,s as r,p as m,n as t,M as F,H as V,N as E,d as N,O as D,k as g,u as h,F as v,P as Y,Q as R,R as G,t as H,S as T,T as X,U as Z,V as j,x as I,W as Q,Y as J,Z as M,$ as K,a0 as ee,a1 as te,z as ne,a2 as ae,a3 as q,a as se,a4 as oe,a5 as ie}from"./index-13ff96f4.js";import{g as z,a as re,b as le,c as ce}from"./billing-0e21f5cc.js";import{B as L}from"./BaseCard-471d3203.js";import{B as ue}from"./BaseRadioInput-a7ac3557.js";import{g as de}from"./saml-386d5734.js";import{S as pe}from"./ScanFrequencySettingModal-9f206eb5.js";import{d as he}from"./index-b87db690.js";const me={components:{BaseButton:P,BaseParagraph:C},computed:{isSelfScanGroup(){return!!(U.data.group.scm_type=="selfscan"||this.$featureflags.allow_selfscan_repos_scm_account)}},methods:{handeClickSetup(){this.$router.push("/settings/integrations/localscan")}}},_e={key:0,class:"mt-8px"},fe=t("i",{class:"icon icon-12px icon-settings"},null,-1);function ge(e,o,b,x,i,n){const u=l("BaseButton");return n.isSelfScanGroup?(c(),d("div",_e,[a(u,{onClick:n.handeClickSetup,size:"small",variation:"tertiary"},{default:s(()=>[fe,r(" Local Scan setup ")]),_:1},8,["onClick"])])):m("",!0)}const ye=w(me,[["render",ge]]),xe={components:{BaseModal:F,BaseParagraph:C,BaseRadioInput:ue,BaseHeading:V,BaseButton:P,BaseSelect:E,BasePill:N},emits:["cancel"],data(){return{currency:"USD",contractDuration:"monthly",plan:this.$route.query.plan??"10",isFetchingBillingUrl:!1,planType:"standard",priceInfo:{},isLoadingPrice:!1}},async mounted(){const e=new Date().getTimezoneOffset();e<0&&e>=-180?this.currency="EUR":await this.fetchPlanPrice()},computed:{planOptions(){const e=[{id:"10",title:"Up to 10 users"},{id:"20",title:"Up to 20 users"},{id:"30",title:"Up to 30 users"}];return this.planType=="pro"&&e.push({id:"50",title:"Up to 50 users"}),this.$route.query.plan==="startup"&&e.unshift({id:"startup",title:"Startup - up to 3 users (30% discounted)"}),this.$route.query.plan==="startup-50"&&e.unshift({id:"startup-50",title:"Startup - up to 3 users (50% discounted)"}),this.$route.query.plan==="solo"&&e.unshift({id:"solo",title:"Single developer - up to 1 user (discounted)"}),e},plansWithoutYearlyOrProOptions(){return["solo","startup","startup-50"]},shouldShowDurationOption(){return!this.plansWithoutYearlyOrProOptions.includes(this.plan)},shouldShowPlanTypeOption(){return!this.plansWithoutYearlyOrProOptions.includes(this.plan)},selectedOptions(){return[this.plan,this.currency,this.contractDuration,this.planType]},totalPriceText(){if(!this.priceInfo.price)return"";const e=this.priceInfo.currency_code=="EUR"?"€":"$",o=this.priceInfo.price/100;return`${e}${o}`},monthlyPriceText(){if(!this.priceInfo.price)return"";const e=this.priceInfo.currency_code=="EUR"?"€":"$";let o=this.priceInfo.price/100;return this.priceInfo.period_unit=="year"&&(o=Math.round(this.priceInfo.price/12)/100),`${e}${o} / month`},planInfoText(){return this.priceInfo.plan_name}},watch:{selectedOptions:{async handler(){await this.fetchPlanPrice()}}},methods:{handleCloseModal(){this.$emit("cancel")},async handleSubscribe(){this.isFetchingBillingUrl=!0;try{D("someone_tried_upgrading_account");const{url:e,scm_user_count:o}=await z({plan:this.plan,currency:this.currency,duration:this.contractDuration,plan_type:this.planType});if(o>50){if(D("custom_quote_required_modal_triggered"),(await this.$modal.show("InfoModal",{headerText:" ",title:"Custom Quote Required",description:`Aikido is a developer-first platform, and a successful rollout requires most of your team to have a license. It looks like there are ${o} developers in your organization, which requires a custom quote.`,buttonSubmitText:"Get in touch",width:600})).type=="saved"){const x=`Hi, I would like to request a custom quote. We have ${o} developers in our organization.`;window.Intercom("showNewMessage",x)}this.isFetchingBillingUrl=!1;return}window.location=e,this.isFetchingBillingUrl=!1}catch(e){throw this.isFetchingBillingUrl=!1,e}},changePlan(e){this.plansWithoutYearlyOrProOptions.includes(e)&&(this.contractDuration="monthly",this.planType="standard"),this.plan=e},handleSelectPlanType(e){e=="standard"&&this.plan=="50"&&(this.plan="30"),this.planType=e},async fetchPlanPrice(){this.isLoadingPrice=!0;const{price_info:e}=await re({plan:this.plan,currency:this.currency,duration:this.contractDuration,plan_type:this.planType});this.priceInfo=e,this.isLoadingPrice=!1}}},ke={class:"flex flex-column gap-12px"},be=t("hr",{class:"border-carbon-20 border-b-1 w-full"},null,-1),Se={class:"flex flex-column"},ve=t("div",{class:"flex justify-between"},[t("span",null,"Plan Type"),t("a",{href:"https://aikido.dev/pricing",target:"_blank",class:"link"},"pricing details")],-1),we={key:0},Be={class:"flex gap-24px align-center"},Pe={class:"flex align-center gap-8px"},Te=t("label",{class:"text-primary-aik-140 text--semi-bold leading-18px cursor-pointer",for:"standard"},"Basic",-1),Ue={class:"flex align-center gap-8px"},$e=t("label",{class:"text-primary-aik-140 text--semi-bold leading-18px cursor-pointer",for:"pro"},"Pro",-1),De={class:"mt-16px"},Ce={key:0,class:"flex flex-column gap-8px"},Ie={class:"flex gap-24px align-center"},Ae={class:"flex align-center gap-8px"},Me=t("label",{class:"text-primary-aik-140 text--semi-bold leading-18px cursor-pointer",for:"monthly"},"Monthly",-1),qe={class:"flex align-center gap-8px"},Fe=t("label",{class:"text-primary-aik-140 text--semi-bold leading-18px cursor-pointer",for:"yearly"},"Yearly",-1),ze={class:"flex flex-column gap-8px"},Le={class:"flex gap-24px align-center"},Oe={class:"flex align-center gap-8px"},We=t("label",{class:"text-primary-aik-140 text--semi-bold leading-18px cursor-pointer",for:"usd"},"USD ($)",-1),Ve={class:"flex align-center gap-8px"},Ee=t("label",{class:"text-primary-aik-140 text--semi-bold leading-18px cursor-pointer",for:"eur"},"EUR (€)",-1),Ne={class:"border-1 border-primary-aik-80 py-8px px-16px rounded-4px bg-primary-aik-20"},Ye={key:0,class:"text-primary-aik-80"},Re={key:1,class:"relative h-38px desktop-wide_h-36px"};function Ge(e,o,b,x,i,n){const u=l("BaseParagraph"),f=l("BaseHeading"),p=l("BaseRadioInput"),_=l("BaseSelect"),y=l("BasePill"),k=l("XPreloader"),S=l("BaseButton"),$=l("BaseModal");return c(),g($,{onClose:n.handleCloseModal,"allow-background-close":!1},{header:s(()=>[a(u,{color:"gray"},{default:s(()=>[r("Upgrade your workspace")]),_:1})]),content:s(()=>[t("div",ke,[a(f,{as:"h3"},{default:s(()=>[r("Upgrade Your Workspace")]),_:1}),a(u,{loose:!0,size:"medium",color:"gray"},{default:s(()=>[r("Please select plan type, duration and total amount of seats. You only pay for users that are accessing Aikido.")]),_:1})]),be,t("div",Se,[a(u,{size:"medium",bold:"",class:"mb-8px"},{default:s(()=>[ve]),_:1}),n.shouldShowPlanTypeOption?(c(),d("form",we,[t("div",Be,[t("div",Pe,[a(p,{modelValue:i.planType,name:"planType",value:"standard",id:"standard",onSelect:o[0]||(o[0]=()=>n.handleSelectPlanType("standard")),checked:i.planType==="standard"},null,8,["modelValue","checked"]),Te]),t("div",Ue,[a(p,{modelValue:i.planType,value:"pro",name:"planType",id:"pro",onSelect:o[1]||(o[1]=()=>n.handleSelectPlanType("pro")),checked:i.planType==="pro"},null,8,["modelValue","checked"]),$e])])])):m("",!0),t("div",De,[a(_,{options:n.planOptions,modelValue:i.plan,"onUpdate:modelValue":n.changePlan,required:""},null,8,["options","modelValue","onUpdate:modelValue"])])]),n.shouldShowDurationOption?(c(),d("div",Ce,[a(u,{size:"medium",bold:""},{default:s(()=>[r("Contract Duration")]),_:1}),t("form",null,[t("div",Ie,[t("div",Ae,[a(p,{modelValue:i.contractDuration,name:"contractDuration",value:"monthly",id:"monthly",onSelect:o[2]||(o[2]=B=>i.contractDuration="monthly"),checked:i.contractDuration==="monthly"},null,8,["modelValue","checked"]),Me]),t("div",qe,[a(p,{modelValue:i.contractDuration,name:"contractDuration",value:"yearly",id:"yearly",onSelect:o[3]||(o[3]=B=>i.contractDuration="yearly"),checked:i.contractDuration==="yearly"},null,8,["modelValue","checked"]),Fe,a(y,{variation:"purple",title:"10% off"})])])])])):m("",!0),t("div",ze,[a(u,{size:"medium",bold:""},{default:s(()=>[r("Select Currency")]),_:1}),t("form",null,[t("div",Le,[t("div",Oe,[a(p,{modelValue:i.currency,name:"currency",value:"USD",id:"usd",onSelect:o[4]||(o[4]=B=>i.currency="USD"),checked:i.currency==="USD"},null,8,["modelValue","checked"]),We]),t("div",Ve,[a(p,{modelValue:i.currency,value:"EUR",name:"currency",id:"eur",onSelect:o[5]||(o[5]=B=>i.currency="EUR"),checked:i.currency==="EUR"},null,8,["modelValue","checked"]),Ee])])])]),t("div",Ne,[i.isLoadingPrice?(c(),d("div",Re,[a(k,{size:"medium",class:"absolute-centered",theme:"transparent"})])):(c(),d(v,{key:0},[a(u,{size:"small",bold:!0,color:"primary"},{default:s(()=>[r("Total Price: "+h(n.totalPriceText)+" ",1),i.priceInfo.period_unit&&i.priceInfo.period_unit=="year"?(c(),d("span",Ye,"("+h(n.monthlyPriceText)+")",1)):m("",!0)]),_:1}),a(u,{class:"mt-2px",size:"small",color:"purple"},{default:s(()=>[r(h(n.planInfoText),1)]),_:1})],64))])]),footer:s(()=>[a(S,{onClicked:n.handleCloseModal,variation:"plain",class:"ml-auto"},{default:s(()=>[r(h(e.$t("DELETE_CLOUD_MODAL.ACTIONS.CANCEL")),1)]),_:1},8,["onClicked"]),a(S,{onClicked:n.handleSubscribe,variation:"primary",disabled:this.isFetchingBillingUrl,"is-loading":this.isFetchingBillingUrl},{default:s(()=>[r(" Next ")]),_:1},8,["onClicked","disabled","is-loading"])]),_:1},8,["onClose"])}const He=w(xe,[["render",Ge]]),Xe={data(){return{trustedDomains:[]}},created(){this.loadTrustedDomains()},methods:{async loadTrustedDomains(){this.trustedDomains=await Y()},async onAddTrustedDomainClicked(){(await this.$modal.show("addTrustedDomainsModal")).type=="saved"&&this.loadTrustedDomains()},async deleteDomain(e){await R({headerText:" ",title:`Remove ${e.email_domain}`,markupDescription:"*Note.* Any users that have already been onboarded for this domain need to be *manually* archived in Aikido.",buttonSubmitText:"Remove Domain"})&&(await G(e.id),this.loadTrustedDomains())}}},Ze={class:"flex flex-column"},je=t("i",{class:"icon icon-add icon-12px"},null,-1);function Qe(e,o,b,x,i,n){const u=l("BaseParagraph"),f=l("BaseIcon"),p=l("BaseButton");return c(),d("div",Ze,[a(u,{size:"medium"},{default:s(()=>[r("Trusted Domains")]),_:1}),(c(!0),d(v,null,H(i.trustedDomains,(_,y)=>(c(),g(u,{key:_.id,truncate:!0,color:"subdued",class:T(["py-8px flex justify-between",{"border-b-carbon-20":y!=i.trustedDomains.length-1}])},{default:s(()=>[t("span",null,h(_.email_domain),1),a(f,{icon:"icon-delete",class:"cursor-pointer text-carbon-40 hover_text-danger",onClick:k=>n.deleteDomain(_)},null,8,["onClick"])]),_:2},1032,["class"]))),128)),a(p,{onClicked:n.onAddTrustedDomainClicked,size:"small",variation:"tertiary",class:"mt-8px"},{default:s(()=>[je,r(" Add trusted domain ")]),_:1},8,["onClicked"])])}const Je=w(Xe,[["render",Qe]]),Ke={data(){return{samlSettings:null,loaded:!1}},async created(){await this.loadSettings(),this.loaded=!0},computed:{subtitle(){return this.samlSettings==null?"SAML authentication is *disabled*":this.samlSettings.allow_auto_onboarding?"Auto-onboarding is *enabled*.":"Auto-onboarding is *disabled*."}},methods:{async loadSettings(){this.samlSettings=await de()},async startEnableSamlFlow(){await this.$modal.show("setupSamlModal"),this.loadSettings()},async manageSamlAuthentication(){await this.$modal.show("manageSamlModal",{samlSettings:this.samlSettings}),this.loadSettings()},copySingleSignOnUrl(){const e=this.samlSettings.single_sign_on_url;window.isSecureContext?(navigator.clipboard.writeText(e),this.$toast.success("SSO login link copied to clipboard")):console.log(e)}}},et={key:0,class:"flex flex-column gap-4px"},tt={key:1,class:"mt-8px flex align-center gap-16px"},nt=t("i",{class:"icon icon-12px icon-settings"},null,-1);function at(e,o,b,x,i,n){const u=l("BaseParagraph"),f=l("BaseButton"),p=l("BaseLink"),_=X("markup");return i.loaded?(c(),d("div",et,[a(u,{size:"medium"},{default:s(()=>[r("SAML Authentication")]),_:1}),a(u,{truncate:!0,color:"subdued"},{default:s(()=>[Z(t("span",null,null,512),[[_,n.subtitle]])]),_:1}),i.samlSettings==null?(c(),g(f,{key:0,onClicked:n.startEnableSamlFlow,size:"small",variation:"tertiary",class:"mt-8px"},{default:s(()=>[r(" Enable SAML Authentication ")]),_:1},8,["onClicked"])):(c(),d("div",tt,[a(f,{onClicked:n.manageSamlAuthentication,size:"small",variation:"tertiary"},{default:s(()=>[nt,r(" Manage SAML Authentication ")]),_:1},8,["onClicked"]),i.samlSettings.single_sign_on_url?(c(),g(p,{key:0,class:"text-carbon-60",onClick:n.copySingleSignOnUrl},{default:s(()=>[r(" Copy Login link ")]),_:1},8,["onClick"])):m("",!0)]))])):m("",!0)}const st=w(Ke,[["render",at]]),ot={components:{BaseModal:F,InputText:j,BaseButton:P,BaseIcon:I},emits:["close","submit"],data(){return{confirmDeletionText:""}},computed:{workspaceName(){return this.$group.name},titleText(){return`Are you sure you want to delete ${this.workspaceName}?`},description(){return`Once you delete '${this.workspaceName}', all data will be lost and users will be unable to access the workspace.`},canDeleteWorkspace(){return this.confirmDeletionText==this.workspaceName}},methods:{handleClose(){this.$emit("close")},async handleDeleteWorkspace(){this.canDeleteWorkspace&&(await Q(),this.$toast.success({title:"Workspace successfully deleted",description:"Your workspace is successfully deleted. You will now be redirected."}),this.$emit("submit"),J.logOut())}}},it={class:"modal-description mt-8px text-14px text-primary-aik-140"},rt={class:"flex flex-column gap-16px"},lt=t("div",{class:"modal-description mt-8px text-14px text-primary-aik-140"},"Please type the workspace name to confirm delete.",-1),ct=t("span",null,"Delete Workspace",-1);function ut(e,o,b,x,i,n){const u=l("BaseParagraph"),f=l("BaseHeading"),p=l("InputText"),_=l("BaseButton"),y=l("BaseIcon"),k=l("BaseModal");return c(),g(k,{width:600,onClose:n.handleClose},{header:s(()=>[t("div",null,[a(u,{class:"mb-24px"},{default:s(()=>[r("Confirm Workspace Deletion")]),_:1}),a(f,{as:"h4"},{default:s(()=>[r(h(n.titleText),1)]),_:1}),t("div",it,h(n.description),1)])]),content:s(()=>[t("div",rt,[lt,a(p,{modelValue:i.confirmDeletionText,"onUpdate:modelValue":o[0]||(o[0]=S=>i.confirmDeletionText=S),placeholder:"Your workspace name"},null,8,["modelValue"])])]),footer:s(()=>[a(_,{variation:"plain",onClick:n.handleClose,class:"ml-auto"},{default:s(()=>[r("Cancel")]),_:1},8,["onClick"]),a(_,{variation:"destructive",disabled:!n.canDeleteWorkspace,onClick:n.handleDeleteWorkspace},{default:s(()=>[a(y,{icon:"icon-delete"}),ct]),_:1},8,["disabled","onClick"])]),_:1},8,["onClose"])}const dt=w(ot,[["render",ut]]),pt={components:{BaseCard:L,BaseButton:P,BaseIcon:I,WorkspaceDeletionModal:dt},data(){return{showWorkspaceDeletionModal:!1}}},ht={class:"flex justify-between"},mt={class:"flex flex-column gap-4px"},_t=t("span",null,"Delete Workspace",-1);function ft(e,o,b,x,i,n){const u=l("BaseParagraph"),f=l("BaseIcon"),p=l("BaseButton"),_=l("WorkspaceDeletionModal"),y=l("BaseCard");return c(),g(y,{title:"Danger Zone",class:"flex-1"},{default:s(()=>[t("div",ht,[t("div",mt,[a(u,{size:"medium"},{default:s(()=>[r("Delete Workspace")]),_:1}),a(u,{truncate:!0,color:"subdued"},{default:s(()=>[r("Remove workspace and access for all users.")]),_:1})]),a(p,{variation:"tertiary",onClick:o[0]||(o[0]=k=>i.showWorkspaceDeletionModal=!0)},{default:s(()=>[a(f,{icon:"icon-delete",color:"#737283",class:"mb-2px"}),_t]),_:1})]),i.showWorkspaceDeletionModal?(c(),g(_,{key:0,onClose:o[1]||(o[1]=k=>i.showWorkspaceDeletionModal=!1),onSubmit:o[2]||(o[2]=k=>i.showWorkspaceDeletionModal=!1)})):m("",!0)]),_:1})}const gt=w(pt,[["render",ft]]),yt={components:{ScanFrequencySettingModal:pe},data(){return{scanFrequency:null,isLoading:!1,showScanFrequencySettingModal:!1}},async mounted(){this.isLoading=!0,await this.loadScanFrequency(),this.isLoading=!1},computed:{scanFrequencyText(){switch(this.scanFrequency){case"daily":return"every day";case"3days":return"every 3 days";case"weekly":return"every week";case"monthly":return"every month";default:return""}},scanFrequencyOptions(){const e={id:"daily",title:"Daily"};return U.hasExpiredFullTrial()&&(e.tag="Paid Plans Only",e.disabled=!0),[e,{id:"3days",title:"Every 3 days"},{id:"weekly",title:"Weekly"},{id:"monthly",title:"Monthly"}]}},methods:{async loadScanFrequency(){await M.fetchScanFrequency(),this.scanFrequency=M.data.scanFrequency},async handleEditScanFrequency(e){await K(e),await this.loadScanFrequency(),this.showScanFrequencySettingModal=!1,this.$toast.success("Successfully updated your workspace's scan frequency")}}},xt={class:"min-h-100px"},kt={class:"flex flex-column gap-8px mb-16px"},bt={class:"text--semi-bold"},St=t("span",{class:"text--semi-bold"},"Change Scanning Frequency",-1);function vt(e,o,b,x,i,n){const u=l("XPreloader"),f=l("BaseParagraph"),p=l("BaseButton"),_=l("ScanFrequencySettingModal");return c(),d("div",xt,[i.isLoading?(c(),g(u,{key:0,class:"absolute-centered",size:"medium"})):(c(),d(v,{key:1},[t("div",kt,[a(f,{size:"medium"},{default:s(()=>[r("Scanning Frequency")]),_:1}),a(f,{color:"subdued",size:"small"},{default:s(()=>[r(" Aikido will automatically execute a scan "),t("span",bt,h(n.scanFrequencyText),1),r(". ")]),_:1})]),a(p,{variation:"plain",size:"small",onClick:o[0]||(o[0]=y=>i.showScanFrequencySettingModal=!0)},{default:s(()=>[St]),_:1})],64)),i.showScanFrequencySettingModal?(c(),g(_,{key:2,scanFrequencyOptions:n.scanFrequencyOptions,initialScanFrequency:i.scanFrequency,onClose:o[1]||(o[1]=y=>i.showScanFrequencySettingModal=!1),onSubmit:n.handleEditScanFrequency},null,8,["scanFrequencyOptions","initialScanFrequency","onSubmit"])):m("",!0)])}const wt=w(yt,[["render",vt]]);async function Bt(){return(await ee.get("/api/integrations/selfscan/latestVersion")).data}const Pt={components:{BaseButton:P,BaseParagraph:C,LoadingSkeleton:te,BaseCard:L,InputSwitch:ne,UpgradeAccountModal:He,TrustedDomainsSection:Je,SamlSection:st,SelfScannerSection:ye,BaseIcon:I,AccountDangerZoneSection:gt,AccountScanningFrequencySection:wt,XTooltip:ae},data(){return{showUpgradeModal:!1,subscriptionPortalAccessUrl:void 0,subscription:void 0,group:U.data.group,plan:this.$route.query.plan??"",selfscan_version:null,loaded:!1}},async mounted(){this.$route.query.upgrade&&this.$group.is_demo_group!=1&&this.openUpgradeModal()},async created(){var e;this.accountIsProPlan&&await Promise.allSettled([this.getSubscriptionPortalAccessUrl(),this.getSubscriptionInfo()]),((e=this.$group)==null?void 0:e.scm_type)==="selfscan"&&await this.getLatestSelfScannerVersion(),this.loaded=!0},computed:{accountIsStarterPlan(){return this.$group.plan==="free"},accountIsProTrial(){return this.$group.plan==="pro_trial"},accountIsProPlan(){return!this.accountIsStarterPlan&&!this.accountIsProTrial},planName(){return this.$t(`PLAN_TYPE_${this.$group.plan}`)},planIcon(){return["free","pro_trial","standard"].includes(this.$group.plan)?"icon-starter":"icon-pro"},daysLeftInProTrial(){return he(q.fromUnix(U.data.group.full_trial_until).date,q.now().date)||0},subscriptionPricingInfo(){if(!this.subscription)return"";const{period_unit:e}=this.subscription;return e==="month"?"monthly":e==="year"?"yearly":e},upgradeAccountText(){return this.plan==="startup"||this.plan==="startup-50"?"Upgrade to Startup Plan":this.plan==="solo"?"Upgrade to Single Developer Plan":"Upgrade plan"},accountType(){var e,o;switch((e=this.$group)==null?void 0:e.scm_type){case"github":return"GitHub";case"gitlab":return"GitLab";case"gitlab_server":return"GitLab self-managed";case"bitbucket":return"Bitbucket";case"azure_devops":return"Azure DevOps Server";case"selfscan":return"Local Scan";default:return(o=this.$group)==null?void 0:o.scm_type}},shouldShowUpdatePATButton(){var o;return this.$groupUser.admin?["gitlab_server","azure_devops"].includes((o=this.$group)==null?void 0:o.scm_type):!1},canManageBilling(){return!(!this.$featureflags.is_chargebee_enabled&&this.$group.partner_id!=1||!this.accountIsProPlan||!this.subscription)},shouldShowDangerZoneSection(){return se()!="production"?this.$groupUser.admin:this.$group.partner_id==1?this.$user.is_support_user||this.$group.is_demo_group:this.$groupUser.admin},manageBillingUrl(){return this.$groupUser.admin?this.subscriptionPortalAccessUrl:""}},methods:{async openUpgradeModal(){if(this.$group.partner_id!=1){D("partner_upgrade_modal_opened"),z({currency:"EUR",plan:"aikido-pro-monthly"});const e=oe({headerText:"Upgrade your workspace",title:"You want to secure your company? Awesome!",description:"",buttonSubmitText:"Ok",isLoading:!0});this.$modal.show("InfoModal",e);const o=await ie();e.description=`Please contact ${o.name} to upgrade your account.`,e.isLoading=!1}else this.showUpgradeModal=!0},async handleUpgradeAccount(){if(this.$group.is_demo_group===1)return this.$modal.show("AddWorkspaceRedirectModal");this.openUpgradeModal()},async getSubscriptionInfo(){const e=await le({disable_toasts:!0});this.subscription=e},async getSubscriptionPortalAccessUrl(){const{url:e}=await ce({disable_toasts:!0});this.subscriptionPortalAccessUrl=e},editProfileClicked(){this.$modal.show("UpdateGroupNameModal")},handleUpgradePAT(){var e;switch((e=this.$group)==null?void 0:e.scm_type){case"gitlab_server":return this.$router.push("/onboarding/gitlab-server/update-server");case"azure_devops":return this.$router.push("/onboarding/azure/update-server")}},async getLatestSelfScannerVersion(){const e=await Bt();this.selfscan_version=e.latest_selfscan_version}}},Tt={class:"account__info tablet_flex-col gap-24px"},Ut={class:"flex flex-column flex-1 align-self-baseline gap-24px"},$t={class:"flex flex-column gap-24px"},Dt={class:"flex flex-column gap-4px"},Ct={class:"flex gap-8px align-center"},It={key:0,class:"flex flex-column gap-4px"},At={key:0},Mt={key:0,class:"mt-8px"},qt=t("i",{class:"icon icon-refresh icon-12px"},null,-1),Ft={key:0,class:"flex flex-column align-self-baseline flex-1 gap-24px"},zt={class:"flex flex-column gap-32px"},Lt={class:"flex flex-column gap-8px"},Ot={class:"flex align-center gap-8px"},Wt={key:0,class:"status-tag blue"},Vt={key:1,class:"status-tag purple-rich"},Et=t("button",{class:"intercomLaunch link inline-link"},"talk to us",-1),Nt=t("button",{class:"intercomLaunch link inline-link"},"a quick chat",-1),Yt={class:"flex gap-8px"},Rt=t("i",{class:"icon icon-pro icon-12px"},null,-1),Gt=t("a",{class:"button button-brand button--small button--tertiary button--rounded",href:"https://calendly.com/aikido-roeland/talk-to-human",target:"_blank"}," Talk to a human ",-1),Ht=t("button",{class:"intercomLaunch link inline-link"},"contact us",-1),Xt=t("button",{class:"intercomLaunch link inline-link"},"a quick chat",-1),Zt={class:"flex gap-8px"},jt=t("i",{class:"icon icon-pro icon-12px"},null,-1),Qt=t("a",{class:"button button-brand button--small button--tertiary button--rounded",href:"https://calendly.com/aikido-roeland/talk-to-human",target:"_blank"}," Talk to a human ",-1),Jt=["disabled","href"],Kt=t("i",{class:"icon icon-edit icon-10px"},null,-1),en={key:4,class:"h-32px"},tn={class:"flex flex-column gap-24px"};function nn(e,o,b,x,i,n){const u=l("BaseParagraph"),f=l("BaseIcon"),p=l("BaseButton"),_=l("SelfScannerSection"),y=l("TrustedDomainsSection"),k=l("SamlSection"),S=l("BaseCard"),$=l("AccountDangerZoneSection"),B=l("XTooltip"),A=l("LoadingSkeleton"),O=l("AccountScanningFrequencySection"),W=l("UpgradeAccountModal");return c(),d(v,null,[t("div",Tt,[t("div",Ut,[a(S,{title:"Workspace Info",class:"flex-1"},{default:s(()=>[t("div",$t,[t("div",Dt,[t("div",Ct,[a(u,{size:"medium"},{default:s(()=>[r("Name")]),_:1}),a(f,{icon:"icon-edit",size:12,class:"text-primary-aik-140 cursor-pointer",onClick:n.editProfileClicked},null,8,["onClick"])]),a(u,{truncate:!0,color:"subdued"},{default:s(()=>[r(h(e.$group.name),1)]),_:1})]),n.accountType?(c(),d("div",It,[a(u,{size:"medium"},{default:s(()=>[r("Account type")]),_:1}),a(u,{truncate:!0,color:"subdued"},{default:s(()=>[r(h(n.accountType)+" ",1),i.selfscan_version?(c(),d("span",At,"· Last used version: "+h(i.selfscan_version),1)):m("",!0)]),_:1}),n.shouldShowUpdatePATButton?(c(),d("div",Mt,[a(p,{onClicked:n.handleUpgradePAT,size:"small",variation:"tertiary"},{default:s(()=>[qt,r(" Update Personal Access Token ")]),_:1},8,["onClicked"])])):m("",!0),a(_)])):m("",!0),!e.$featureflags.saml_enabled&&["gitlab_server","azure_devops"].includes(e.$group.scm_type)?(c(),g(y,{key:1})):m("",!0),e.$featureflags.saml_enabled&&e.$groupUser.admin?(c(),g(k,{key:2})):m("",!0)])]),_:1}),n.shouldShowDangerZoneSection?(c(),g($,{key:0})):m("",!0)]),this.$groupUser.can_access_settings?(c(),d("div",Ft,[a(S,{title:"Workspace Plan",class:"flex-1"},{default:s(()=>[t("div",zt,[t("div",Lt,[t("div",Ot,[a(u,{size:"medium"},{default:s(()=>[r("Workspace Plan")]),_:1}),n.accountIsStarterPlan?(c(),d("span",Wt,[t("i",{class:T(["icon icon-10px mr-8px",n.planIcon])},null,2),r(" "+h(n.planName),1)])):(c(),d("span",Vt,[t("i",{class:T(["icon icon-10px mr-8px",n.planIcon])},null,2),r(" "+h(n.planName),1)]))]),n.accountIsStarterPlan?(c(),d(v,{key:0},[a(u,{size:"small",color:"subdued"},{default:s(()=>[r(" Your workspace is currently on the free plan. You can upgrade your plan below or "),Et,r(" about a full featured free trial. ")]),_:1}),a(u,{size:"small",color:"subdued"},{default:s(()=>[r(" Early-stage startup? We got you! Send us "),Nt,r(" to get started on a discounted plan. ")]),_:1}),t("div",Yt,[a(p,{onClicked:n.handleUpgradeAccount,size:"small"},{default:s(()=>[Rt,r(" "+h(n.upgradeAccountText),1)]),_:1},8,["onClicked"]),Gt])],64)):n.accountIsProTrial?(c(),d(v,{key:1},[a(u,{size:"small",color:"subdued"},{default:s(()=>[r(" You have "+h(n.daysLeftInProTrial)+" days left on Aikido's full featured free trial. If you want to extend your time please ",1),Ht,r(" through chat in the bottom right. If you're ready to upgrade please use the button below. ")]),_:1}),a(u,{size:"small",color:"subdued"},{default:s(()=>[r(" Early-stage startup? We got you! Send us "),Xt,r(" to get started on a discounted plan. ")]),_:1}),t("div",Zt,[a(p,{onClicked:n.handleUpgradeAccount,size:"small"},{default:s(()=>[jt,r(" "+h(n.upgradeAccountText),1)]),_:1},8,["onClicked"]),Qt])],64)):n.canManageBilling?(c(),d(v,{key:2},[a(u,{size:"small",color:"subdued"},{default:s(()=>[r(" Your workspace is on the "+h(n.subscriptionPricingInfo)+" "+h(n.planName.toLowerCase())+". To edit your plan, see your invoices and edit billing information you can edit below. ",1)]),_:1}),t("a",{class:T(["button button-brand button--small button--tertiary button--rounded",{"cursor-not-allowed opacity-70":!e.$groupUser.admin}]),disabled:!e.$groupUser.admin,href:n.manageBillingUrl},[r(" Manage billing "),Kt,e.$groupUser.admin?m("",!0):(c(),g(B,{key:0},{default:s(()=>[r("Your profile does not have access to billing, contact your workspace admin.")]),_:1}))],10,Jt)],64)):i.loaded?(c(),d("div",en,[a(u,{size:"small",color:"subdued"},{default:s(()=>[r(" Your workspace is on the "+h(n.subscriptionPricingInfo)+" "+h(n.planName.toLowerCase())+". ",1)]),_:1})])):(c(),d(v,{key:3},[a(A,{height:"16px"}),a(A,{height:"16px",width:"64px"})],64))])])]),_:1}),e.$groupUser.admin&&e.$group.scm_type!="selfscan"?(c(),g(S,{key:0,title:"Advanced",class:"flex-1"},{default:s(()=>[t("div",tn,[a(O)])]),_:1})):m("",!0)])):m("",!0)]),i.showUpgradeModal?(c(),g(W,{key:0,onCancel:o[0]||(o[0]=an=>this.showUpgradeModal=!1)})):m("",!0)],64)}const pn=w(Pt,[["render",nn]]);export{pn as default};
