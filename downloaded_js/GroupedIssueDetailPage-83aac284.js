import{_ as y,e as T,an as a,d0 as N,r as o,m,o as n,w as l,n as I,U as G,aQ as O,k as c,p as d,F as h,q as i,s as F}from"./index-13ff96f4.js";import{I as v,S as D,N as E,T as B,E as P,i as V}from"./SidebarActionMenu-1bf6804b.js";import{P as q}from"./PageHeader-46c38a32.js";import{X as z}from"./XTabs-d492da26.js";import{F as X}from"./FilterButton-bb5393a7.js";import"./CreateAutoFixProgressFlow-8111d22c.js";import"./RadioButtonList-1d4cdaad.js";import"./EnableIntegrationModal-48b01f56.js";import"./focusModePreference-150f170e.js";import"./TableListHeader-e50d01d1.js";import"./DataTable-e31a825a.js";import"./ActionMenu-3e4470bf.js";import"./BaseRadioInput-a7ac3557.js";import"./BaseLabel-a1c0ca00.js";import"./AIText-891d4f7b.js";import"./InputCheckbox-81cb3ca6.js";import"./BreakSlashes-925eef0e.js";import"./UnignoreIssue-5dff8957.js";import"./CreateTicketModal-c14deeb1.js";import"./ManualInputSearchDropdown-6a7ece3e.js";import"./InputSearchDropdown-02988f6b.js";import"./repoName-872812ed.js";import"./taskTrackerNaming-55adac3e.js";import"./taskTrackerIcon-504ea566.js";import"./autofixable-c6560249.js";import"./autofixSastIssues-779ec5b4.js";import"./index-b87db690.js";import"./dateFns-a344cb79.js";import"./lock-files-cdbb050f.js";import"./BaseCodeBlock-cec75629.js";import"./string-814c5ffd.js";import"./ButtonMultiOption-12e505fb.js";import"./transform-c376ec3f.js";import"./linear-efb37b7f.js";import"./arc-12e4470a.js";import"./BaseForm-4c6fa06f.js";import"./BaseCard-471d3203.js";import"./AccordionContainer-09dc0ed4.js";import"./trycatch-83445d5b.js";import"./licenses-6ab38515.js";const A={components:{PageHeader:q,IssueGroupDetail:v,SidebarActionMenu:D,BaseIconButton:T,XTabs:z,NoteTimelineForIssueGroup:E,TasksForGroupedIssueSection:B,EducationSection:P,FilterButton:X},data(){return{groupedIssueId:this.$route.params.groupedIssueId,groupedIssue:null,status:this.$route.query.status??null,tab:"overview",noteCount:0,taskCount:0}},provide(){return{theme:"light"}},async mounted(){a.on("noteCreated",this.handleNoteCreated),a.on("taskCreated",this.handleTaskCreated),await Promise.all([this.loadNoteCount(),this.loadTaskCount()])},unmounted(){a.off("noteCreated",this.handleNoteCreated),a.off("taskCreated",this.handleTaskCreated)},computed:{tabs(){const e=this.noteCount??0,s=this.taskCount??0,p=[{title:"Overview",id:"overview"},{title:e===0?"Notes":`Notes (${this.noteCount})`,id:"notes"},{title:s===0?"Tasks":`Tasks (${s})`,id:"tasks"}];return this.hasEducationSection&&p.push({title:"Education",id:"education"}),p},breadcrumbs(){return[{label:"Issues",href:"/queue"},{label:this.packageName}]},pageTitle(){return this.packageName},pageSubtitle(){if(!this.groupedIssue)return"";const e=this.groupedIssue.issues.filter(s=>s.status=="open").length;return e==0?"":this.$t("X_OPEN_SUBISSUES",e)},packageName(){var e;return(e=this.groupedIssue)==null?void 0:e.package_name},forStatus(){return this.status??"open"},statusFilteredSubIssues(){return this.groupedIssue?this.groupedIssue.issues.filter(e=>e.status==this.forStatus):[]},hasEducationSection(){return this.statusFilteredSubIssues.filter(e=>e.scw_info).length>0}},methods:{async loadNoteCount(){const e=await V(this.groupedIssueId);this.noteCount=e.note_count},async loadTaskCount(){this.taskCount=await N(this.groupedIssueId)},async handleNoteCreated(e){(!e||e.issueGroupId==this.groupedIssueId)&&await this.loadNoteCount()},async handleTaskCreated(e){(!e||e.issueGroupId==this.groupedIssueId)&&await this.loadTaskCount()},reloadGroupedIssue(){this.$refs.IssueGroupDetail.loadIssueDetail()}}},R=I("i",{class:"icon icon-caret_down icon-12px"},null,-1),U={class:"page-content relative"};function x(e,s,p,H,t,r){const g=o("FilterButton"),b=o("SidebarActionMenu"),C=o("XTabs"),k=o("PageHeader"),f=o("IssueGroupDetail"),S=o("NoteTimelineForIssueGroup"),w=o("TasksForGroupedIssueSection"),_=o("EducationSection");return i(),m(h,null,[n(k,{breadcrumbs:r.breadcrumbs,title:r.pageTitle,subtitle:r.pageSubtitle},{footerRightContent:l(()=>[n(b,{"issue-group":t.groupedIssue},{trigger:l(u=>[n(g,{onClick:()=>u.toggle()},{default:l(()=>[F(" Actions "),R]),_:2},1032,["onClick"])]),_:1},8,["issue-group"])]),tabs:l(()=>[n(C,{tabs:r.tabs,modelValue:t.tab,"onUpdate:modelValue":s[0]||(s[0]=u=>t.tab=u),class:"page-tabs",theme:"light"},null,8,["tabs","modelValue"])]),_:1},8,["breadcrumbs","title","subtitle"]),I("div",U,[G(n(f,{ref:"IssueGroupDetail",groupedIssueId:t.groupedIssueId,showClosedOnly:t.status==="closed",showSnoozedOnly:t.status==="snoozed",showIgnoredOnly:t.status==="ignored",isDetailPage:!0,onGroupedIssueLoaded:s[1]||(s[1]=u=>t.groupedIssue=u),onRequestOpenEducationSection:s[2]||(s[2]=u=>t.tab="education")},null,8,["groupedIssueId","showClosedOnly","showSnoozedOnly","showIgnoredOnly"]),[[O,t.tab==="overview"]]),t.tab==="notes"?(i(),c(S,{key:0,"issue-group":t.groupedIssue,class:"min-h-full"},null,8,["issue-group"])):d("",!0),t.tab==="tasks"?(i(),c(w,{key:1,groupedIssue:t.groupedIssue,isDetailPage:!0,class:"min-h-full",onRequestDataFetch:r.reloadGroupedIssue},null,8,["groupedIssue","onRequestDataFetch"])):d("",!0),t.tab==="education"?(i(),m(h,{key:2},[r.hasEducationSection?(i(),c(_,{key:0,class:"grid-cols-2",groupedIssue:t.groupedIssue,showClosedOnly:e.showClosedOnly,showSnoozedOnly:e.showSnoozedOnly,showIgnoredOnly:e.showIgnoredOnly},null,8,["groupedIssue","showClosedOnly","showSnoozedOnly","showIgnoredOnly"])):d("",!0)],64)):d("",!0)])],64)}const ve=y(A,[["render",x]]);export{ve as default};
