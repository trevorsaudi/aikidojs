import{_ as x,M as C,B as v,f as y,H as M,bk as w,d as S,g as I,Z as P,aE as G,ak as L,r as t,q as R,k as H,w as a,o as e,n as l,s,a as u}from"./index-13ff96f4.js";import{B as V}from"./BaseLabel-a1c0ca00.js";import{B as N}from"./BaseRadioInput-a7ac3557.js";const O={emits:["close"],props:{show:Boolean},data(){return{kind:"gitlab_checks",isSaving:!1}},components:{BaseModal:C,BaseParagraph:v,BaseButton:y,BaseHeading:M,BaseLabel:V,BaseBody:w,BaseRadioInput:N,BasePill:S,BaseLink:I},methods:{handleClose(){this.$emit("close")},handleSelectOption(n){this.kind=n},handleConfirm(){this.isSaving=!0,this.kind==="gitlab_checks"?this.handleInstallGitlabChecks():this.handleInstallGitlabPipelines(),this.handleClose()},handleInstallGitlabPipelines(){this.$router.push("/settings/integrations/continuous-integration")},handleInstallGitlabChecks(){var c;if(P.data.gitlabChecks)return this.$router.push("/settings/integrations/gitlab/checks");if(((c=this.$group)==null?void 0:c.scm_type)==="gitlab_server")return go("/settings/integrations/gitlab/checks/personal-access-token");let n="a2b39b5cb9cfd607d53301446d43111c46ef0d9300d4168aac34acb0ab636f5b",i="http://app.local.aikido.io/settings/integrations/gitlab/checks/callback";u()==="staging"?(n="f3b85c2286b3fe55f5e07e21568a96227676ec41a3cd65d2d072bb2098204a68",i="https://app.test.aikido.dev/settings/integrations/gitlab/checks/callback"):u()==="production"&&(n="b3d1e6a9c7d2988114cd4ffd3de33308ad726cf51f81eb8d38293f6fc45c0395",i="https://app.aikido.dev/settings/integrations/gitlab/checks/callback");const r={state:G("gitlab-pr-checks"),client_id:n,redirect_uri:i,response_type:"code",scope:"api"};window.location=`https://gitlab.com/oauth/authorize?${L(r)}`}}},T={class:"relative flex flex-column gap-12px"},j={for:"gitlab_checks",class:"flex justify-between align-center py-16px px-8px gap-8px border-bottom-1 border-carbon-20 cursor-pointer"},q={class:"flex flex-column max-w-full gap-4px"},D={class:"flex gap-8px align-center"},U={for:"gitlab_pipelines",class:"flex justify-between align-center py-16px px-8px gap-8px cursor-pointer"},z={class:"flex flex-column max-w-full gap-4px"};function A(n,i,r,c,d,o){const _=t("BaseParagraph"),k=t("BaseHeading"),p=t("BaseBody"),m=t("BasePill"),g=t("BaseLink"),h=t("BaseLabel"),b=t("BaseRadioInput"),f=t("BaseButton"),B=t("BaseModal");return R(),H(B,{width:600,onClose:o.handleClose},{header:a(()=>[e(_)]),content:a(()=>[l("div",T,[e(k,{as:"h3"},{default:a(()=>[s("Choose MR Gating Method for Gitlab")]),_:1}),l("label",j,[l("div",q,[l("div",D,[e(p,{loose:!0,bold:"",class:"flex align-center gap-8px"},{default:a(()=>[s("Manage MR gating configuration via Aikido dashboard")]),_:1}),e(m,{title:"Recommended",variation:"purple"})]),e(h,{color:"gray",class:"text-break-all"},{default:a(()=>[s(" Configure all checks in bulk without any code. Does not consume CI minutes. "),e(g,{class:"block text--normal text-inherit",target:"_blank",href:"https://help.aikido.dev/doc/gitlab-ci-mr-gating-via-aikido-dashboard/doc1D0CU6aaW"},{default:a(()=>[s("More info")]),_:1})]),_:1})]),e(b,{name:"kind",id:"gitlab_checks",value:"gitlab_checks",checked:d.kind==="gitlab_checks",onSelect:i[0]||(i[0]=()=>o.handleSelectOption("gitlab_checks"))},null,8,["checked"])]),l("label",U,[l("div",z,[e(p,{loose:!0,bold:"",class:"flex align-center gap-8px"},{default:a(()=>[s("Manage MR gating via Gitlab Pipelines in code")]),_:1}),e(h,{color:"gray",class:"text-break-all"},{default:a(()=>[s(" Set up each repository individually via code. Consumes CI minutes in Gitlab Pipelines. "),e(g,{class:"block text--normal text-inherit",target:"_blank",href:"https://help.aikido.dev/doc/gitlab-ci-setting-up-gating-for-merge-requests/doco2l9FLm2k"},{default:a(()=>[s("More info")]),_:1})]),_:1})]),e(b,{name:"kind",id:"gitlab_pipelines",value:"gitlab_pipelines",checked:d.kind==="gitlab_pipelines",onSelect:i[1]||(i[1]=()=>o.handleSelectOption("gitlab_pipelines"))},null,8,["checked"])])])]),footer:a(()=>[e(f,{onClicked:o.handleClose,variation:"tertiary",class:"ml-auto"},{default:a(()=>[s(" Cancel ")]),_:1},8,["onClicked"]),e(f,{onClicked:o.handleConfirm,"is-loading":d.isSaving},{default:a(()=>[s(" Continue ")]),_:1},8,["onClicked","is-loading"])]),_:1},8,["onClose"])}const Z=x(O,[["render",A]]);export{Z as default};
