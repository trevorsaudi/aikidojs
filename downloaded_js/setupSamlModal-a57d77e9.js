import{_ as c,au as f,V as y,cF as h,r as s,q as a,k as S,w as x,m as r,o as l,p as C,n as b}from"./index-13ff96f4.js";import{c as g,l as I}from"./saml-386d5734.js";const V={emits:["close","saved"],components:{BaseConfirmModal:f,InputText:y,InputTextArea:h},data(){return{step:1,entityId:"",singleSignOnUrl:"",certificate:"",domain:"",loaded:!1,samlClientId:null}},async mounted(){this.samlClientId=await g(),this.loaded=!0},computed:{description(){return this.step==1?"Copy following details to your identity provider.":this.step==2?"Fill in details provided by the identity provider.":""},btnSubmitText(){return this.step==2?"Finish":"Next"},btnSecondaryText(){return this.step==2?"Back":"Cancel"}},methods:{async onSubmitClicked(){this.step==1?this.step=2:(await I({single_sign_on_url:this.singleSignOnUrl,certificate:this.certificate,entity_id:this.entityId,domain:this.domain}),this.$toast.success("SAML authentication settings saved"),this.$emit("saved"))},onSecondaryButtonClicked(){this.step==2?this.step=1:this.$emit("close")}}},_={key:0,class:"h-104px relative"},k={key:1,class:"flex flex-column gap-16px"},v={key:2,class:"flex flex-column gap-16px"},T=b("hr",{class:"divider w-full"},null,-1);function B(d,t,U,A,e,o){const u=s("XPreloader"),n=s("InputText"),m=s("InputTextArea"),p=s("BaseConfirmModal");return a(),S(p,{width:600,headerText:" ",title:"Setup SAML Authentication",description:o.description,buttonSubmitText:o.btnSubmitText,buttonSecondaryText:o.btnSecondaryText,onSubmit:o.onSubmitClicked,onClose:t[4]||(t[4]=i=>d.$emit("close")),onSecondaryButtonClicked:o.onSecondaryButtonClicked,allowBackgroundClose:!1},{default:x(()=>[e.loaded?e.step==1?(a(),r("div",k,[l(n,{copyable:!0,disabled:!0,readonly:!0,inputClass:"cursor-default",title:"Single Sign-On URL / ACS URL",modelValue:`https://app.aikido.dev/api/saml/saml_auth?samlClientId=${e.samlClientId}`},null,8,["modelValue"]),l(n,{copyable:!0,disabled:!0,readonly:!0,inputClass:"cursor-default",title:"Audience URI / Entity ID",modelValue:"https://app.aikido.dev/saml"}),l(n,{copyable:!0,disabled:!0,readonly:!0,inputClass:"cursor-default",title:"Name ID Format",modelValue:"EmailAddress"})])):e.step==2?(a(),r("div",v,[l(n,{required:!0,title:"Entity ID / Issuer",placeholder:"https://idp.example.com/xyz",modelValue:e.entityId,"onUpdate:modelValue":t[0]||(t[0]=i=>e.entityId=i)},null,8,["modelValue"]),l(n,{required:!0,title:"Single Sign-On URL",placeholder:"https://idp.example.com/sso/saml",modelValue:e.singleSignOnUrl,"onUpdate:modelValue":t[1]||(t[1]=i=>e.singleSignOnUrl=i)},null,8,["modelValue"]),l(m,{required:!0,allowResize:!0,title:"X.509 Certificate",placeholder:"Certificate",modelValue:e.certificate,"onUpdate:modelValue":t[2]||(t[2]=i=>e.certificate=i)},null,8,["modelValue"]),T,l(n,{required:!0,title:"Company Domain",subtitle:"This field is not given by the identity provider. It allows for SAML login without the SSO URL.",placeholder:"company.com",modelValue:e.domain,"onUpdate:modelValue":t[3]||(t[3]=i=>e.domain=i)},null,8,["modelValue"])])):C("",!0):(a(),r("div",_,[l(u,{class:"absolute-centered",size:"medium"})]))]),_:1},8,["description","buttonSubmitText","buttonSecondaryText","onSubmit","onSecondaryButtonClicked"])}const M=c(V,[["render",B]]);export{M as default};
