import{_ as h,r as n,q as c,m,F as C,t as v,k as f,w as i,o as r,s as g,u as l,n as k,du as w,H as L,f as S,Z as _,aB as N,aC as x}from"./index-13ff96f4.js";import{a as y}from"./taskTrackerIcon-504ea566.js";import{A as R}from"./vault-js.esm-b0648a80.js";const $={props:{links:{type:Array,required:!0}}},b=k("i",{class:"icon icon-caret_right paragraph--medium paragraph--bold text-primary-aik-140 opacity-0 group_hover_opacity-100 transition-opacity"},null,-1);function E(e,t,a,I,T,s){const u=n("BaseParagraph"),d=n("RouterLink");return c(),m("div",null,[(c(!0),m(C,null,v(a.links,(o,p)=>(c(),f(d,{key:p,to:o.href,class:"p-16px border-b-carbon-20 flex hover_bg-primary-aik-20 justify-between group"},{default:i(()=>[r(u,{size:"medium",bold:""},{default:i(()=>[g(l(o.text),1)]),_:2},1024),b]),_:2},1032,["to"]))),128))])}const M=h($,[["render",E]]),P={emits:["close","submit","secondaryButtonClicked"],components:{XModal:w,BaseHeading:L,RedirectList:M,BaseButton:S},data(){return{isApideckVaultOpen:!1}},computed:{integrations(){return _.data.activeIssueTrackerIntegrations},firstIntegrationService(){return this.integrations.length<1?"":this.integrations[0].service},firstIntegrationName(){return this.firstIntegrationService?this.$t("TASK_TRACKER_"+this.firstIntegrationService):""},firstIntegrationIcon(){return this.firstIntegrationService?y(this.firstIntegrationService):""},title(){return this.$t("MULTIPLE_TASK_TRACKER.MODAL.TITLE",{taskTracker:this.firstIntegrationName})},links(){return this.integrations.map(e=>({text:e.name,href:`/settings/integrations/tasktracker/${e.id}`}))}},methods:{onClose(){this.$emit("close")},async handleAddNewIssueTrackerIntegration(){if(this.isApideckVaultOpen)return;this.isApideckVaultOpen=!0;const e=await N({create_new_integration:!0}),t=e.apideck_consumer_identifier,a=this.firstIntegrationService;R.open({token:e.session_token,unifiedApi:"issue-tracking",serviceId:a,showAttribution:!1,onClose:async()=>{this.isApideckVaultOpen=!1,await x(t),await this.navigateToNewTaskTrackerPage()}})},async navigateToNewTaskTrackerPage(){const e=_.data.activeIssueTrackerIntegrations.map(a=>a.id);if(await _.fetchIssueTrackerIntegrationStatus(),this.integrations.length==0)return;const t=this.integrations.find(a=>!e.includes(a.id));if(t)return this.$emit("close"),this.$router.push(`/settings/integrations/tasktracker/${t.id}?fill_cache=1`)}}},K={class:"text--bold"};function O(e,t,a,I,T,s){const u=n("BaseHeading"),d=n("RedirectList"),o=n("BaseParagraph"),p=n("BaseIcon"),A=n("BaseButton"),B=n("XModal");return c(),f(B,{width:600,onClose:s.onClose,showCloseButton:!0,modalClass:"p-36px",allowBackgroundClose:!0},{default:i(()=>[k("div",null,[r(u,{as:"h4"},{default:i(()=>[g(l(s.title),1)]),_:1}),r(d,{class:"mt-24px mb-32px",links:s.links,onClick:t[0]||(t[0]=V=>e.$emit("close"))},null,8,["links"]),r(o,{size:"small",color:"subdued",class:"mb-16px",semiBold:""},{default:i(()=>[g(l(e.$t("MULTIPLE_TASK_TRACKER.MODAL.ADD_ANOTHER",{taskTracker:s.firstIntegrationName})),1)]),_:1}),r(A,{size:"medium",variation:"plain",onClick:s.handleAddNewIssueTrackerIntegration},{default:i(()=>[r(p,{icon:s.firstIntegrationIcon,class:"h-14px"},null,8,["icon"]),k("span",K,l(e.$t("MULTIPLE_TASK_TRACKER.MODAL.NEW_INSTANCE",{taskTracker:s.firstIntegrationName})),1)]),_:1},8,["onClick"])])]),_:1},8,["onClose"])}const F=h(P,[["render",O]]);export{F as default};
