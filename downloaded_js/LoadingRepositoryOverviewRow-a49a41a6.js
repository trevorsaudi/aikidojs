import{_ as b,r as i,q as l,k as p,w as a,n as r,aa as B,B as I,e as E,d as U,a2 as V,m as y,o,p as h,u as _,s as k,ai as f,S as g,F as v,ah as N,a1 as A}from"./index-13ff96f4.js";import{D as L,a as W}from"./DataTableCell-51c0104f.js";import{D as j}from"./DataTableSeverityIndicator-48ffb8dc.js";import{R as z}from"./repositoryActionMenu-07f5f11b.js";import{R as H,s as X}from"./RepostioryDomainCell-e75ba707.js";import"./lock-files-cdbb050f.js";import{S as G}from"./SupportedLockFilesModal-4d6e0a8a.js";import{F as K}from"./FaultyLockfileModal-7f5493a7.js";import{D as q}from"./DataTableLastScanColumn-e155b78a.js";import{s as Y}from"./freePlanLimitations-5f359256.js";const J={components:{TableCell:L}},Q={class:"text-blue-accent"};function Z(s,n,e,w,C,t){const d=i("TableCell");return l(),p(d,{alignment:"center","disable-hover-styles":!0,class:"bg-blue-ultra-light"},{default:a(()=>[r("span",Q,[B(s.$slots,"default")])]),_:3})}const $=b(J,[["render",Z]]),ee={props:{repository:Object,scanningProgress:Number,bookmarks:Array,faultyLockfileFindings:Array,hideDomainSection:Boolean},components:{BaseParagraph:I,RepositoryActionMenu:z,BaseIconButton:E,DataTableCell:L,DataTableSeverityIndicator:j,DataTableLoadingIndicator:$,SupportedLockFilesModal:G,FaultyLockfileModal:K,RepositoryDomainCell:H,BasePill:U,DataTableLastScanColumn:q,XTooltip:V},inject:["disabled"],data:function(){return{showLockfilesModal:!1,showFaultyLockfileModal:!1}},computed:{isScanning(){return this.scanningProgress>0&&this.scanningProgress<100},bookmarkedRepoIds(){return this.bookmarks.map(s=>s.type_id)},priority(){if(!this.disabled)return this.repository.max_issue_severity},showHasMissingLockFile(){return!!this.repository.active&&!!this.repository.has_missing_lockfile},showHasFaultyLockfile(){return!!this.repository.active&&!!this.repository.has_faulty_lockfile},repositoryPath(){if(!this.repository.repo_path)return"";let s=this.repository.repo_path.split("/");return s.shift(),s.join(" / ")+" / "},isClone(){return this.repository.scm_repo_uid.includes("_aikidoclone_")},isTfvc(){return this.repository.scm_repo_uid.startsWith("tfvc_")},shouldShowUpgradePlanButton(){return Y(this.repository)},repositoryProgrammingLanguages(){return this.repository.programming_languages.filter(Boolean)}},methods:{simplifyUrl:X,handleOpenLockfilesModal(){this.showLockfilesModal=!0},handleCloseLockfilesModal(){this.showLockfilesModal=!1},handleOpenFaultyLockfileModal(){this.showFaultyLockfileModal=!0},handleCloseFaultyLockfileModal(){this.showFaultyLockfileModal=!1},showUpgradePlanModal(){this.$modal.show("UpgradeAccountModal",{title:"Upgrade to scan more repositories",msg:"Our free plan includes scans every 3 days for up to 10 repositories. Upgrade now to any paid plan to automatically scan more repositories and manually trigger a scan anytime."})}}},oe={class:"flex justify-between align-center w-full"},te={key:0,class:"icon icon-bookmark valign-middle mr-4px"},ae={class:"text-carbon-60"},se={class:"desktop-small_hidden"},ne=r("i",{class:"icon icon-settings valign-middle"},null,-1),le=r("i",{class:"icon icon-settings valign-middle"},null,-1),ie={class:"ws-pre"},re={class:"hidden sm:block"},de={class:"block sm:hidden"},ce={class:"hidden sm:block"},ue={class:"block sm:hidden"},pe=r("div",{class:"shimmer shimmer--blue"},null,-1),_e=[pe],me={key:1,class:"w-full"};function he(s,n,e,w,C,t){const d=i("BasePill"),c=i("BaseParagraph"),m=i("DataTableCell"),S=i("RepositoryDomainCell"),M=i("DataTableLoadingIndicator"),R=i("DataTableSeverityIndicator"),D=i("XTooltip"),P=i("DataTableLastScanColumn"),T=i("BaseIconButton"),F=i("RepositoryActionMenu"),x=i("SupportedLockFilesModal"),O=i("FaultyLockfileModal");return l(),y(v,null,[o(m,null,{default:a(()=>[r("div",oe,[o(c,{class:"truncate"},{default:a(()=>[t.bookmarkedRepoIds.includes(e.repository.id)?(l(),y("i",te)):h("",!0),r("span",ae,_(t.repositoryPath),1),k(_(e.repository.scm_repo_name)+" ",1),t.isClone?(l(),p(d,{key:1,title:e.repository.path_to_scan||e.repository.scm_repo_default_branch,size:"compact",class:"inline-flex ml-4px mt-2px"},null,8,["title"])):t.isTfvc?(l(),p(d,{key:2,title:"TFVC",size:"compact",class:"inline-flex ml-4px mt-2px"})):h("",!0)]),_:1}),t.showHasMissingLockFile?(l(),y("button",{key:0,class:"bg-inherit border-0 cursor-pointer p-8px -m-8px text-color-danger flex align-center gap-8px",onClick:n[0]||(n[0]=f((...u)=>t.handleOpenLockfilesModal&&t.handleOpenLockfilesModal(...u),["prevent","stop"]))},[r("span",se,_(s.$t("REPO_OVERVIEW.ERRORS.MISSING_LOCK_FILE")),1),ne])):t.showHasFaultyLockfile?(l(),y("button",{key:1,class:"bg-inherit border-0 cursor-pointer p-8px -m-8px text-color-danger flex align-center gap-8px",onClick:n[1]||(n[1]=f((...u)=>t.handleOpenFaultyLockfileModal&&t.handleOpenFaultyLockfileModal(...u),["prevent","stop"]))},[r("span",null,_(s.$t("REPO_OVERVIEW.ERRORS.FAULTY_LOCK_FILE")),1),le])):h("",!0)])]),_:1}),e.hideDomainSection?h("",!0):(l(),p(S,{key:0,repository:e.repository,onRepositoryUpdated:n[2]||(n[2]=u=>s.$emit("repositoryUpdated",u)),class:g({"blur pointer-events-none":!!e.repository.is_blurred})},null,8,["repository","class"])),e.repository.active?(l(),y(v,{key:1},[t.isScanning?(l(),p(M,{key:0,class:g({"blur pointer-events-none":!!e.repository.is_blurred})},{default:a(()=>[k("Scanning...")]),_:1},8,["class"])):(l(),p(R,{key:1,priority:t.priority,class:g({"blur pointer-events-none":!!e.repository.is_blurred})},null,8,["priority","class"]))],64)):(l(),p(m,{key:2})),o(m,{class:g(["wide-tablet_hidden",{"blur pointer-events-none":!!e.repository.is_blurred}])},{default:a(()=>[o(c,{class:"truncate text-programming-language",bold:!0},{default:a(()=>[k(_(t.repositoryProgrammingLanguages.join(", "))+" ",1),t.repositoryProgrammingLanguages.length>1?(l(),p(D,{key:0},{default:a(()=>[r("span",ie,_(t.repositoryProgrammingLanguages.join(`
`)),1)]),_:1})):h("",!0)]),_:1})]),_:1},8,["class"]),o(m,{class:g(["wide-tablet_hidden",{"blur pointer-events-none":!!e.repository.is_blurred}])},{default:a(()=>[o(c,{class:"truncate"},{default:a(()=>[r("span",re,_(e.repository.open_issues),1),r("span",de,_(s.$t("REPO_OVERVIEW.NUM_OPEN_ISSUES",{n:e.repository.open_issues})),1)]),_:1})]),_:1},8,["class"]),o(m,{class:g(["wide-tablet_hidden",{"blur pointer-events-none":!!e.repository.is_blurred}])},{default:a(()=>[o(c,{class:"truncate"},{default:a(()=>[r("span",ce,_(e.repository.ignored_issues),1),r("span",ue,_(s.$t("REPO_OVERVIEW.NUM_IGNORED_ISSUES",{n:e.repository.ignored_issues})),1)]),_:1})]),_:1},8,["class"]),o(m,{class:g({"blur pointer-events-none":!!e.repository.is_blurred})},{default:a(()=>[e.scanningProgress&&e.scanningProgress>0&&e.scanningProgress<100?(l(),y("div",{key:0,class:"loading-bar",style:N({width:`${e.scanningProgress}%`})},_e,4)):t.shouldShowUpgradePlanButton?(l(),y("div",me,[o(d,{class:"mx-auto",variation:"orange",title:"Upgrade",onClick:f(t.showUpgradePlanModal,["prevent"])},null,8,["onClick"])])):e.repository.active?(l(),p(P,{key:2,"last-scanned-at":e.repository.last_scanned_at},null,8,["last-scanned-at"])):h("",!0)]),_:1},8,["class"]),o(m,{spacing:"compact",alignment:"center"},{default:a(()=>[r("div",{class:"data-table__row__action-container",onClick:n[8]||(n[8]=f(()=>s.$refs.trigger.click(),["prevent","stop"]))},[o(F,{repository:e.repository,"repo-bookmarks":e.bookmarks,onRepositoryUpdated:n[4]||(n[4]=u=>s.$emit("repositoryUpdated",u)),onRepoActiveStateChanged:n[5]||(n[5]=u=>s.$emit("repoActiveStateChanged",u)),onRepoDeletionStateChanged:n[6]||(n[6]=u=>s.$emit("repoDeletionStateChanged",u)),onClick:n[7]||(n[7]=f(()=>{},["prevent","stop"]))},{trigger:a(u=>[o(T,{onClick:n[3]||(n[3]=f(()=>{},["prevent","stop"])),onClicked:u.toggle,icon:"icon-actions",ref:"trigger",class:"data-table__row__action"},null,8,["onClicked"])]),_:1},8,["repository","repo-bookmarks"])])]),_:1}),s.showLockfilesModal?(l(),p(x,{key:3,scannedLockfiles:this.repository.target_paths,onClose:t.handleCloseLockfilesModal},null,8,["scannedLockfiles","onClose"])):h("",!0),s.showFaultyLockfileModal?(l(),p(O,{key:4,"repository-id":this.repository.id,onClose:t.handleCloseFaultyLockfileModal},null,8,["repository-id","onClose"])):h("",!0)],64)}const De=b(ee,[["render",he]]),ye={components:{LoadingSkeleton:A,DataTableRow:W,DataTableCell:L},methods:{calculateDynamicWidth(s=90){return`${Math.random()*(s-20)+20}%`}}};function ge(s,n,e,w,C,t){const d=i("LoadingSkeleton"),c=i("DataTableCell"),m=i("DataTableRow");return l(),p(m,null,{default:a(()=>[o(c,null,{default:a(()=>[o(d,{height:"14px",width:t.calculateDynamicWidth(70),class:"mb-4px"},null,8,["width"])]),_:1}),o(c,{class:"wide-tablet_hidden"},{default:a(()=>[o(d,{height:"14px"})]),_:1}),o(c,null,{default:a(()=>[o(d,{height:"14px"})]),_:1}),o(c,{class:"wide-tablet_hidden"},{default:a(()=>[o(d,{height:"14px"})]),_:1}),o(c,{class:"wide-tablet_hidden"},{default:a(()=>[o(d,{height:"14px"})]),_:1}),o(c,{class:"wide-tablet_hidden"},{default:a(()=>[o(d,{height:"14px"})]),_:1}),o(c,null,{default:a(()=>[o(d,{height:"14px"})]),_:1}),o(c)]),_:1})}const Pe=b(ye,[["render",ge]]);export{Pe as L,De as R};
