import{_ as O,eB as m,eA as C,V as h,f as T,eW as b,Y as f,eX as R,b_ as I,b$ as A,r as s,k as V,w as i,q as k,o as t,n,u as r,s as c}from"./index-13ff96f4.js";import{v as S}from"./azureDevops-98ef9f6d.js";import{O as z}from"./OnboardingProgressIndicator-8fa4a42d.js";const B={components:{OnboardingPage:m,OnboardingSection:C,OnboardingProgressIndicator:z,InputText:h,BaseButton:T},data(){return{organization:void 0,accessToken:void 0,isCreatingGroup:!1}},computed:{inputIsValid(){const e=!!this.organization&&this.organization.trim()!=="",o=!!this.accessToken&&this.accessToken.trim()!=="";return e&&o}},methods:{handleBack(){this.$router.replace("/onboarding/azure/connect-organization")},async handleContinue(){this.isCreatingGroup=!0;try{await S(this.organization);const{sys_group_id:e,status:o}=await b({access_token:this.accessToken,organization:this.organization});if(await f.setGroupContext(e),!await R()){this.$toast.error("This organization is already connected to Aikido. You need an invite to join."),go("/onboarding/self-managed/select-onboarding-type");return}I(),A(),go("/onboarding/azure/connect-repositories"),this.isCreatingGroup=!1}catch(e){throw this.isCreatingGroup=!1,e}}}},D=n("img",{class:"",src:"https://cdn.aikido.dev/assets/logo-white.svg?v=2",width:"180"},null,-1),P={class:"onboarding__title mb-36px mt-64px text-white"},v={class:"onboarding__paragraph onboarding__paragraph--size-large text-carbon-20"},G={class:"onboarding__title text-primary-aik-140 mb-8px"},x={class:"onboarding__paragraph onboarding__paragraph--size-medium text-carbon-60"},w=n("br",null,null,-1),U=n("a",{class:"link",href:"https://help.aikido.dev/en/articles/7155730-how-to-connect-your-azure-devops-projects-to-aikido",target:"_BLANK"},"read our guide",-1),y={class:"mb-16px mt-32px gap-32px flex flex-column"},$={class:"flex mt-auto gap-16px justify-end"};function Z(e,o,g,L,a,l){const E=s("OnboardingProgressIndicator"),_=s("OnboardingSection"),p=s("InputText"),u=s("BaseButton"),N=s("OnboardingPage");return k(),V(N,null,{default:i(()=>[t(_,{"align-content":"bottom",theme:"dark",class:"onboarding__section__content"},{default:i(()=>[D,n("h1",P,r(e.$t("ONBOARDING.AZURE_DEVOPS.CONNECT_SERVER.TITLE")),1),n("p",v,r(e.$t("ONBOARDING.AZURE_DEVOPS.CONNECT_SERVER.DESCRIPTION")),1),t(E,{"number-of-completed-steps":1,"number-of-steps":4})]),_:1}),t(_,{"align-content":"top",theme:"light",class:"onboarding__section__content"},{default:i(()=>[n("h4",G,r(e.$t("ONBOARDING.AZURE_DEVOPS.CONNECT_SERVER.CONNECT.TITLE")),1),n("p",x,[c(r(e.$t("ONBOARDING.AZURE_DEVOPS.CONNECT_SERVER.CONNECT.DESCRIPTION"))+" ",1),w,c("To learn where you can find this information, "),U,c(". ")]),n("div",y,[t(p,{modelValue:a.organization,"onUpdate:modelValue":o[0]||(o[0]=d=>a.organization=d),name:"organization_name",class:"onboarding__input",placeholder:"ACME Dev Team",title:e.$t("ONBOARDING.AZURE_DEVOPS.CONNECT_SERVER.CONNECT.ORGANIZATION_NAME.LABEL")},null,8,["modelValue","title"]),t(p,{modelValue:a.accessToken,"onUpdate:modelValue":o[1]||(o[1]=d=>a.accessToken=d),name:"personal_access_token",class:"onboarding__input",placeholder:"accesstoken123bd",title:e.$t("ONBOARDING.AZURE_DEVOPS.CONNECT_SERVER.CONNECT.ACCESS_TOKEN.LABEL")},null,8,["modelValue","title"])]),n("div",$,[t(u,{onClicked:o[2]||(o[2]=d=>e.$router.go(-1)),variation:"plain",size:"large"},{default:i(()=>[c(" Back ")]),_:1}),t(u,{onClicked:l.handleContinue,size:"large",disabled:!l.inputIsValid,"is-loading":a.isCreatingGroup},{default:i(()=>[c(r(e.$t("ONBOARDING.AZURE_DEVOPS.CONNECT_SERVER.CONNECT.CTA.CONTINUE")),1)]),_:1},8,["onClicked","disabled","is-loading"])])]),_:1})]),_:1})}const Y=O(B,[["render",Z]]);export{Y as default};
