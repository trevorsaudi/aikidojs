import{_ as S,H as B,f as E,B as g,M as O,al as R,ap as N,aq as k,r as s,q as u,k as v,w as e,n as p,o as i,s as d,u as r,m as h,p as T}from"./index-13ff96f4.js";import{I as L}from"./InputCheckbox-81cb3ca6.js";const x={emits:["close","submit"],components:{BaseHeading:B,BaseButton:E,BaseParagraph:g,BaseModal:O,LoadingSpinner:R,InputCheckbox:L},props:{action:{type:String,required:!0},repoIds:Array},data(){return{isLoading:!1,finishedRepoIds:[],isAdditionalConfirmationChecked:!1}},async mounted(){},computed:{title(){return this.action==="activate"?this.$t("SETTINGS.REPOSITORIES.BULK_ACTIONS.ACTIVATE.AFFIRM_ACTION_HEADER",this.repoIds.length):this.$t("SETTINGS.REPOSITORIES.BULK_ACTIONS.DEACTIVATE.AFFIRM_ACTION_HEADER",this.repoIds.length)},description(){return this.action==="activate"?this.$t("SETTINGS.REPOSITORIES.BULK_ACTIONS.ACTIVATE.AFFIRM_ACTION_DESCRIPTION"):this.$t("SETTINGS.REPOSITORIES.BULK_ACTIONS.DEACTIVATE.AFFIRM_ACTION_DESCRIPTION")},submitButtonText(){return this.action==="activate"?this.$t("SETTINGS.REPOSITORIES.BULK_ACTIONS.ACTIVATE.AFFIRM_ACTION_SUBMIT_BUTTON"):this.$t("SETTINGS.REPOSITORIES.BULK_ACTIONS.DEACTIVATE.AFFIRM_ACTION_SUBMIT_BUTTON")},submitButtonVariation(){return this.action==="deactivate"?"destructive":"primary"},shouldUseAdditionalConfirmation(){return this.action==="deactivate"}},methods:{async handleConfirmAction(){this.isLoading=!0;for(const n of this.repoIds)try{this.action=="activate"?await N(n):this.action==="deactivate"&&await k(n)}catch{}finally{this.finishedRepoIds.push(n)}this.isLoading=!1,this.$emit("close")}}},b=p("span",null,null,-1),V={class:"flex flex-column gap-12px"},y={key:0,class:"flex align-center gap-8px"},U={key:1,class:"flex flex-wrap gap-8px"};function M(n,o,f,F,t,a){const m=s("BaseHeading"),l=s("BaseParagraph"),_=s("LoadingSpinner"),C=s("InputCheckbox"),I=s("BaseButton"),A=s("BaseModal");return u(),v(A,{width:600,onClose:o[2]||(o[2]=c=>n.$emit("close")),allowBackgroundClose:!1},{header:e(()=>[b]),content:e(()=>[p("div",V,[i(m,{as:"h3"},{default:e(()=>[d(r(a.title),1)]),_:1}),i(l,{size:"medium",loose:""},{default:e(()=>[d(r(a.description),1)]),_:1}),t.isLoading?(u(),h("div",y,[i(_,{color:"#645dd7","background-color":"#d0cdff",width:16,height:16}),i(l,null,{default:e(()=>[d("Processing repository "+r(t.finishedRepoIds.length+1)+" of "+r(f.repoIds.length),1)]),_:1})])):T("",!0),a.shouldUseAdditionalConfirmation?(u(),h("div",U,[i(C,{modelValue:t.isAdditionalConfirmationChecked,"onUpdate:modelValue":o[0]||(o[0]=c=>t.isAdditionalConfirmationChecked=c),disabled:t.isLoading,readonly:t.isLoading},{default:e(()=>[i(l,{size:"medium",loose:""},{default:e(()=>[d("I am aware that this will wipe the full history.")]),_:1})]),_:1},8,["modelValue","disabled","readonly"])])):T("",!0)])]),footer:e(()=>[i(I,{onClicked:o[1]||(o[1]=c=>n.$emit("close")),variation:"plain",class:"ml-auto",disabled:t.isLoading},{default:e(()=>[d("Cancel")]),_:1},8,["disabled"]),i(I,{onClicked:a.handleConfirmAction,"is-loading":t.isLoading,variation:a.submitButtonVariation,disabled:a.shouldUseAdditionalConfirmation&&!t.isAdditionalConfirmationChecked},{default:e(()=>[d(r(a.submitButtonText),1)]),_:1},8,["onClicked","is-loading","variation","disabled"])]),_:1})}const D=S(x,[["render",M]]);export{D as default};
