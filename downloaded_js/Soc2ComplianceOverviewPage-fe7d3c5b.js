import{e as B}from"./reports-ed4978a9.js";import{P as F}from"./PageHeader-46c38a32.js";import{_ as S,H as O,X as A,dv as L,B as H,aV as q,r as e,m as s,o as t,w as n,n as r,k as u,F as l,t as M,p as R,q as a,s as m,S as T,u as p}from"./index-13ff96f4.js";import{A as I}from"./ActionMenu-3e4470bf.js";import{F as V}from"./FilterButton-bb5393a7.js";import{C as D}from"./ComplianceSection-1226ea47.js";import{C as N}from"./CompliancePrintHeader-341b18be.js";import{P as X}from"./PdfDownloadButton-072addbd.js";import"./AccordionContainer-09dc0ed4.js";import"./DataTable-e31a825a.js";import"./DataTableCell-51c0104f.js";import"./BracesIcon-0a8568f4.js";const E={components:{PageHeader:F,BaseHeading:O,XPreloader:A,ProgressBar:L,ComplianceSection:D,CompliancePrintHeader:N,ActionMenu:I,FilterButton:V,BaseParagraph:H,PdfDownloadButton:X},data(){return{isLoading:!0,overview:{},groupReference:void 0,mode:void 0}},provide(){return{filter_team_id:q(()=>this.$teamContext)}},async mounted(){await Promise.allSettled([this.loadComplianceOverview()])},watch:{async $teamContext(){this.$globalLoadingIndicator.show();try{await this.loadComplianceOverview()}finally{this.$globalLoadingIndicator.hide()}}},computed:{breadcrumbs(){return[{label:"Reports",href:"/reports"},{label:"SOC2 compliance"}]},compliance(){const i=this.overview.total_complying_rule_count??0,d=this.overview.total_rule_count??0;return i===0||this.isLoading?0:Math.round(i/d*100)},sections(){return this.mode?this.overview[this.mode]??{}:{...this.overview.risk_assessment??{},...this.overview.control_activities??{},...this.overview.logical_and_physical_access_controls??{},...this.overview.system_operations??{},...this.overview.change_management??{},...this.overview.additional_criteria??{}}},filterLabel(){return this.mode?this.mode==="risk_assessment"?"Risk assessment":this.mode==="control_environment"?"Control Environment":this.mode==="communication_and_information"?"Communication and Information":this.mode==="monitoring_activities"?"Monitoring activities":this.mode==="control_activities"?"Control activities":this.mode==="logical_and_physical_access_controls"?"Logical and physical access controls":this.mode==="system_operations"?"System operations":this.mode==="change_management"?"Change management":this.mode==="risk_mitigation"?"Risk mitigation":this.mode==="additional_criteria"?"Additional criteria for availability":"Filter controls":"Filter controls"},actions(){return[{title:"Controls",action:{label:"Clear filter",onClick:()=>this.mode=void 0},items:[{label:"1. Control Environment",onClick:()=>this.handleChangeFilter("control_environment"),active:this.mode==="control_environment"},{label:"2. Communication and Information",onClick:()=>this.handleChangeFilter("communication_and_information"),active:this.mode==="communication_and_information"},{label:"3. Risk Assessment",onClick:()=>this.handleChangeFilter("risk_assessment"),active:this.mode==="risk_assessment"},{label:"4. Monitoring activities",onClick:()=>this.handleChangeFilter("monitoring_activities"),active:this.mode==="monitoring_activities"},{label:"5. Control activities",onClick:()=>this.handleChangeFilter("control_activities"),active:this.mode==="control_activities"},{label:"6. Logical and physical access controls",onClick:()=>this.handleChangeFilter("logical_and_physical_access_controls"),active:this.mode==="logical_and_physical_access_controls"},{label:"7. System operations",onClick:()=>this.handleChangeFilter("system_operations"),active:this.mode==="system_operations"},{label:"8. Change management",onClick:()=>this.handleChangeFilter("change_management"),active:this.mode==="change_management"},{label:"9. Risk mitigation",onClick:()=>this.handleChangeFilter("risk_mitigation"),active:this.mode==="risk_mitigation"},{label:"10. Additional criteria for availability",onClick:()=>this.handleChangeFilter("additional_criteria"),active:this.mode==="additional_criteria"}]}]},emptyControlsMessage(){if(this.mode==="control_environment")return"SOC2 requires multiple processes related to the board of directors, management structures and accountability for individuals. These requirements are external to the technical scope of Aikido.";if(this.mode==="communication_and_information")return"SOC2 requires multiple processes related to internal and external communication. These requirements are external to the technical scope of Aikido.";if(this.mode==="monitoring_activities")return"SOC2 requires multiple processes related to compliance monitoring of the controls and making sure corrective actions are taken. These requirements are external to the technical scope of Aikido.";if(this.mode==="risk_mitigation")return"SOC2 requires multiple processes related to risk assessment and mitigation. These requirements are external to the technical scope of Aikido."}},methods:{async loadComplianceOverview(){this.overview=await B({teamId:null}),this.isLoading=!1},handleChangeFilter(i){if(this.mode===i){this.mode=void 0;return}this.mode=i}}},z={class:"flex gap-32px align-center"},W={class:"page-content"},j={class:"mb-16px flex align-center gap-12px"},G=r("i",{class:"icon icon-caret_down icon-12px"},null,-1),J={class:"flex flex-column gap-12px",id:"ComplianceSectionWrapper"},K={key:0,class:"flex rounded-8px py-32px px-16px bg-white border-1 border-carbon-20"};function Q(i,d,U,Y,h,o){const g=e("BaseHeading"),v=e("ProgressBar"),f=e("PdfDownloadButton"),C=e("PageHeader"),k=e("XPreloader"),b=e("FilterButton"),y=e("ActionMenu"),w=e("CompliancePrintHeader"),x=e("ComplianceSection"),P=e("BaseParagraph");return a(),s(l,null,[t(C,{breadcrumbs:o.breadcrumbs},{title:n(()=>[r("div",z,[t(g,{as:"h1"},{default:n(()=>[m("SOC2 compliance overview")]),_:1}),t(v,{progress:o.compliance},null,8,["progress"])])]),rightContent:n(()=>[t(f,{exportType:"soc2"})]),_:1},8,["breadcrumbs"]),r("div",W,[h.isLoading?(a(),u(k,{key:0,class:"absolute-centered",theme:"transparent"})):(a(),s(l,{key:1},[r("div",j,[t(y,{sections:o.actions,placement:"bottom-start"},{trigger:n(c=>[t(b,{onClick:c.toggle,class:T({"filter-button--active":!!h.mode})},{default:n(()=>[m(p(o.filterLabel)+" ",1),G]),_:2},1032,["onClick","class"])]),_:1},8,["sections"])]),r("div",J,[t(w,{title:"SOC2 compliance overview"}),(a(!0),s(l,null,M(o.sections??{},(c,_)=>(a(),u(x,{key:_,section:c,code:_},null,8,["section","code"]))),128)),o.emptyControlsMessage?(a(),s("div",K,[t(P,{size:"medium"},{default:n(()=>[m(p(o.emptyControlsMessage),1)]),_:1})])):R("",!0)])],64))])],64)}const me=S(E,[["render",Q]]);export{me as default};
