import{_ as S,f as T,H as _,B as g,N as f,M as I,ad as B,g0 as R,f$ as A,r as i,q as C,k as E,w as s,o as a,n as k,s as c,u as L}from"./index-13ff96f4.js";const M={props:{scmRepoIds:{type:Array,default:()=>[]},containerRepoIds:{type:Array,default:()=>[]}},emits:["close"],components:{BaseButton:T,BaseHeading:_,BaseParagraph:g,BaseSelect:f,BaseModal:I},data(){return{isSaving:!1,selectedTeam:null,isLoadingTeams:!0,teams:[]}},async mounted(){await this.loadTeams()},computed:{title(){return this.scmRepoIds.length>0?this.$t("TEAMS.BULK_ASSIGN_MODAL.REPOSITORIES.TITLE",{count:this.scmRepoIds.length}):this.$t("TEAMS.BULK_ASSIGN_MODAL.CONTAINERS.TITLE",{count:this.containerRepoIds.length})},teamOptions(){return this.teams.filter(e=>this.isTeamClickable(e)).map(e=>({id:e.id,title:e.name}))}},methods:{close(){this.$emit("close")},async loadTeams(){this.teams=await B(),this.isLoadingTeams=!1},isTeamClickable(e){return e.source_kind?!!this.$featureflags.disable_github_repo_team_sync:!0},async handleLinkToTeam(){var e,t;if(this.isSaving=!0,((e=this.containerRepoIds)==null?void 0:e.length)>0){for(const n of this.containerRepoIds)await R(this.selectedTeam,n);this.$toast.success({title:"Containers Assigned to Team",description:this.$t("TEAMS.BULK_ASSIGN_MODAL.CONTAINERS.SUCCESS_MESSAGE.DESCRIPTION",{count:this.containerRepoIds.length})})}if(((t=this.scmRepoIds)==null?void 0:t.length)>0){for(const n of this.scmRepoIds)await A(this.selectedTeam,n);this.$toast.success({title:"Repositories Assigned to Team",description:this.$t("TEAMS.BULK_ASSIGN_MODAL.REPOSITORIES.SUCCESS_MESSAGE.DESCRIPTION",{count:this.scmRepoIds.length})})}this.isSaving=!1,this.close()}}},y={class:"flex flex-column gap-12px"};function N(e,t,n,O,l,o){const d=i("BaseParagraph"),m=i("BaseHeading"),h=i("BaseSelect"),r=i("BaseButton"),p=i("BaseModal");return C(),E(p,{width:600,onClose:o.close,allowBackgroundClose:!1},{header:s(()=>[a(d,{color:"gray"})]),content:s(()=>[k("div",y,[a(m,{as:"h3"},{default:s(()=>[c(L(o.title),1)]),_:1}),a(d,{size:"medium"},{default:s(()=>[c(" Easily assign all the selected resources to the team you select. ")]),_:1}),a(h,{id:"selectedTeam",class:"w-full",options:o.teamOptions,modelValue:l.selectedTeam,"onUpdate:modelValue":t[0]||(t[0]=u=>l.selectedTeam=u),placeholder:"Select team...","is-loading":l.isLoadingTeams},null,8,["options","modelValue","is-loading"])])]),footer:s(()=>[a(r,{variation:"plain",onClicked:o.close,class:"ml-auto"},{default:s(()=>[c("Cancel")]),_:1},8,["onClicked"]),a(r,{onClicked:o.handleLinkToTeam,"is-loading":l.isSaving},{default:s(()=>[c("Save")]),_:1},8,["onClicked","is-loading"])]),_:1},8,["onClose"])}const v=S(M,[["render",N]]);export{v as default};
