import{_ as v,f as D,x as P,X as x,A as C,aJ as E,aK as R,r as a,m as u,k as l,p as d,o as e,n as p,w as t,F as h,q as n,s,t as S}from"./index-13ff96f4.js";import{D as O,a as L}from"./DataTable-e31a825a.js";import{P as M}from"./PageHeader-46c38a32.js";import{I as G}from"./IdeTokenRow-7fefc747.js";import{a as H}from"./DataTableCell-51c0104f.js";import{O as J}from"./OverviewEmptyState-c8440b9c.js";import{G as N}from"./GenericIllustration-4aca88e5.js";import{A as j}from"./ActionMenu-3e4470bf.js";const V={components:{PageHeader:M,DataTable:O,BaseButton:D,BaseIcon:P,DataTableHeader:L,XPreloader:x,IdeTokenRow:G,DataTableRow:H,OverviewEmptyState:J,GenericIllustration:N,ActionMenu:j},data(){return{tokens:[],isLoading:!0}},async mounted(){this.hasAccessToIdeIntegration||(Toast.error({title:this.$t("ERROR"),description:"This page is not available for your account"}),go("/settings/integrations")),await this.loadIdeTokens(),this.isLoading=!1},computed:{breadcrumbs(){return[{label:"Settings",href:"/settings"},{label:"Integrations",href:"/settings/integrations"},{label:"IDE"},{label:"JetBrains"}]},showEmptyState(){return!this.isLoading&&this.tokens.length===0},actions(){return[{title:"Duration",items:[{label:"Indefinite",onClick:()=>this.createAccessToken("indefinite")},{label:"One week",onClick:()=>this.createAccessToken("one_week")}]}]},hasAccessToIdeIntegration(){return!!(this.$featureflags.enable_vs_code_ide_plugin||C.isPayingProAndNotTrial())}},methods:{async loadIdeTokens(){this.tokens=await E("jetbrains")},async createAccessToken(i){const _=await R(i,"jetbrains");this.loadIdeTokens(),await this.$modal.show("CopyTokenModal",{token:_})},openAdoptionStatsModal(){this.$modal.show("IdeAdoptionModal",{ide:"jetbrains"})}}},X={key:1,class:"page-content"},z={class:"flex align-center mb-24px gap-12px"},U=p("i",{class:"icon icon-information"},null,-1),F={colspan:"5"};function q(i,_,K,W,k,o){const g=a("XPreloader"),f=a("PageHeader"),m=a("BaseButton"),I=a("BaseIcon"),b=a("ActionMenu"),r=a("DataTableHeader"),T=a("IdeTokenRow"),w=a("GenericIllustration"),y=a("OverviewEmptyState"),A=a("DataTableRow"),B=a("DataTable");return n(),u(h,null,[k.isLoading?(n(),l(g,{key:0,theme:"light",class:"supercenter"})):d("",!0),e(f,{title:"JetBrains IDE Plugin",breadcrumbs:o.breadcrumbs},null,8,["breadcrumbs"]),o.hasAccessToIdeIntegration?(n(),u("div",X,[p("div",z,[e(m,{as:"outside-link",size:"small",variation:"tertiary",class:"ml-auto",target:"_blank",href:"https://plugins.jetbrains.com/plugin/24993-aikido-security"},{default:t(()=>[U,s(" Setup Instructions ")]),_:1}),i.$groupUser.admin?(n(),l(m,{key:0,size:"small",variation:"tertiary",onClick:o.openAdoptionStatsModal},{default:t(()=>[s(" Adoption Stats ")]),_:1},8,["onClick"])):d("",!0),e(b,{sections:o.actions,placement:"bottom-end"},{trigger:t(c=>[e(m,{class:"ml-auto",size:"small",ref:"trigger",onClick:c.toggle},{default:t(()=>[s(" Generate Personal Access Token "),e(I,{icon:"icon-caret_down",class:"flex"})]),_:2},1032,["onClick"])]),_:1},8,["sections"])]),e(B,null,{header:t(()=>[e(r,{width:"auto"},{default:t(()=>[s("User")]),_:1}),e(r,{width:"200px"},{default:t(()=>[s("Created at")]),_:1}),e(r,{width:"200px"},{default:t(()=>[s("Expires at")]),_:1}),e(r,{width:"200px"},{default:t(()=>[s("Last Used at")]),_:1}),e(r,{width:"48px",alignment:"center"})]),body:t(()=>[(n(!0),u(h,null,S(k.tokens,c=>(n(),l(T,{token:c,key:c.id,onRevoked:o.loadIdeTokens},null,8,["token","onRevoked"]))),128)),o.showEmptyState?(n(),l(A,{key:0},{default:t(()=>[p("td",F,[e(y,{title:"No JetBrains IDE tokens registered",description:"Create your PAT for any JetBrains IDE here. Aikido supports IDEA, GoLand, PhpStorm, PyCharm, Rider and WebStorm.",variation:"empty",onOnAction:o.createAccessToken},{default:t(()=>[e(w)]),_:1},8,["onOnAction"])])]),_:1})):d("",!0)]),_:1})])):d("",!0)],64)}const ne=v(V,[["render",q]]);export{ne as default};
