import{X as N}from"./XTabs-d492da26.js";import{M as y,a as L}from"./insights-9f746568.js";import{_,B as I,r as e,q as d,k as l,w as o,o as r,s as m,u as f,an as h,bI as b,bA as E,m as v,n as C,F as R}from"./index-13ff96f4.js";import{M as T}from"./MiniStatsCard-7a2dcbd6.js";const O={props:{totalCount:Number,currentWeekCount:Number,isLoading:Boolean},components:{MiniStatsCard:T,BaseParagraph:I},computed:{title(){return this.$t("IGNORED_ISSUE_OVERVIEW.INSIGHTS.AUTO_IGNORED.TITLE",this.totalCount)},description(){return this.$t("IGNORED_ISSUE_OVERVIEW.INSIGHTS.AUTO_IGNORED.DESCRIPTION",this.currentWeekCount)}}};function M(u,c,i,p,s,t){const n=e("BaseParagraph"),a=e("MiniStatsCard");return d(),l(a,{title:t.title,variation:"neutral",icon:"icon-hidden",isLoading:i.isLoading},{default:o(()=>[r(n,{color:"subdued"},{default:o(()=>[m(f(t.description),1)]),_:1})]),_:1},8,["title","isLoading"])}const V=_(O,[["render",M]]),G={props:{timeSavedInHours:Number,isLoading:Boolean},components:{MiniStatsCard:T,BaseParagraph:I},computed:{title(){return this.$t("IGNORED_ISSUE_OVERVIEW.INSIGHTS.TIME_SAVED.TITLE",this.timeSavedInHours)},description(){return this.$t("IGNORED_ISSUE_OVERVIEW.INSIGHTS.TIME_SAVED.DESCRIPTION")}}};function w(u,c,i,p,s,t){const n=e("BaseParagraph"),a=e("MiniStatsCard");return d(),l(a,{title:t.title,variation:"positive",icon:"icon-shield_check",isLoading:i.isLoading},{default:o(()=>[r(n,{color:"subdued"},{default:o(()=>[m(f(t.description),1)]),_:1})]),_:1},8,["title","isLoading"])}const B=_(G,[["render",w]]),$={props:{reasons:Array},components:{MiniStatsCard:T,BaseParagraph:I},computed:{title(){return"Most common auto ignore reason"}}};function k(u,c,i,p,s,t){const n=e("BaseParagraph"),a=e("MiniStatsCard");return d(),l(a,{title:t.title,variation:"neutral",isLoading:!1},{default:o(()=>[this.reasons.length===0?(d(),l(n,{key:0,color:"subdued"},{default:o(()=>[m("Not enough information yet")]),_:1})):(d(),l(n,{key:1,color:"subdued"},{default:o(()=>[m(f(i.reasons[0].rule_shorthand),1)]),_:1}))]),_:1},8,["title"])}const D=_($,[["render",k]]),F={components:{AutoIgnoredStats:V,MiniStatsSection:y,TimeSavedStats:B,IgnoreReasonsStats:D},props:{relatedTypeFilters:{type:Array,default:()=>[]}},data(){return{isLoading:!0,stats:void 0}},async mounted(){await this.handleGetStats(),this.isLoading=!1,h.on(b,this.handleGetStats),h.on(E,this.handleGetStats)},unmounted(){h.off(b,this.handleGetStats),h.off(E,this.handleGetStats)},watch:{relatedTypeFilters:{handler(){this.handleGetStats()},deep:!0}},computed:{timeSaved(){return this.stats?this.stats.time_saved_in_hours:0},totalIssueCount(){return this.stats?this.stats.auto_ignored_issue_count.total.count_groups:0},weeklyCount(){return this.stats?this.stats.auto_ignored_issue_count.this_week.count_groups:0},ignoreReasons(){return this.stats?this.stats.count_auto_ignored_issues_by_reason:[]}},methods:{async handleGetStats(){this.stats=await L(this.relatedTypeFilters)}}};function A(u,c,i,p,s,t){const n=e("AutoIgnoredStats"),a=e("TimeSavedStats"),g=e("IgnoreReasonsStats"),S=e("MiniStatsSection");return d(),l(S,null,{default:o(()=>[r(n,{"total-count":t.totalIssueCount,"current-week-count":t.weeklyCount,isLoading:s.isLoading},null,8,["total-count","current-week-count","isLoading"]),r(a,{timeSavedInHours:t.timeSaved,isLoading:s.isLoading},null,8,["timeSavedInHours","isLoading"]),r(g,{reasons:t.ignoreReasons,isLoading:s.isLoading},null,8,["reasons","isLoading"])]),_:1})}const x=_(F,[["render",A]]),P={components:{IgnoredIssuesMiniStats:x,XTabs:N},data(){return{tab:this.$route.name,tabs:[{title:"Ignored issues",id:"ignoredIssuesIssueOverview"},{title:"Ignore reasons",id:"ignoredIssuesCriteriaOverview"}],relatedTypeFilters:[]}},mounted(){Breadcrumbs.show({breadcrumbs:this.breadcrumbs})},unmounted(){Breadcrumbs.hide()},watch:{tab(){this.$router.push({name:this.tab})},"$route.name"(){this.tab=this.$route.name}},computed:{breadcrumbs(){return[{label:"All issues",href:"/queue"},{label:"Ignored issues"}]}},methods:{handleRelatedTypeFiltersChanged(u){this.relatedTypeFilters=u}}},H={class:"page-header flex flex-column gap-32px"},U={class:"page-content"};function W(u,c,i,p,s,t){const n=e("IgnoredIssuesMiniStats"),a=e("XTabs"),g=e("router-view");return d(),v(R,null,[C("div",H,[r(n,{relatedTypeFilters:s.relatedTypeFilters},null,8,["relatedTypeFilters"]),r(a,{class:"page-tabs",tabs:s.tabs,modelValue:s.tab,"onUpdate:modelValue":c[0]||(c[0]=S=>s.tab=S)},null,8,["tabs","modelValue"])]),C("div",U,[r(g,{onOnRelatedTypeFiltersChanged:t.handleRelatedTypeFiltersChanged},null,8,["onOnRelatedTypeFiltersChanged"])])],64)}const z=_(P,[["render",W]]);export{z as default};
