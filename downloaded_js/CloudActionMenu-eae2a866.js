import{_ as u,r as d,q as c,k as p,p as M,A as w,an as f,bg as g,m,o as i,w as _,aa as D,F as S}from"./index-13ff96f4.js";import{A as T}from"./ActionMenu-3e4470bf.js";import A from"./ConfigureCloudModal-3285b63a.js";import U from"./DeleteCloudModal-fcf43857.js";const $={props:{cloud:Object,show:Boolean},emits:["cancel","delete"],components:{ConfigureCloudModal:A}};function E(e,o,l,r,n,t){const a=d("ConfigureCloudModal");return l.show?(c(),p(a,{key:0,cloud:l.cloud,onClose:o[0]||(o[0]=s=>e.$emit("cancel")),onDelete:o[1]||(o[1]=s=>e.$emit("delete"))},null,8,["cloud"])):M("",!0)}const N=u($,[["render",E]]),O={props:{cloud:{type:Object}},components:{ActionMenu:T,DeleteCloudModal:U,ConfigureCloudFlow:N},data(){return{showDeleteCloudModal:!1,showConfigureCloudModal:!1}},computed:{showUpdateSecretAction(){return["azure","digocean","gcp"].includes(this.cloud.type)},actions(){return[{title:this.$t("CLOUD_ACTION_MENU.TITLE"),items:[{label:this.$t("CLOUD_ACTION_MENU.START_SCAN"),onClick:this.handleStartScan,icon:"icon-arrow-right",iconColor:"green"},{label:this.$t("CLOUD_ACTION_MENU.EDIT_CLOUD"),onClick:this.handleShowConfigureCloudModal,icon:"icon-settings"},...this.showUpdateSecretAction?[{label:"Update Credentials",onClick:this.handleShowUpdateCredentialsModal,icon:"icon-edit"}]:[],{label:this.$t("CLOUD_ACTION_MENU.DELETE_CLOUD"),onClick:this.handleShowDeleteCloudModal,destructive:!0}]}]}},methods:{async handleStartScan(){if(w.hasExpiredFullTrial())return this.$modal.show("UpgradeAccountModal");f.emit("cloudScanStarted",this.cloud.id),await g(this.cloud.id,"scan"),Toast.success({title:this.$t("NOTIFICATIONS.SCAN_STARTED.TITLE"),description:this.$t("CLOUD_SCAN_STARTED")})},handleEditCloud(e){e.preventDefault(),this.$router.push(`/settings/integrations/clouds/aws/${this.cloud.id}/edit`)},handleShowDeleteCloudModal(){this.showConfigureCloudModal=!1,this.showDeleteCloudModal=!0},handleHideDeleteCloudModal(){this.showDeleteCloudModal=!1},handleCloudIsDeleted(){this.handleHideDeleteCloudModal()},handleShowConfigureCloudModal(){this.showConfigureCloudModal=!0},handleHideConfigureCloudModal(){this.showConfigureCloudModal=!1},handleShowUpdateCredentialsModal(){this.cloud.type==="azure"&&this.$modal.show("UpdateAzureClientSecretModal",{cloud:this.cloud}),["digocean","gcp"].includes(this.cloud.type)&&this.$modal.show("UpdateClientSecretModal",{cloud:this.cloud})}}};function I(e,o,l,r,n,t){const a=d("ActionMenu"),s=d("DeleteCloudModal"),C=d("ConfigureCloudFlow");return c(),m(S,null,[i(a,{sections:t.actions,placement:"bottom-end"},{trigger:_(h=>[D(e.$slots,"trigger",{toggle:h.toggle})]),_:3},8,["sections"]),i(s,{show:n.showDeleteCloudModal,onCancel:t.handleHideDeleteCloudModal,cloud:l.cloud},null,8,["show","onCancel","cloud"]),i(C,{show:n.showConfigureCloudModal,cloud:l.cloud,onCancel:t.handleHideConfigureCloudModal,onDelete:t.handleShowDeleteCloudModal},null,8,["show","cloud","onCancel","onDelete"])],64)}const F=u(O,[["render",I]]);export{F as C};
