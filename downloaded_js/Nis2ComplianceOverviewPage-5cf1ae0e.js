import{h as B}from"./reports-ed4978a9.js";import{P as F}from"./PageHeader-46c38a32.js";import{_ as H,H as L,X as N,dv as S,B as M,aV as I,r as e,m as s,o as t,w as n,n as a,k as p,F as c,t as O,p as T,q as i,s as d,S as V,u as h}from"./index-13ff96f4.js";import{A}from"./ActionMenu-3e4470bf.js";import{F as D}from"./FilterButton-bb5393a7.js";import{C as R}from"./ComplianceSection-1226ea47.js";import{C as X}from"./CompliancePrintHeader-341b18be.js";import{P as z}from"./PdfDownloadButton-072addbd.js";import"./AccordionContainer-09dc0ed4.js";import"./DataTable-e31a825a.js";import"./DataTableCell-51c0104f.js";import"./BracesIcon-0a8568f4.js";const q={components:{PageHeader:F,BaseHeading:L,XPreloader:N,ProgressBar:S,ComplianceSection:R,CompliancePrintHeader:X,ActionMenu:A,FilterButton:D,BaseParagraph:M,PdfDownloadButton:z},data(){return{isLoading:!0,overview:{},groupReference:void 0,mode:void 0}},provide(){return{filter_team_id:I(()=>this.$teamContext)}},async mounted(){await Promise.allSettled([this.loadComplianceOverview()])},watch:{async $teamContext(){this.$globalLoadingIndicator.show();try{await this.loadComplianceOverview()}finally{this.$globalLoadingIndicator.hide()}}},computed:{breadcrumbs(){return[{label:"Reports",href:"/reports"},{label:"Nis2 compliance"}]},compliance(){const o=this.overview.total_complying_rule_count??0,m=this.overview.total_rule_count??0;return o===0||this.isLoading?0:Math.round(o/m*100)},sections(){return this.mode?this.overview[this.mode]??{}:{...this.overview.cyber_security_risk_measures_result??{}}},filterLabel(){return this.mode&&this.mode==="cyber_security_risk_measures_result"?"Cyber security-risk measures":"Filter controls"},actions(){return[{title:"Controls",action:{label:"Clear filter",onClick:()=>this.mode=void 0},items:[{label:"1. General provisions",onClick:()=>this.handleChangeFilter("general_provisions"),active:this.mode==="general_provisions"},{label:"2. Coordinated cybersecurity frameworks",onClick:()=>this.handleChangeFilter("coordinated_cybersecurity_frameworks"),active:this.mode==="coordinated_cybersecurity_frameworks"},{label:"3. Cooperation at union and international level",onClick:()=>this.handleChangeFilter("cooperation_at_union_and_international_level"),active:this.mode==="cooperation_at_union_and_international_level"},{label:"4.2 Cyber security-risk measures",onClick:()=>this.handleChangeFilter("cyber_security_risk_measures_result"),active:this.mode==="cyber_security_risk_measures_result"}]}]},emptyControlsMessage(){if(this.mode==="general_provisions")return"This section contains legal definitions only";if(this.mode==="coordinated_cybersecurity_frameworks"||this.mode==="cooperation_at_union_and_international_level")return"This section is not relevant for companies"}},methods:{async loadComplianceOverview(){this.overview=await B({teamId:null}),this.isLoading=!1},handleChangeFilter(o){if(this.mode===o){this.mode=void 0;return}this.mode=o}}},E={class:"flex gap-32px align-center"},G={class:"page-content"},W={class:"mb-16px flex align-center gap-12px"},j=a("i",{class:"icon icon-caret_down icon-12px"},null,-1),J={class:"flex flex-column gap-12px",id:"ComplianceSectionWrapper"},K={key:0,class:"flex rounded-8px py-32px px-16px bg-white border-1 border-carbon-20"};function Q(o,m,U,Y,u,r){const f=e("BaseHeading"),g=e("ProgressBar"),v=e("PdfDownloadButton"),C=e("PageHeader"),b=e("XPreloader"),y=e("FilterButton"),w=e("ActionMenu"),k=e("CompliancePrintHeader"),x=e("ComplianceSection"),P=e("BaseParagraph");return i(),s(c,null,[t(C,{breadcrumbs:r.breadcrumbs},{title:n(()=>[a("div",E,[t(f,{as:"h1"},{default:n(()=>[d("NIS2 compliance overview")]),_:1}),t(g,{progress:r.compliance},null,8,["progress"])])]),rightContent:n(()=>[t(v,{exportType:"nis2"})]),_:1},8,["breadcrumbs"]),a("div",G,[u.isLoading?(i(),p(b,{key:0,class:"absolute-centered",theme:"transparent"})):(i(),s(c,{key:1},[a("div",W,[t(w,{sections:r.actions,placement:"bottom-start"},{trigger:n(l=>[t(y,{onClick:l.toggle,class:V({"filter-button--active":!!u.mode})},{default:n(()=>[d(h(r.filterLabel)+" ",1),j]),_:2},1032,["onClick","class"])]),_:1},8,["sections"])]),a("div",J,[t(k,{title:"NIS2 compliance overview"}),(i(!0),s(c,null,O(r.sections??{},(l,_)=>(i(),p(x,{key:_,section:l,code:_},null,8,["section","code"]))),128)),r.emptyControlsMessage?(i(),s("div",K,[t(P,{size:"medium"},{default:n(()=>[d(h(r.emptyControlsMessage),1)]),_:1})])):T("",!0)])],64))])],64)}const de=H(q,[["render",Q]]);export{de as default};
