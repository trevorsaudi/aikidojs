import{_ as N,H as p,f as m,B as S,M as B,al as g,bb as O,bc as G,ba as M,r as s,q as I,k as L,w as e,n as u,o as i,s as r,u as d,m as _,p as A}from"./index-13ff96f4.js";import{I as b}from"./InputCheckbox-81cb3ca6.js";const v={emits:["close","submit"],components:{BaseHeading:p,BaseButton:m,BaseParagraph:S,BaseModal:B,LoadingSpinner:g,InputCheckbox:b},props:{action:{type:String,required:!0},containerRepoIds:Array},data(){return{isLoading:!1,finishedContainerRepoIds:[],isAdditionalConfirmationChecked:!1}},async mounted(){},computed:{title(){return this.action==="activate"?this.$t("SETTINGS.CONTAINER_IMAGE_REGISTRY.BULK_ACTIONS.ACTIVATE.AFFIRM_ACTION_HEADER",this.containerRepoIds.length):this.action==="delete"?this.$t("SETTINGS.CONTAINER_IMAGE_REGISTRY.BULK_ACTIONS.DELETE.AFFIRM_ACTION_HEADER",this.containerRepoIds.length):this.$t("SETTINGS.CONTAINER_IMAGE_REGISTRY.BULK_ACTIONS.DEACTIVATE.AFFIRM_ACTION_HEADER",this.containerRepoIds.length)},description(){return this.action==="activate"?this.$t("SETTINGS.CONTAINER_IMAGE_REGISTRY.BULK_ACTIONS.ACTIVATE.AFFIRM_ACTION_DESCRIPTION"):this.action==="delete"?this.$t("SETTINGS.CONTAINER_IMAGE_REGISTRY.BULK_ACTIONS.DELETE.AFFIRM_ACTION_DESCRIPTION"):this.$t("SETTINGS.CONTAINER_IMAGE_REGISTRY.BULK_ACTIONS.DEACTIVATE.AFFIRM_ACTION_DESCRIPTION")},submitButtonText(){return this.action==="activate"?this.$t("SETTINGS.CONTAINER_IMAGE_REGISTRY.BULK_ACTIONS.ACTIVATE.AFFIRM_ACTION_SUBMIT_BUTTON"):this.action==="delete"?this.$t("SETTINGS.CONTAINER_IMAGE_REGISTRY.BULK_ACTIONS.DELETE.AFFIRM_ACTION_SUBMIT_BUTTON"):this.$t("SETTINGS.CONTAINER_IMAGE_REGISTRY.BULK_ACTIONS.DEACTIVATE.AFFIRM_ACTION_SUBMIT_BUTTON")},submitButtonVariation(){return this.action==="deactivate"||this.action==="delete"?"destructive":"primary"},shouldUseAdditionalConfirmation(){return this.action==="deactivate"||this.action==="delete"}},methods:{async handleConfirmAction(){this.isLoading=!0;for(const n of this.containerRepoIds)try{this.action=="activate"?await O(n):this.action==="deactivate"?await G(n):this.action==="delete"&&await M(n)}catch{}finally{this.finishedContainerRepoIds.push(n)}this.isLoading=!1,this.$emit("close")}}},k=u("span",null,null,-1),U={class:"flex flex-column gap-12px"},y={key:0,class:"flex align-center gap-8px"},F={key:1,class:"flex flex-wrap gap-8px"};function x(n,o,h,V,t,a){const C=s("BaseHeading"),l=s("BaseParagraph"),E=s("LoadingSpinner"),R=s("InputCheckbox"),T=s("BaseButton"),f=s("BaseModal");return I(),L(f,{width:600,onClose:o[2]||(o[2]=c=>n.$emit("close")),allowBackgroundClose:!1},{header:e(()=>[k]),content:e(()=>[u("div",U,[i(C,{as:"h3"},{default:e(()=>[r(d(a.title),1)]),_:1}),i(l,{size:"medium",loose:""},{default:e(()=>[r(d(a.description),1)]),_:1}),t.isLoading?(I(),_("div",y,[i(E,{color:"#645dd7","background-color":"#d0cdff",width:16,height:16}),i(l,null,{default:e(()=>[r("Processing container repository "+d(t.finishedContainerRepoIds.length+1)+" of "+d(h.containerRepoIds.length),1)]),_:1})])):A("",!0),a.shouldUseAdditionalConfirmation?(I(),_("div",F,[i(R,{modelValue:t.isAdditionalConfirmationChecked,"onUpdate:modelValue":o[0]||(o[0]=c=>t.isAdditionalConfirmationChecked=c),disabled:t.isLoading,readonly:t.isLoading},{default:e(()=>[i(l,{size:"medium",loose:""},{default:e(()=>[r("I am aware that this will wipe the full history.")]),_:1})]),_:1},8,["modelValue","disabled","readonly"])])):A("",!0)])]),footer:e(()=>[i(T,{onClicked:o[1]||(o[1]=c=>n.$emit("close")),variation:"plain",class:"ml-auto",disabled:t.isLoading},{default:e(()=>[r("Cancel")]),_:1},8,["disabled"]),i(T,{onClicked:a.handleConfirmAction,"is-loading":t.isLoading,variation:a.submitButtonVariation,disabled:a.shouldUseAdditionalConfirmation&&!t.isAdditionalConfirmationChecked},{default:e(()=>[r(d(a.submitButtonText),1)]),_:1},8,["onClicked","is-loading","variation","disabled"])]),_:1})}const K=N(v,[["render",x]]);export{K as default};
