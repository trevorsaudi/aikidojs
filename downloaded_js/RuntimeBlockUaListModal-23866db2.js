import{_ as I,a2 as B,d as T,B as y,z as v,r as n,q as i,m as c,n as a,o,w as d,s as m,u as h,k as f,S,p as g,ai as L,ah as x,au as C,X as w,A,el as M,hh as O,an as E,F as P,t as U}from"./index-13ff96f4.js";import{I as V}from"./InputMultiSelect-21584437.js";import"./ActionMenu-3e4470bf.js";import"./InputCheckbox-81cb3ca6.js";const N={components:{XTooltip:B,BasePill:T,BaseParagraph:y,InputSwitch:v},props:{list:{type:Object,required:!0},subscribed:{type:Boolean,required:!0},onToggle:{type:Function,required:!0}},methods:{handleToggleClick(){this.onToggle(this.list.value)}}},F={class:"flex flex-column gap-2px"},R={class:"flex justify-between h-20px"},z={class:"flex align-center gap-8px"},q={key:0},X={key:0},D={key:1},W={class:"flex align-center gap-8px"},j={class:"flex align-center gap-4px"},G=["src"];function H(s,e,t,k,b,r){const u=n("BaseParagraph"),p=n("BasePill"),l=n("XTooltip"),_=n("InputSwitch");return i(),c("div",F,[a("div",R,[a("div",z,[o(u,{bold:"",color:t.list.disabled?"light-gray":"black"},{default:d(()=>[m(h(t.list.label),1)]),_:1},8,["color"]),t.list.disabled?(i(),c("div",q,[t.list.disabled?(i(),f(p,{key:0,onClick:t.list.disabledAction.handleAction,icon:t.list.disabledAction.planIcon,variation:t.list.disabledAction.planVariation,size:"compact",title:t.list.disabledAction.text,class:S({"cursor-pointer":!0,"text-secondary-dev-120":!0})},null,8,["onClick","icon","variation","title"])):g("",!0),o(l,null,{default:d(()=>[m(h(t.list.disabledTooltip),1)]),_:1})])):g("",!0)]),t.list.disabled?(i(),c("div",X,[o(_,{disabled:!0,onClick:e[0]||(e[0]=L(()=>{},["stop"])),small:""}),(i(),f(l,{key:t.list.label},{default:d(()=>[m(h(t.list.disabledTooltip),1)]),_:1}))])):g("",!0),t.list.disabled?g("",!0):(i(),c("div",D,[o(_,{disabled:t.list.disabled,modelValue:t.subscribed,onClick:e[1]||(e[1]=L(()=>{},["stop"])),"onUpdate:modelValue":r.handleToggleClick,small:""},null,8,["disabled","modelValue","onUpdate:modelValue"])]))]),a("div",W,[a("div",j,[a("img",{src:"/assets/icons/user-agent.svg",height:"10",class:"text-carbon-60",style:x({opacity:t.list.disabled?"0.5":"1"})},null,12,G),o(u,{size:"small","semi-bold":"",color:t.list.disabled?"light-gray":"gray"},{default:d(()=>[m(h(t.list.amount)+" user agents ",1)]),_:1},8,["color"])])]),o(u,{size:"small",color:t.list.disabled?"light-gray":"subdued"},{default:d(()=>[m(h(t.list.description),1)]),_:1},8,["color"])])}const J=I(N,[["render",H]]),K={components:{BaseConfirmModal:C,InputMultiSelect:V,XPreloader:w,BlockBotsList:J},emits:["close"],props:{serviceId:{type:Number,required:!0}},data(){return{modalWidth:1e3,isLoadingLists:!1,selectedListIds:[],currentSelectedListIds:[],lists:[],disableSubmit:!1}},async mounted(){await this.init()},computed:{listOptions(){return A.hasExpiredFullTrial()?this.lists.map(s=>({...s,disabled:this.selectedListIds.length>0&&!this.selectedListIds.includes(s.value),disabledTooltip:"Free plan includes 1 blocklist selection. Upgrade for multiple lists.",disabledAction:{handleAction:()=>{this.$modal.show("UpgradeAccountModal",{title:"Blocking multiple bot categories is a paid feature",msg:"Upgrade now to any paid plan to block more bots."})},text:"Basic plan",planIcon:"icon-starter",planVariation:"neon-green"}})):this.lists}},methods:{async init(){await this.$nextTick(),await Promise.all([this.loadLists()])},async loadLists(){this.isLoadingLists=!0;const s=await M(this.serviceId);for(const e of s)this.lists.push({value:e.id,label:e.name,description:e.description,amount:e.amount}),e.subscribed&&(this.selectedListIds.push(e.id),this.currentSelectedListIds.push(e.id));this.lists.sort((e,t)=>e.label.localeCompare(t.label)),this.isLoadingLists=!1},async submit(){if(this.selectedListIds.length==0&&this.currentSelectedListIds.length==0){this.$emit("close");return}this.disableSubmit=!0;const s=this.currentSelectedListIds.filter(e=>!this.selectedListIds.includes(e));await O({serviceId:this.serviceId,subscribeTo:this.selectedListIds,unsubscribeFrom:s}),this.$toast.success("Successfully updated blocked bots, it might take up to a minute to take effect."),E.emit("runtime.lists.ua.updated"),this.$emit("close")},handleToggleClick(s){this.selectedListIds.includes(s)?this.selectedListIds=this.selectedListIds.filter(e=>e!==s):this.selectedListIds.push(s)}}},Q={class:"flex flex-column gap-8px"},Y=a("hr",{class:"divider my-8px"},null,-1);function Z(s,e,t,k,b,r){const u=n("BlockBotsList"),p=n("BaseConfirmModal");return i(),f(p,{title:s.$t("RUNTIME_PROTECTION.FIREWALL.BOTS.MODAL.TITLE"),description:s.$t("RUNTIME_PROTECTION.FIREWALL.BOTS.MODAL.DESC"),buttonSubmitText:"Block Bots",disableSubmit:b.disableSubmit,onSubmit:r.submit,onClose:e[0]||(e[0]=l=>s.$emit("close")),onSecondaryButtonClicked:e[1]||(e[1]=l=>s.$emit("close")),width:b.modalWidth,allowBackgroundClose:!1},{default:d(()=>[a("div",null,[a("ul",Q,[(i(!0),c(P,null,U(r.listOptions,l=>(i(),c("li",{key:l.value},[o(u,{list:l,subscribed:b.selectedListIds.includes(l.value),onToggle:r.handleToggleClick},null,8,["list","subscribed","onToggle"]),Y]))),128))])])]),_:1},8,["title","description","disableSubmit","onSubmit","width"])}const ie=I(K,[["render",Z]]);export{ie as default};
